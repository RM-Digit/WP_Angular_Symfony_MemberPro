<div class="page page-project page-project-define" ng-controller="ProjectControlCtrl">
	<header class="project-header">
		<div class="project-header-text">
			{{projectDetail.Name}} - Control Phase
		</div>
		<div class="project-info">
			<ul class="list-unstyled list-inline">
				<li>PROJ{{projectId}}</li>
				<li><i class="fa fa-check"></i> Tasks <span class="text-muted">({{$root.currentProject.tasksLeft}})</span></li>
				<li class="pull-right back-to-project"><a href="#/project/{{projectId}}"><i class="zmdi zmdi-arrow-left"></i> Back To Project</a></li>
			</ul>
		</div>
	</header>
	<div class="row ui-section">
		<section class="panel panel-default">
			<div class="panel-body">
				<div class="row">
					<div class="col-md-12">
						<div class="ui-tab-container ui-tab-vertical">
							<uib-tabset class="ui-tab">
								<uib-tab ng-click="activateTab(0)" active="activeTab[0]">
									<uib-tab-heading>
										<span>SPC Chart</span>
										<div class="ui-ribbon-container ui-ribbon-success">
											<div class="ui-ribbon-wrapper" ng-show="phaseDetail.SCP_Chart.Status != 'working'">
												<div class="ui-ribbon">
													<i class="fa fa-fw fa-check"></i>
												</div>
											</div>
										</div>
									</uib-tab-heading>
									<div class="row subphase-header">
										<div class="col-sm-12">
											<md-menu md-position-mode="target-right target" class="pull-right">
												<md-button aria-label="Open Menu" class="md-icon-button subphase-menu-button" ng-click="generateSpcDataExport();generateSpcChartExport();$mdOpenMenu($event)">
													<md-icon md-menu-origin><span class="fa fa-info-circle"></span></md-icon>
												</md-button>
												<md-menu-content width="2">
													<md-menu-item ng-show="!walkthroughs.spc"><md-button ng-click="showWalkthrough('spc', regressionWalkthroughData)"> <span md-menu-align-target>Show Walkthrough</span></md-button></md-menu-item>
													<md-menu-item ng-show="walkthroughs.spc"><md-button ng-click="hideWalkthrough('spc')"> <span md-menu-align-target>Skip Walkthrough</span></md-button></md-menu-item>
													<md-menu-item ng-show="!walkthroughs.spc"><a download="SPC.xlsx" href="{{exportSpcDataBlobLink}}" md-menu-align-target class="md-button md-ink-ripple">Export Data</a></md-menu-item>
													<md-menu-item ng-show="!walkthroughs.spc"><a download="SPC.png" href="{{exportSpcChartLink}}" md-menu-align-target class="md-button md-ink-ripple">Export Chart</a></md-menu-item>
												</md-menu-content>
											</md-menu>
										</div>
									</div>
									<div class="row" ng-show="walkthroughs.spc">
										<div class="col-sm-12" data-phase-component="spc" style="text-align:center">
											<p style="font-weight:100; font-size:2em; margin-bottom:20px">Let’s develop your SPC Chart!</p>
											<div class="l6_step">
												<p class="lead">How many samples will you need to input?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="60" flex="100">
														<label>Number of samples</label>
														<input type="text" ng-blur="validateField($event, spcWalkthroughData.NumberOfSamples)" ng-model="spcWalkthroughData.NumberOfSamples">
													</md-input-container>
												</div>
											</div>
											<div class="l6_step">
												<p class="lead">Next let’s input your data for each sample:</p>
												<div flex-gt-sm="100" flex="100">
													<div class="table-responsive">
														<table class="table table-striped table-condensed no-margin">
													    <thead class="text-center">
													    	<tr>
													    		<td></td>
													    		<td ng-repeat="(colIndex, col) in spcWalkthroughData.Input[0] track by $index">Sample {{ colIndex+1 }}</td>
													    		<td></td>
													    	</tr>
													    </thead>
													    <tbody>
													    	<tr ng-repeat="(rowIndex, row) in spcWalkthroughData.Input track by $index">
													    		<td>{{ rowIndex+1 }}</td>
													    		<td ng-repeat="(colIndex, col) in row track by $index">
													    			<md-input-container>
												        			<input type="number" ng-model="spcWalkthroughData.Input[rowIndex][colIndex]" ng-blur="validateField($event, spcWalkthroughData.Input)" ng-click="validateField($event, spcWalkthroughData.Input)">
												        		</md-input-container>
													    		</td>
													    		<td>
																		<md-button class="md-raised md-fab md-mini md-warn btn-w-md md-button md-ink-ripple" ng-transclude="" ng-click="spcWalkthroughData.removeInputRow(rowIndex)">
							                      	<span class="ng-scope"><i class="zmdi zmdi-minus"></i></span>
							                      	<div class="md-ripple-container"></div>
							                      </md-button>
													    		</td>
													    	</tr>
													    </tbody>
													    <tfoot>
													      <tr>
													        <td style="border-right:0;" colspan="{{ spcWalkthroughData.Input[0].length + 3 }}">
							                      <md-button class="md-raised md-fab md-mini md-primary btn-w-md md-button md-ink-ripple" ng-transclude="" ng-click="spcWalkthroughData.addInputRow()" ng-if="spcWalkthroughData.Input.length > 1">
							                      	<span class="ng-scope"><i class="zmdi zmdi-plus"></i></span>
							                      	<div class="md-ripple-container"></div>
							                      </md-button>
													        </td>
													      </tr>
													    </tfoot>
													  </table>
													</div>
											</div>
										</div>
						        <div class="l6_step_submit" ng-if="walkthroughShouldShowSubmit()">
						          <md-button class="md-raised btn-w-md md-primary" ng-click="completeSpcWalkthrough()">Submit</md-button>
						        </div>
						        <div class="l6_step_next" ng-if="walkthroughShouldShowNext()">
						          <md-button class="btn-next-step md-raised md-accent btn-w-md" ng-click="goToNextStep()">Next Step <i class="fa fa-fw fa-angle-right"></i></md-button>
						        </div>
									</div>
								</div>
									<div class="row" ng-show="!walkthroughs.spc">
										<div class="col-sm-12">
												<div flex-gt-sm="100" flex="100">
													<div class="table-responsive">
														<table class="table table-striped table-condensed no-margin">
													    <thead class="text-center">
													    	<tr>
													    		<td></td>
													    		<td ng-repeat="(colIndex, col) in spcTable.Input[0] track by $index">Sample {{ colIndex+1 }}</td>
													    		<td></td>
													    	</tr>
													    </thead>
													    <tbody>
													    	<tr ng-repeat="(rowIndex, row) in spcTable.Input track by $index">
													    		<td>{{ rowIndex+1 }}</td>
													    		<td ng-repeat="(colIndex, col) in row track by $index">
													    			<md-input-container>
												        			<input type="number" ng-model="spcTable.Input[rowIndex][colIndex]">
												        		</md-input-container>
													    		</td>
													    		<td>
																		<md-button class="md-raised md-fab md-mini md-warn btn-w-md md-button md-ink-ripple" ng-transclude="" ng-click="spcTable.removeInputRow(rowIndex)" ng-if="spcTable.Input.length > 1">
							                      	<span class="ng-scope"><i class="zmdi zmdi-minus"></i></span>
							                      	<div class="md-ripple-container"></div>
							                      </md-button>
													    		</td>
													    	</tr>
													    </tbody>
													    <tfoot>
													      <tr>
													        <td style="border-right:0;" colspan="{{ spcTable.Input[0].length + 3 }}">
							                      <md-button class="md-raised md-fab md-mini md-primary btn-w-md md-button md-ink-ripple" ng-transclude="" ng-click="spcTable.addInputRow()">
							                      	<span class="ng-scope"><i class="zmdi zmdi-plus"></i></span>
							                      	<div class="md-ripple-container"></div>
							                      </md-button>
													        </td>
													      </tr>
													    </tfoot>
													  </table>
													</div>
												</div>
											</div>
											<div class="col-sm-12">
												<br><br><br>
												<div id="spc-flot-container" style="padding:20px;background: white;">
													<span class="lead">Avg: {{lineAvg}} &nbsp;&nbsp;&nbsp;UCL: {{lineUCL}} &nbsp;&nbsp;&nbsp; LCL: {{lineLCL}}</span>
													<div id="spc-flot" data-flot-chart data-data="scpData.data" data-options="scpData.options" style="width: 100%; height: 400px;" ng-if="spcTable.Input.length"></div>
												</div>
											</div>
											<div class="col-sm-12" style="margin-top:10px">
												<md-button class="md-raised md-primary btn-w-md md-button md-ink-ripple pull-right" ng-transclude="" ng-click="saveSpc()" style="margin-left:10px;"><span class="ng-scope">Save Changes</span><div class="md-ripple-container"></div></md-button>
												<md-button class="md-raised md-accent btn-w-md md-button md-ink-ripple pull-right" style="margin-right:10px;" ng-transclude="" ng-click="completePhaseComponent('Control','SCP Chart')"><span class="ng-scope">{{(phaseDetail.SCP_Chart.Status != 'working') ? 'Mark Incomplete' : 'Mark Complete'}}</span><div class="md-ripple-container"></div></md-button>
											</div>
										</div>
									<!-- </div> -->
								</uib-tab>
								<uib-tab ng-click="activateTab(1)" active="activeTab[1]">
									<uib-tab-heading>
										<span>Control Plan</span>
										<div class="ui-ribbon-container ui-ribbon-success">
											<div class="ui-ribbon-wrapper" ng-show="phaseDetail.Control_Plan.Status != 'working'">
												<div class="ui-ribbon">
													<i class="fa fa-fw fa-check"></i>
												</div>
											</div>
										</div>
									</uib-tab-heading>
									<div class="row subphase-header">
										<div class="col-sm-12">
											<md-menu md-position-mode="target-right target" class="pull-right">
												<md-button aria-label="Open Menu" class="md-icon-button subphase-menu-button" ng-click="generateControlPlanExportData();$mdOpenMenu($event)">
													<md-icon md-menu-origin><span class="fa fa-info-circle"></span></md-icon>
												</md-button>
												<md-menu-content width="2">
													<md-menu-item ng-show="!walkthroughs.control_plan"><md-button ng-click="showWalkthrough('control_plan', controlPlanData)"> <span md-menu-align-target>Show Walkthrough</span></md-button></md-menu-item>
													<md-menu-item ng-show="walkthroughs.control_plan"><md-button ng-click="hideWalkthrough('control_plan')"> <span md-menu-align-target>Skip Walkthrough</span></md-button></md-menu-item>
													<md-menu-item ng-show="!walkthroughs.control_plan">
														<a download="Control_Plan.xlsx" href="{{exportControlPlanBlobLink}}" md-menu-align-target class="md-button md-ink-ripple">Export Data</a>
													</md-menu-item>
												</md-menu-content>
											</md-menu>
										</div>
									</div>
									<div class="row" ng-show="walkthroughs.control_plan">
										<div class="col-sm-12" data-phase-component="control_plan" style="text-align:center">
											<p style="font-weight:100; font-size:2em; margin-bottom:20px">Let's plan some controls!</p>
											<div class="l6_step" data-step-required="ProcessSteps,Ctq">
												<p class="lead">What process step is used in this control plan? What is the process variable?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="60" flex="100">
														<label>Process Step (e.g Delivery)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].ProcessSteps">
													</md-input-container>
												</div>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="40" flex="100">
														<label>Process Variable</label>
														<md-select ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].Ctq" aria-label="select">
															<md-option ng-repeat="c in [{val:'KPIV',txt:'Key Process Input Variable'},{val:'KPOV',txt:'Key Process Output Variable'}]" value="{{c.val}}"> {{c.txt}} </md-option>
														</md-select>
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="SpecificationCharacteristic">
												<p class="lead">What are the characteristics? <br/>(e.g. Outer diameter, customer specified due date, etc.)</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="50" flex="100">
														<label>Specification Characteristic</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].SpecificationCharacteristic">
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="Lsl,Usl,UnitOfMeasure">
												<p class="lead">What are the specification levels (LSL &amp; USL) and unit of measure?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="33" flex="100">
														<label>Lower Spec Level (e.g. 0.0004)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].Lsl">
													</md-input-container>
													<md-input-container flex-gt-sm="33" flex="100">
														<label>Upper Spec Level (e.g. 0.0006)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].Usl">
													</md-input-container>
												</div>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="33" flex="100">
														<label>Unit of Measure (e.g. mm, cm, etc.)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].UnitOfMeasure">
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="DataDescription,MeasurementMethod,SampleSize,MeasurementFrequency">
												<p class="lead">What is the description of the data and how is the data measured?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Data Description (e.g. Variables, Attributes(late/not late), etc.)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].DataDescription">
													</md-input-container>
												</div>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Measurement Method (e.g. Optical Comparitor, Late = 1 defect, etc.)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].MeasurementMethod">
													</md-input-container>
												</div>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Sample Size (e.g. 10 Parts/Lot, 10 units, etc.)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].SampleSize">
													</md-input-container>
												</div>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Measurement Frequency (e.g. Weekly, Bi-Weekly, etc.)</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].MeasurementFrequency">
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="WhoMeasures,WhereRecorded">
												<p class="lead">Who will be in charge of measuring the process, and where will the data be recorded?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="50" flex="100">
														<label>Who Records</label>
														<md-select user-select ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].WhoMeasures" aria-label="select">
															<md-option ng-repeat="c in allContacts" value="{{c.id}}"><img class="user-select-img" ng-src="{{c.image}}" ng-show="c.image != ''"/> {{c.name + ((c.email) ? ' (' + c.email + ')' : '')}} </md-option>
														</md-select>
													</md-input-container>
													<md-input-container flex-gt-sm="50" flex="100">
														<label>Where Recorded</label>
														<input type="text" ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].WhereRecorded">
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="CorrectiveAction">
												<p class="lead">What will be the corrective action? (e.g. Conduct A 5-WHY, Replace Machine, etc.)</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Corrective Action Plan</label>
														<textarea ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].CorrectiveAction"></textarea>
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="ApplicableSop">
												<p class="lead">Finally, what are the standard operating procedures? (e.g. PM-500, PC-001, etc.)</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Standard Operating Procedures</label>
														<textarea ng-blur="validateField($event, controlPlanData[controlPlanData.length - 1])" ng-model="controlPlanData[controlPlanData.length - 1].ApplicableSop"></textarea>
													</md-input-container>
												</div>
												<div class="divider"></div>
											</div>
							        <div class="l6_step_submit" ng-if="walkthroughShouldShowSubmit()">
							          <md-button class="md-raised btn-w-md md-primary" ng-click="hideWalkthrough('control_plan')">Submit</md-button>
							        </div>
							        <div class="l6_step_next" ng-if="walkthroughShouldShowNext()">
							          <md-button class="btn-next-step md-raised md-accent btn-w-md" ng-click="goToNextStep()">Next Step <i class="fa fa-fw fa-angle-right"></i></md-button>
							        </div>
										</div>
									</div>
									<div class="row" ng-show="!walkthroughs.control_plan">
										<div class="col-sm-12">
											<div class="row">
												<div class="col-sm-12">
													<div class="table-responsive">
														<table class="table table-striped table-bordered no-margin" id="control-plan-table">
															<thead>
																<tr>
																	<th rowspan="2"></th>
																	<th rowspan="2">Process Steps</th>
																	<th rowspan="2">CTQ</th>
																	<th rowspan="2">Specification Characteristics</th>
																	<th rowspan="1" colspan="2">Specifications</th>
																	<th rowspan="2">Unit of Measure</th>
																	<th rowspan="2">Data Description</th>
																	<th rowspan="2">Measurement Method</th>
																	<th rowspan="2">Sample Size</th>
																	<th rowspan="2">Frequency of Measurement</th>
																	<th rowspan="2">Who Measures</th>
																	<th rowspan="2">Where Recorded</th>
																	<th rowspan="2">Corrective Action</th>
																	<th rowspan="2">Applicable SOP</th>
																</tr>
																<tr>
																	<th>LSL</th>
																	<th>USL</th>
																</tr>
															</thead>
															<tbody>
																<tr ng-repeat="s in controlPlanData" ng-show="!s.isDeleted">
																	<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(controlPlanData,$index)"><span class="zmdi zmdi-close"></span></md-button></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].ProcessSteps" ng-bind-html="controlPlanData[$index].ProcessSteps"></td>
																	<td>
																		<md-input-container class="full-width" style="margin:0;">
																			<md-select ng-model="controlPlanData[$index].Ctq" aria-label="select">
																				<md-option ng-repeat="c in ['KPIV','KPOV']" value="{{c}}"> {{c}} </md-option>
																			</md-select>
																		</md-input-container>
																	</td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].SpecificationCharacteristic" ng-bind-html="controlPlanData[$index].SpecificationCharacteristic"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].Lsl" ng-bind-html="controlPlanData[$index].Lsl"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].Usl" ng-bind-html="controlPlanData[$index].Usl"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].UnitOfMeasure" ng-bind-html="controlPlanData[$index].UnitOfMeasure"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].DataDescription" ng-bind-html="controlPlanData[$index].DataDescription"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].MeasurementMethod" ng-bind-html="controlPlanData[$index].MeasurementMethod"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].SampleSize" ng-bind-html="controlPlanData[$index].SampleSize"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].MeasurementFrequency" ng-bind-html="controlPlanData[$index].MeasurementFrequency"></td>
																	<td>
																		<md-input-container class="full-width" style="margin:0;">
																			<md-select user-select ng-model="controlPlanData[$index].WhoMeasures" aria-label="select">
																				<md-option ng-repeat="c in allContacts" value="{{c.id}}"><img class="user-select-img" ng-src="{{c.image}}" ng-show="c.image != ''"/> {{c.name + ((c.email) ? ' (' + c.email + ')' : '')}} </md-option>
																			</md-select>
																		</md-input-container>
																	</td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].WhereRecorded" ng-bind-html="controlPlanData[$index].WhereRecorded"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].CorrectiveAction" ng-bind-html="controlPlanData[$index].CorrectiveAction"></td>
																	<td contentEditable="true" ng-model="controlPlanData[$index].ApplicableSop" ng-bind-html="controlPlanData[$index].ApplicableSop"></td>
																</tr>
																<tr><td colspan="16"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="addRow(controlPlanData,'control_plan')"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
											<div class="row" style="margin-top:10px">
												<div class="col-sm-12">
													<md-button class="md-raised md-primary btn-w-md md-button md-ink-ripple pull-right" ng-transclude="" ng-click="submitControlPlan()"><span class="ng-scope">Save Changes</span><div class="md-ripple-container"></div></md-button>
													<md-button class="md-raised md-accent btn-w-md md-button md-ink-ripple pull-right" style="margin-right:10px;" ng-transclude="" ng-click="completePhaseComponent('Control','Control Plan')"><span class="ng-scope">{{(phaseDetail.Control_Plan.Status != 'working') ? 'Mark Incomplete' : 'Mark Complete'}}</span><div class="md-ripple-container"></div></md-button>
												</div>
											</div>
										</div>
									</div>
								</uib-tab>
								<uib-tab ng-click="activateTab(2)" active="activeTab[2]">
									<uib-tab-heading>
										<span>Test Plan</span>
										<div class="ui-ribbon-container ui-ribbon-success">
											<div class="ui-ribbon-wrapper" ng-show="phaseDetail.Test_Plan.Status != 'working'">
												<div class="ui-ribbon">
													<i class="fa fa-fw fa-check"></i>
												</div>
											</div>
										</div>
									</uib-tab-heading>
									<div class="row subphase-header">
										<div class="col-sm-12">
											<md-menu md-position-mode="target-right target" class="pull-right">
												<md-button aria-label="Open Menu" class="md-icon-button subphase-menu-button" ng-click="generateTestPlanExportData();$mdOpenMenu($event)">
													<md-icon md-menu-origin><span class="fa fa-info-circle"></span></md-icon>
												</md-button>
												<md-menu-content width="2">
													<md-menu-item ng-show="!walkthroughs.test_plan"><md-button ng-click="showWalkthrough('test_plan', productTestPlanData)"> <span md-menu-align-target>Show Walkthrough</span></md-button></md-menu-item>
													<md-menu-item ng-show="walkthroughs.test_plan"><md-button ng-click="hideWalkthrough('test_plan')"> <span md-menu-align-target>Skip Walkthrough</span></md-button></md-menu-item>
													<md-menu-item ng-show="!walkthroughs.test_plan">
														<a download="Test_Plan.xlsx" href="{{exportTestPlanBlobLink}}" md-menu-align-target class="md-button md-ink-ripple">Export Data</a>
													</md-menu-item>
												</md-menu-content>
											</md-menu>
										</div>
									</div>
									<div class="row" ng-show="walkthroughs.test_plan">
										<div class="col-sm-12" data-phase-component="test_plan" style="text-align:center">
											<p style="font-weight:100; font-size:2em; margin-bottom:20px">Let's make a test plan! This one will focus on Product/Process Systems...</p>
											<div class="l6_step" data-step-required="Area">
												<p class="lead">What area or department is the testing for?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="50" flex="100">
														<label>Area</label>
														<input type="text" ng-blur="validateField($event, productTestPlanData[productTestPlanData.length - 1])" ng-model="productTestPlanData[productTestPlanData.length - 1].Area">
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="Description">
												<p class="lead">Describe what the testing will be?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Testing Description</label>
														<textarea ng-blur="validateField($event, productTestPlanData[productTestPlanData.length - 1])" ng-model="productTestPlanData[productTestPlanData.length - 1].Description"></textarea>
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="Details">
												<p class="lead">How will the testing be completed?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Testing Process</label>
														<textarea ng-blur="validateField($event, productTestPlanData[productTestPlanData.length - 1])" ng-model="productTestPlanData[productTestPlanData.length - 1].Details"></textarea>
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="ExpectedBenefits">
												<p class="lead">What are the expected benefits of this testing?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="80" flex="100">
														<label>Expected Benefits</label>
														<textarea ng-blur="validateField($event, productTestPlanData[productTestPlanData.length - 1])" ng-model="productTestPlanData[productTestPlanData.length - 1].ExpectedBenefits"></textarea>
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="ResponsibleParty">
												<p class="lead">Who will be responsible for this testing?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="50" flex="100">
														<label>Responsible Party</label>
														<md-select user-select ng-blur="validateField($event, productTestPlanData[productTestPlanData.length - 1])" ng-model="productTestPlanData[productTestPlanData.length - 1].ResponsibleParty" aria-label="select">
															<md-option ng-repeat="c in allContacts" value="{{c.id}}"><img class="user-select-img" ng-src="{{c.image}}" ng-show="c.image != ''"/> {{c.name + ((c.email) ? ' (' + c.email + ')' : '')}} </md-option>
														</md-select>
													</md-input-container>
												</div>
											</div>
											<div class="l6_step" data-step-required="EstimatedCost,Timing">
												<p class="lead">Lastly, what is the estimated cost of this testing, and how long will it take?</p>
												<div layout layout-align="center" style="text-align:left">
													<md-input-container flex-gt-sm="30" flex="100">
														<label>Cost</label>
														<input type="text" ng-blur="validateField($event, productTestPlanData[productTestPlanData.length - 1])" ng-model="productTestPlanData[productTestPlanData.length - 1].EstimatedCost">
													</md-input-container>
													<md-input-container flex-gt-sm="30" flex="100">
														<label>Time</label>
														<input type="text" ng-blur="validateField($event, productTestPlanData[productTestPlanData.length - 1])" ng-model="productTestPlanData[productTestPlanData.length - 1].Timing">
													</md-input-container>
												</div>
												<div class="divider"></div>
											</div>
							        <div class="l6_step_submit" ng-if="walkthroughShouldShowSubmit()">
							          <md-button class="md-raised btn-w-md md-primary" ng-click="hideWalkthrough('test_plan')">Submit</md-button>
							        </div>
							        <div class="l6_step_next" ng-if="walkthroughShouldShowNext()">
							          <md-button class="btn-next-step md-raised md-accent btn-w-md" ng-click="goToNextStep()">Next Step <i class="fa fa-fw fa-angle-right"></i></md-button>
							        </div>
										</div>
									</div>
									<div class="row" ng-show="!walkthroughs.test_plan">
										<div class="col-sm-12">
											<div class="row">
												<div class="col-sm-12" id="test-plan-tables">
													<h4>Product &amp; Process Systems</h4>
													<div class="table-responsive">
														<table class="table table-striped table-bordered no-margin">
															<thead>
																<tr>
																	<th></th>
																	<th>Area</th>
																	<th>Test Description</th>
																	<th>Test Plan Details</th>
																	<th>Expected Benefits</th>
																	<th>Responsible</th>
																	<th>Estimated Cost</th>
																	<th>Timing</th>
																	<th>Status/Results</th>
																	<th>Comments</th>
																</tr>
															</thead>
															<tbody>
																<tr ng-repeat="d in productTestPlanData" ng-show="!d.isDeleted">
																	<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(productTestPlanData,$index)"><span class="zmdi zmdi-close"></span></md-button></td>
																	<td contentEditable="true" ng-model="d.Area" ng-bind-html="d.Area"></td>
																	<td contentEditable="true" ng-model="d.Description" ng-bind-html="d.Description"></td>
																	<td contentEditable="true" ng-model="d.Details" ng-bind-html="d.Details"></td>
																	<td contentEditable="true" ng-model="d.ExpectedBenefits" ng-bind-html="d.ExpectedBenefits"></td>
																	<td>
																		<md-input-container class="full-width" style="margin:0;">
																			<md-select user-select ng-model="d.ResponsibleParty" aria-label="select">
																				<md-option ng-repeat="c in allContacts" value="{{c.id}}"><img class="user-select-img" ng-src="{{c.image}}" ng-show="c.image != ''"/> {{c.name + ((c.email) ? ' (' + c.email + ')' : '')}} </md-option>
																			</md-select>
																		</md-input-container>
																	</td>
																	<td contentEditable="true" ng-model="d.EstimatedCost" ng-bind-html="d.EstimatedCost"></td>
																	<td contentEditable="true" ng-model="d.Timing" ng-bind-html="d.Timing"></td>
																	<td contentEditable="true" ng-model="d.Status" ng-bind-html="d.Status"></td>
																	<td contentEditable="true" ng-model="d.Comments" ng-bind-html="d.Comments"></td>
																</tr>
																<tr><td colspan="10"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="addRow(productTestPlanData,'test_plan')"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
															</tbody>
														</table>
													</div>
													<h4>Trainer</h4>
													<div class="table-responsive">
														<table class="table table-striped table-bordered no-margin">
															<thead>
																<tr>
																	<th></th>
																	<th>Area</th>
																	<th>Test Description</th>
																	<th>Test Plan Details</th>
																	<th>Expected Benefits</th>
																	<th>Responsible</th>
																	<th>Estimated Cost</th>
																	<th>Timing</th>
																	<th>Status/Results</th>
																	<th>Comments</th>
																</tr>
															</thead>
															<tbody>
																<tr ng-repeat="d in trainerTestPlanData" ng-show="!d.isDeleted">
																	<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(trainerTestPlanData,$index)"><span class="zmdi zmdi-close"></span></md-button></td>
																	<td contentEditable="true" ng-model="d.Area" ng-bind-html="d.Area"></td>
																	<td contentEditable="true" ng-model="d.Description" ng-bind-html="d.Description"></td>
																	<td contentEditable="true" ng-model="d.Details" ng-bind-html="d.Details"></td>
																	<td contentEditable="true" ng-model="d.ExpectedBenefits" ng-bind-html="d.ExpectedBenefits"></td>
																	<td>
																		<md-input-container class="full-width" style="margin:0;">
																			<md-select user-select ng-model="d.ResponsibleParty" aria-label="select">
																				<md-option ng-repeat="c in allContacts" value="{{c.id}}"><img class="user-select-img" ng-src="{{c.image}}" ng-show="c.image != ''"/> {{c.name + ((c.email) ? ' (' + c.email + ')' : '')}} </md-option>
																			</md-select>
																		</md-input-container>
																	</td>
																	<td contentEditable="true" ng-model="d.EstimatedCost" ng-bind-html="d.EstimatedCost"></td>
																	<td contentEditable="true" ng-model="d.Timing" ng-bind-html="d.Timing"></td>
																	<td contentEditable="true" ng-model="d.Status" ng-bind-html="d.Status"></td>
																	<td contentEditable="true" ng-model="d.Comments" ng-bind-html="d.Comments"></td>
																</tr>
																<tr><td colspan="10"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="addRow(trainerTestPlanData,'test_plan')"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
															</tbody>
														</table>
													</div>
													<h4>Employees</h4>
													<div class="table-responsive">
														<table class="table table-striped table-bordered no-margin">
															<thead>
																<tr>
																	<th></th>
																	<th>Area</th>
																	<th>Test Description</th>
																	<th>Test Plan Details</th>
																	<th>Expected Benefits</th>
																	<th>Responsible</th>
																	<th>Estimated Cost</th>
																	<th>Timing</th>
																	<th>Status/Results</th>
																	<th>Comments</th>
																</tr>
															</thead>
															<tbody>
																<tr ng-repeat="d in employeesTestPlanData" ng-show="!d.isDeleted">
																	<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(employeesTestPlanData,$index)"><span class="zmdi zmdi-close"></span></md-button></td>
																	<td contentEditable="true" ng-model="d.Area" ng-bind-html="d.Area"></td>
																	<td contentEditable="true" ng-model="d.Description" ng-bind-html="d.Description"></td>
																	<td contentEditable="true" ng-model="d.Details" ng-bind-html="d.Details"></td>
																	<td contentEditable="true" ng-model="d.ExpectedBenefits" ng-bind-html="d.ExpectedBenefits"></td>
																	<td>
																		<md-input-container class="full-width" style="margin:0;">
																			<md-select user-select ng-model="d.ResponsibleParty" aria-label="select">
																				<md-option ng-repeat="c in allContacts" value="{{c.id}}"><img class="user-select-img" ng-src="{{c.image}}" ng-show="c.image != ''"/> {{c.name + ((c.email) ? ' (' + c.email + ')' : '')}} </md-option>
																			</md-select>
																		</md-input-container>
																	</td>
																	<td contentEditable="true" ng-model="d.EstimatedCost" ng-bind-html="d.EstimatedCost"></td>
																	<td contentEditable="true" ng-model="d.Timing" ng-bind-html="d.Timing"></td>
																	<td contentEditable="true" ng-model="d.Status" ng-bind-html="d.Status"></td>
																	<td contentEditable="true" ng-model="d.Comments" ng-bind-html="d.Comments"></td>
																</tr>
																<tr><td colspan="10"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="addRow(employeesTestPlanData,'test_plan')"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
											<div class="row" style="margin-top:10px">
												<div class="col-sm-12">
													<md-button class="md-raised md-primary btn-w-md md-button md-ink-ripple pull-right" ng-transclude="" ng-click="submitTestPlan()"><span class="ng-scope">Save Changes</span><div class="md-ripple-container"></div></md-button>
													<md-button class="md-raised md-accent btn-w-md md-button md-ink-ripple pull-right" style="margin-right:10px;" ng-transclude="" ng-click="completePhaseComponent('Control','Test Plan')"><span class="ng-scope">{{(phaseDetail.Test_Plan.Status != 'working') ? 'Mark Incomplete' : 'Mark Complete'}}</span><div class="md-ripple-container"></div></md-button>
												</div>
											</div>
										</div>
									</div>
								</uib-tab>
								<uib-tab ng-click="activateTab(3)" active="activeTab[3]" ng-show="false">
									<uib-tab-heading>
										<span>Hypothesis Test</span>
										<div class="ui-ribbon-container ui-ribbon-success">
											<div class="ui-ribbon-wrapper" ng-show="phaseDetail.Hypothesis_Test.Status != 'working'">
												<div class="ui-ribbon">
													<i class="fa fa-fw fa-check"></i>
												</div>
											</div>
										</div>
									</uib-tab-heading>
									<div class="row" ng-if="!histogramData">
										<div class="col-sm-12" style="text-align: center">
											<p style="font-weight:100; font-size:2em; margin-bottom:20px">Let's Do A Hypothesis Test!</p>
											<p class="lead" style="margin-top:45px;">I Just Need Some Data First! Download The Import Template</p>
											<a href="http://www.l6elite.com/import_templates/l6elite_sample_import_hypothesistest.xlsx" class="md-button md-fab md-warn" style="margin-bottom:150px;" aria-label="download template" title="Download Import Template"><span class="zmdi zmdi-download"></span></a><div class="space"></div>
										</div>
									</div>
									<div class="row" style="margin-top:10px">
										<div class="col-sm-12">
											<md-button class="md-raised md-primary btn-w-md md-button md-ink-ripple pull-right" ng-transclude="" type="file" ngf-select="uploadHypothesisTestFile($file, $invalidFiles)" ngf-max-height="1000" ngf-max-size="5MB"><i class="zmdi zmdi-upload"></i><span class="ng-scope"> Upload Data</span><div class="md-ripple-container"></div></md-button>
											<md-button class="md-raised md-accent btn-w-md md-button md-ink-ripple pull-right" style="margin-right:10px;" ng-transclude="" ng-click="completePhaseComponent('Control','Hypothesis Test')"><span class="ng-scope">{{(phaseDetail.Hypothesis_Test.Status != 'working') ? 'Mark Incomplete' : 'Mark Complete'}}</span><div class="md-ripple-container"></div></md-button>
										</div>
									</div>
								</uib-tab>
								<uib-tab ng-click="activateTab(4)" active="activeTab[4]">
									<uib-tab-heading>
										<span>Gate Review</span>
										<div class="ui-ribbon-container ui-ribbon-success">
											<div class="ui-ribbon-wrapper" ng-show="phaseDetail.Gate_Review.Status != 'working'">
												<div class="ui-ribbon">
													<i class="fa fa-fw fa-check"></i>
												</div>
											</div>
										</div>
									</uib-tab-heading>
									<div class="row subphase-header">
										<div class="col-sm-12">
											<md-menu md-position-mode="target-right target" class="pull-right">
												<md-button aria-label="Open Menu" class="md-icon-button subphase-menu-button" ng-click="generateGateReviewExportData();$mdOpenMenu($event)">
													<md-icon md-menu-origin><span class="fa fa-info-circle"></span></md-icon>
												</md-button>
												<md-menu-content width="2">
													<md-menu-item>
														<a download="Gate_Review.xlsx" href="{{exportGateReviewBlobLink}}" md-menu-align-target class="md-button md-ink-ripple">Export Data</a>
													</md-menu-item>
												</md-menu-content>
											</md-menu>
										</div>
									</div>
									<div class="row" id="gate-review-tables">
										<div class="col-sm-12">
											<div layout="row" style="min-height:200px">
												<div layout="column" style="border: 1px solid #777; padding:3px" flex>
													<div class="row">
														<div class="col-sm-12">
															<p style="text-align:center">Project Summary/Objective</p>
															<div class="table-responsive">
																<table class="table table-striped table-bordered no-margin">
																	<tbody>
																		<tr ng-repeat="s in gateReviewData | filter: {Quadrant : 1}" ng-show="!s.isDeleted">
																			<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(gateReviewData,s.arrayId)"><span class="zmdi zmdi-close"></span></md-button></td>
																			<td contentEditable="true" ng-model="gateReviewData[s.arrayId].Detail" ng-bind-html="gateReviewData[s.arrayId].Detail"></td>
																		</tr>
																		<tr><td colspan="2"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="gateReviewAddRow(1)"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
												<div layout="column" style="border: 1px solid #777; padding:3px" flex>
													<div class="row">
														<div class="col-sm-12">
															<p style="text-align:center">Technology/Products</p>
															<div class="table-responsive">
																<table class="table table-striped table-bordered no-margin">
																	<tbody>
																		<tr ng-repeat="s in gateReviewData | filter: {Quadrant : 2}" ng-show="!s.isDeleted">
																			<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(gateReviewData,s.arrayId)"><span class="zmdi zmdi-close"></span></md-button></td>
																			<td contentEditable="true" ng-model="gateReviewData[s.arrayId].Detail" ng-bind-html="gateReviewData[s.arrayId].Detail"></td>
																		</tr>
																		<tr><td colspan="2"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="gateReviewAddRow(2)"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
											<div layout="row" style="min-height:200px">
												<div layout="column" style="border: 1px solid #777; padding:3px" flex>
													<div class="row">
														<div class="col-sm-12">
															<p style="text-align:center">Schedule/Budget</p>
															<div class="table-responsive">
																<table class="table table-striped table-bordered no-margin">
																	<tbody>
																		<tr ng-repeat="s in gateReviewData | filter: {Quadrant : 3}" ng-show="!s.isDeleted">
																			<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(gateReviewData,s.arrayId)"><span class="zmdi zmdi-close"></span></md-button></td>
																			<td contentEditable="true" ng-model="gateReviewData[s.arrayId].Detail" ng-bind-html="gateReviewData[s.arrayId].Detail"></td>
																		</tr>
																		<tr><td colspan="2"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="gateReviewAddRow(3)"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
												<div layout="column" style="border: 1px solid #777; padding:3px" flex>
													<div class="row">
														<div class="col-sm-12">
															<p style="text-align:center">Graphic/OV-1</p>
															<div class="table-responsive">
																<table class="table table-striped table-bordered no-margin">
																	<tbody>
																		<tr ng-repeat="s in gateReviewData | filter: {Quadrant : 4}" ng-show="!s.isDeleted">
																			<td style="text-align:center; width: 45px"><md-button class="md-fab md-warn md-fab-xxs" aria-label="delete" ng-click="deleteRow(gateReviewData,s.arrayId)"><span class="zmdi zmdi-close"></span></md-button></td>
																			<td contentEditable="true" ng-model="gateReviewData[s.arrayId].Detail" ng-bind-html="gateReviewData[s.arrayId].Detail"></td>
																		</tr>
																		<tr><td colspan="2"><div layout="column"><button ui-wave type="button" class="btn btn-warning btn-w-md ui-wave" ng-click="gateReviewAddRow(4)"><span class="ink wave-animate"></span>Add Row</button></div></td></tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-12" style="margin-top:10px">
											<md-button class="md-raised md-primary btn-w-md md-button md-ink-ripple pull-right" ng-transclude="" ng-click="submitGateReview()"><span class="ng-scope">Save Changes</span><div class="md-ripple-container"></div></md-button>
											<md-button class="md-raised md-accent btn-w-md md-button md-ink-ripple pull-right" style="margin-right:10px;" ng-transclude="" ng-click="completePhaseComponent('Control','Gate Review')"><span class="ng-scope">{{(phaseDetail.Gate_Review.Status != 'working') ? 'Mark Incomplete' : 'Mark Complete'}}</span><div class="md-ripple-container"></div></md-button>
										</div>
									</div>
								</uib-tab>
							</uib-tabset>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
</div>
