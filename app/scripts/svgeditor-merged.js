function touchHandler(e){"use strict";var t,i=e.changedTouches,n=i[0],r="";switch(e.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;default:return}t=document.createEvent("MouseEvent"),t.initMouseEvent(r,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.length<2&&(n.target.dispatchEvent(t),e.preventDefault())}!function(e,t){function i(e){return O.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}function n(e){if(!bt[e]){var t=I.body,i=O("<"+e+">").appendTo(t),n=i.css("display");i.remove(),("none"===n||""===n)&&(gt||(gt=I.createElement("iframe"),gt.frameBorder=gt.width=gt.height=0),t.appendChild(gt),mt&&gt.createElement||(mt=(gt.contentWindow||gt.contentDocument).document,mt.write(("CSS1Compat"===I.compatMode?"<!doctype html>":"")+"<html><body>"),mt.close()),i=mt.createElement(e),mt.body.appendChild(i),n=O.css(i,"display"),t.removeChild(gt)),bt[e]=n}return bt[e]}function r(e,t){var i={};return O.each(St.concat.apply([],St.slice(0,t)),function(){i[this]=e}),i}function a(){yt=t}function s(){return setTimeout(a,0),yt=O.now()}function o(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function l(){try{return new e.XMLHttpRequest}catch(t){}}function u(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var n,r,a,s,o,l,u,c,d=e.dataTypes,h={},p=d.length,f=d[0];for(n=1;p>n;n++){if(1===n)for(r in e.converters)"string"==typeof r&&(h[r.toLowerCase()]=e.converters[r]);if(s=f,f=d[n],"*"===f)f=s;else if("*"!==s&&s!==f){if(o=s+" "+f,l=h[o]||h["* "+f],!l){c=t;for(u in h)if(a=u.split(" "),(a[0]===s||"*"===a[0])&&(c=h[a[1]+" "+f])){u=h[u],u===!0?l=c:c===!0&&(l=u);break}}!l&&!c&&O.error("No conversion from "+o.replace(" "," to ")),l!==!0&&(i=l?l(i):c(u(i)))}}return i}function c(e,i,n){var r,a,s,o,l=e.contents,u=e.dataTypes,c=e.responseFields;for(a in c)a in n&&(i[c[a]]=n[a]);for(;"*"===u[0];)u.shift(),r===t&&(r=e.mimeType||i.getResponseHeader("content-type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){u.unshift(a);break}if(u[0]in n)s=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){s=a;break}o||(o=a)}s=s||o}return s?(s!==u[0]&&u.unshift(s),n[s]):void 0}function d(e,t,i,n){if(O.isArray(t))O.each(t,function(t,r){i||ze.test(e)?n(e,r):d(e+"["+("object"==typeof r||O.isArray(r)?t:"")+"]",r,i,n)});else if(i||null==t||"object"!=typeof t)n(e,t);else for(var r in t)d(e+"["+r+"]",t[r],i,n)}function h(e,i){var n,r,a=O.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((a[n]?e:r||(r={}))[n]=i[n]);r&&O.extend(!0,e,r)}function p(e,i,n,r,a,s){a=a||i.dataTypes[0],s=s||{},s[a]=!0;for(var o,l=e[a],u=0,c=l?l.length:0,d=e===st;c>u&&(d||!o);u++)o=l[u](i,n,r),"string"==typeof o&&(!d||s[o]?o=t:(i.dataTypes.unshift(o),o=p(e,i,n,r,o,s)));return(d||!o)&&!s["*"]&&(o=p(e,i,n,r,"*",s)),o}function f(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),O.isFunction(i))for(var n,r,a,s=t.toLowerCase().split(it),o=0,l=s.length;l>o;o++)n=s[o],a=/^\+/.test(n),a&&(n=n.substr(1)||"*"),r=e[n]=e[n]||[],r[a?"unshift":"push"](i)}}function g(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,r="width"===t?De:Fe,a=0,s=r.length;if(n>0){if("border"!==i)for(;s>a;a++)i||(n-=parseFloat(O.css(e,"padding"+r[a]))||0),"margin"===i?n+=parseFloat(O.css(e,i+r[a]))||0:n-=parseFloat(O.css(e,"border"+r[a]+"Width"))||0;return n+"px"}if(n=Ge(e,t,t),(0>n||null==n)&&(n=e.style[t]||0),n=parseFloat(n)||0,i)for(;s>a;a++)n+=parseFloat(O.css(e,"padding"+r[a]))||0,"padding"!==i&&(n+=parseFloat(O.css(e,"border"+r[a]+"Width"))||0),"margin"===i&&(n+=parseFloat(O.css(e,i+r[a]))||0);return n+"px"}function m(e,t){t.src?O.ajax({url:t.src,async:!1,dataType:"script"}):O.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Pe,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function v(e){var t=I.createElement("div");return Ee.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e){var t=(e.nodeName||"").toLowerCase();"input"===t?b(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&O.grep(e.getElementsByTagName("input"),b)}function b(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function _(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function x(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(O.expando))}function S(e,t){if(1===t.nodeType&&O.hasData(e)){var i,n,r,a=O._data(e),s=O._data(t,a),o=a.events;if(o){delete s.handle,s.events={};for(i in o)for(n=0,r=o[i].length;r>n;n++)O.event.add(t,i+(o[i][n].namespace?".":"")+o[i][n].namespace,o[i][n],o[i][n].data)}s.data&&(s.data=O.extend({},s.data))}}function w(e,t){return O.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function C(e){var t=ge.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function k(e,t,i){if(t=t||0,O.isFunction(t))return O.grep(e,function(e,n){var r=!!t.call(e,n,e);return r===i});if(t.nodeType)return O.grep(e,function(e,n){return e===t===i});if("string"==typeof t){var n=O.grep(e,function(e){return 1===e.nodeType});if(de.test(t))return O.filter(t,n,!i);t=O.filter(t,n)}return O.grep(e,function(e,n){return O.inArray(e,t)>=0===i})}function A(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function P(){return!0}function T(){return!1}function E(e,t,i){var n=t+"defer",r=t+"queue",a=t+"mark",s=O._data(e,n);s&&("queue"===i||!O._data(e,r))&&("mark"===i||!O._data(e,a))&&setTimeout(function(){!O._data(e,r)&&!O._data(e,a)&&(O.removeData(e,n,!0),s.fire())},0)}function G(e){for(var t in e)if(("data"!==t||!O.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function N(e,i,n){if(n===t&&1===e.nodeType){var r="data-"+i.replace(D,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:O.isNumeric(n)?parseFloat(n):B.test(n)?O.parseJSON(n):n}catch(a){}O.data(e,i,n)}else n=t}return n}function L(e){var t,i,n=j[e]={};for(e=e.split(/\s+/),t=0,i=e.length;i>t;t++)n[e[t]]=!0;return n}var I=e.document,M=e.navigator,V=e.location,O=function(){function i(){if(!o.isReady){try{I.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}o.ready()}}var n,r,a,s,o=function(e,t){return new o.fn.init(e,t,n)},l=e.jQuery,u=e.$,c=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=/\S/,h=/^\s+/,p=/\s+$/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,b=/(webkit)[ \/]([\w.]+)/,_=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,S=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/gi,C=/^-ms-/,k=function(e,t){return(t+"").toUpperCase()},A=M.userAgent,P=Object.prototype.toString,T=Object.prototype.hasOwnProperty,E=Array.prototype.push,G=Array.prototype.slice,N=String.prototype.trim,L=Array.prototype.indexOf,V={};return o.fn=o.prototype={constructor:o,init:function(e,i,n){var r,a,s,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&I.body)return this.context=I,this[0]=I.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(r="<"!==e.charAt(0)||">"!==e.charAt(e.length-1)||e.length<3?c.exec(e):[null,e,null],r&&(r[1]||!i)){if(r[1])return i=i instanceof o?i[0]:i,l=i?i.ownerDocument||i:I,s=f.exec(e),s?o.isPlainObject(i)?(e=[I.createElement(s[1])],o.fn.attr.call(e,i,!0)):e=[l.createElement(s[1])]:(s=o.buildFragment([r[1]],[l]),e=(s.cacheable?o.clone(s.fragment):s.fragment).childNodes),o.merge(this,e);if(a=I.getElementById(r[2]),a&&a.parentNode){if(a.id!==r[2])return n.find(e);this.length=1,this[0]=a}return this.context=I,this.selector=e,this}return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e)}return o.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),o.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=this.constructor();return o.isArray(e)?E.apply(n,e):o.merge(n,e),n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return o.each(this,e,t)},ready:function(e){return o.bindReady(),a.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(e){return this.pushStack(o.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},o.fn.init.prototype=o.fn,o.extend=o.fn.extend=function(){var e,i,n,r,a,s,l=arguments[0]||{},u=1,c=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},u=2),"object"!=typeof l&&!o.isFunction(l)&&(l={}),c===u&&(l=this,--u);c>u;u++)if(null!=(e=arguments[u]))for(i in e)n=l[i],r=e[i],l!==r&&(d&&r&&(o.isPlainObject(r)||(a=o.isArray(r)))?(a?(a=!1,s=n&&o.isArray(n)?n:[]):s=n&&o.isPlainObject(n)?n:{},l[i]=o.extend(d,s,r)):r!==t&&(l[i]=r));return l},o.extend({noConflict:function(t){return e.$===o&&(e.$=u),t&&e.jQuery===o&&(e.jQuery=l),o},isReady:!1,readyWait:1,holdReady:function(e){e?o.readyWait++:o.ready(!0)},ready:function(e){if(e===!0&&!--o.readyWait||e!==!0&&!o.isReady){if(!I.body)return setTimeout(o.ready,1);if(o.isReady=!0,e!==!0&&--o.readyWait>0)return;a.fireWith(I,[o]),o.fn.trigger&&o(I).trigger("ready").off("ready")}},bindReady:function(){if(!a){if(a=o.Callbacks("once memory"),"complete"===I.readyState)return setTimeout(o.ready,1);if(I.addEventListener)I.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",o.ready,!1);else if(I.attachEvent){I.attachEvent("onreadystatechange",s),e.attachEvent("onload",o.ready);var t=!1;try{t=null==e.frameElement}catch(n){}I.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===o.type(e)},isArray:Array.isArray||function(e){return"array"===o.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):V[P.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==o.type(e)||e.nodeType||o.isWindow(e))return!1;try{if(e.constructor&&!T.call(e,"constructor")&&!T.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||T.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=o.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):g.test(t.replace(m,"@").replace(v,"]").replace(y,""))?new Function("return "+t)():void o.error("Invalid JSON: "+t)):null},parseXML:function(i){var n,r;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(a){n=t}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&o.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&d.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(w,k)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,n){var r,a=0,s=e.length,l=s===t||o.isFunction(e);if(n)if(l){for(r in e)if(i.apply(e[r],n)===!1)break}else for(;s>a&&i.apply(e[a++],n)!==!1;);else if(l){for(r in e)if(i.call(e[r],r,e[r])===!1)break}else for(;s>a&&i.call(e[a],a,e[a++])!==!1;);return e},trim:N?function(e){return null==e?"":N.call(e)}:function(e){return null==e?"":(e+"").replace(h,"").replace(p,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var n=o.type(e);null==e.length||"string"===n||"function"===n||"regexp"===n||o.isWindow(e)?E.call(i,e):o.merge(i,e)}return i},inArray:function(e,t,i){var n;if(t){if(L)return L.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=e.length,r=0;if("number"==typeof i.length)for(var a=i.length;a>r;r++)e[n++]=i[r];else for(;i[r]!==t;)e[n++]=i[r++];return e.length=n,e},grep:function(e,t,i){var n,r=[];i=!!i;for(var a=0,s=e.length;s>a;a++)n=!!t(e[a],a),i!==n&&r.push(e[a]);return r},map:function(e,i,n){var r,a,s=[],l=0,u=e.length,c=e instanceof o||u!==t&&"number"==typeof u&&(u>0&&e[0]&&e[u-1]||0===u||o.isArray(e));if(c)for(;u>l;l++)r=i(e[l],l,n),null!=r&&(s[s.length]=r);else for(a in e)r=i(e[a],a,n),null!=r&&(s[s.length]=r);return s.concat.apply([],s)},guid:1,proxy:function(e,i){if("string"==typeof i){var n=e[i];i=e,e=n}if(!o.isFunction(e))return t;var r=G.call(arguments,2),a=function(){return e.apply(i,r.concat(G.call(arguments)))};return a.guid=e.guid=e.guid||a.guid||o.guid++,a},access:function(e,i,n,r,a,s){var l=e.length;if("object"==typeof i){for(var u in i)o.access(e,u,i[u],r,a,n);return e}if(n!==t){r=!s&&r&&o.isFunction(n);for(var c=0;l>c;c++)a(e[c],i,r?n.call(e[c],c,a(e[c],i)):n,s);return e}return l?a(e[0],i):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=b.exec(e)||_.exec(e)||x.exec(e)||e.indexOf("compatible")<0&&S.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}o.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof o&&!(n instanceof e)&&(n=e(n)),o.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(I);return e},browser:{}}),o.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()}),r=o.uaMatch(A),r.browser&&(o.browser[r.browser]=!0,o.browser.version=r.version),o.browser.webkit&&(o.browser.safari=!0),d.test("Â ")&&(h=/^[\s\xA0]+/,p=/[\s\xA0]+$/),n=o(I),I.addEventListener?s=function(){I.removeEventListener("DOMContentLoaded",s,!1),o.ready()}:I.attachEvent&&(s=function(){"complete"===I.readyState&&(I.detachEvent("onreadystatechange",s),o.ready())}),o}(),j={};O.Callbacks=function(e){e=e?j[e]||L(e):{};var i,n,r,a,s,o=[],l=[],u=function(t){var i,n,r,a;for(i=0,n=t.length;n>i;i++)r=t[i],a=O.type(r),"array"===a?u(r):"function"===a&&(!e.unique||!d.has(r))&&o.push(r)},c=function(t,u){for(u=u||[],i=!e.memory||[t,u],n=!0,s=r||0,r=0,a=o.length;o&&a>s;s++)if(o[s].apply(t,u)===!1&&e.stopOnFalse){i=!0;break}n=!1,o&&(e.once?i===!0?d.disable():o=[]:l&&l.length&&(i=l.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(o){var e=o.length;u(arguments),n?a=o.length:i&&i!==!0&&(r=e,c(i[0],i[1]))}return this},remove:function(){if(o)for(var t=arguments,i=0,r=t.length;r>i;i++)for(var l=0;l<o.length&&(t[i]!==o[l]||(n&&a>=l&&(a--,s>=l&&s--),o.splice(l--,1),!e.unique));l++);return this},has:function(e){if(o)for(var t=0,i=o.length;i>t;t++)if(e===o[t])return!0;return!1},empty:function(){return o=[],this},disable:function(){return o=l=i=t,this},disabled:function(){return!o},lock:function(){return l=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!l},fireWith:function(t,r){return l&&(n?e.once||l.push([t,r]):(!e.once||!i)&&c(t,r)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var R=[].slice;O.extend({Deferred:function(e){var t,i=O.Callbacks("once memory"),n=O.Callbacks("once memory"),r=O.Callbacks("memory"),a="pending",s={resolve:i,reject:n,notify:r},o={done:i.add,fail:n.add,progress:r.add,state:function(){return a},isResolved:i.fired,isRejected:n.fired,then:function(e,t,i){return l.done(e).fail(t).progress(i),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,i){return O.Deferred(function(n){O.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},function(e,t){var i,r=t[0],a=t[1];O.isFunction(r)?l[e](function(){i=r.apply(this,arguments),i&&O.isFunction(i.promise)?i.promise().then(n.resolve,n.reject,n.notify):n[a+"With"](this===l?n:this,[i])}):l[e](n[a])})}).promise()},promise:function(e){if(null==e)e=o;else for(var t in o)e[t]=o[t];return e}},l=o.promise({});for(t in s)l[t]=s[t].fire,l[t+"With"]=s[t].fireWith;return l.done(function(){a="resolved"},n.disable,r.lock).fail(function(){a="rejected"},i.disable,r.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){s[e]=arguments.length>1?R.call(arguments,0):t,l.notifyWith(u,s)}}function i(e){return function(t){n[e]=arguments.length>1?R.call(arguments,0):t,--o||l.resolveWith(l,n)}}var n=R.call(arguments,0),r=0,a=n.length,s=Array(a),o=a,l=1>=a&&e&&O.isFunction(e.promise)?e:O.Deferred(),u=l.promise();if(a>1){for(;a>r;r++)n[r]&&n[r].promise&&O.isFunction(n[r].promise)?n[r].promise().then(i(r),l.reject,t(r)):--o;o||l.resolveWith(l,n)}else l!==e&&l.resolveWith(l,a?[e]:[]);return u}}),O.support=function(){var t,i,n,r,a,s,o,l,u,c,d,h,p=I.createElement("div");I.documentElement;if(p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=p.getElementsByTagName("*"),n=p.getElementsByTagName("a")[0],!i||!i.length||!n)return{};r=I.createElement("select"),a=r.appendChild(I.createElement("option")),s=p.getElementsByTagName("input")[0],t={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===s.value,optSelected:a.selected,getSetAttribute:"t"!==p.className,enctype:!!I.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==I.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!a.disabled;try{delete p.test}catch(f){t.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),s=I.createElement("input"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),p.appendChild(s),l=I.createDocumentFragment(),l.appendChild(p.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,l.removeChild(s),l.appendChild(p),p.innerHTML="",e.getComputedStyle&&(o=I.createElement("div"),o.style.width="0",o.style.marginRight="0",p.style.width="2px",p.appendChild(o),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(o,null)||{marginRight:0}).marginRight,10)||0)),p.attachEvent)for(d in{submit:1,change:1,focusin:1})c="on"+d,h=c in p,h||(p.setAttribute(c,"return;"),h="function"==typeof p[c]),t[d+"Bubbles"]=h;return l.removeChild(p),l=r=a=o=p=s=null,O(function(){var e,i,n,r,a,s,o,l,c,d,f=I.getElementsByTagName("body")[0];!f||(s=1,o="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",c="style='"+o+"border:5px solid #000;padding:0;'",d="<div "+c+"><div></div></div><table "+c+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",e=I.createElement("div"),e.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+s+"px",f.insertBefore(e,f.firstChild),p=I.createElement("div"),e.appendChild(p),p.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",u=p.getElementsByTagName("td"),h=0===u[0].offsetHeight,u[0].style.display="",u[1].style.display="none",t.reliableHiddenOffsets=h&&0===u[0].offsetHeight,p.innerHTML="",p.style.width=p.style.paddingLeft="1px",O.boxModel=t.boxModel=2===p.offsetWidth,"undefined"!=typeof p.style.zoom&&(p.style.display="inline",p.style.zoom=1,t.inlineBlockNeedsLayout=2===p.offsetWidth,p.style.display="",p.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=2!==p.offsetWidth),p.style.cssText=o+l,p.innerHTML=d,i=p.firstChild,n=i.firstChild,r=i.nextSibling.firstChild.firstChild,a={doesNotAddBorder:5!==n.offsetTop,doesAddBorderForTableAndCells:5===r.offsetTop},n.style.position="fixed",n.style.top="20px",a.fixedPosition=20===n.offsetTop||15===n.offsetTop,n.style.position=n.style.top="",i.style.overflow="hidden",i.style.position="relative",a.subtractsBorderForOverflowNotVisible=-5===n.offsetTop,a.doesNotIncludeMarginInBodyOffset=f.offsetTop!==s,f.removeChild(e),p=e=null,O.extend(t,a))}),t}();var B=/^(?:\{.*\}|\[.*\])$/,D=/([A-Z])/g;O.extend({cache:{},uuid:0,expando:"jQuery"+(O.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?O.cache[e[O.expando]]:e[O.expando],!!e&&!G(e)},data:function(e,i,n,r){if(O.acceptData(e)){var a,s,o,l=O.expando,u="string"==typeof i,c=e.nodeType,d=c?O.cache:e,h=c?e[l]:e[l]&&l,p="events"===i;if((!h||!d[h]||!p&&!r&&!d[h].data)&&u&&n===t)return;return h||(c?e[l]=h=++O.uuid:h=l),d[h]||(d[h]={},c||(d[h].toJSON=O.noop)),("object"==typeof i||"function"==typeof i)&&(r?d[h]=O.extend(d[h],i):d[h].data=O.extend(d[h].data,i)),a=s=d[h],r||(s.data||(s.data={}),s=s.data),n!==t&&(s[O.camelCase(i)]=n),p&&!s[i]?a.events:(u?(o=s[i],null==o&&(o=s[O.camelCase(i)])):o=s,o)}},removeData:function(e,t,i){if(O.acceptData(e)){var n,r,a,s=O.expando,o=e.nodeType,l=o?O.cache:e,u=o?e[s]:s;if(!l[u])return;if(t&&(n=i?l[u]:l[u].data)){O.isArray(t)||(t in n?t=[t]:(t=O.camelCase(t),t=t in n?[t]:t.split(" ")));for(r=0,a=t.length;a>r;r++)delete n[t[r]];if(!(i?G:O.isEmptyObject)(n))return}if(!i&&(delete l[u].data,!G(l[u])))return;O.support.deleteExpando||!l.setInterval?delete l[u]:l[u]=null,o&&(O.support.deleteExpando?delete e[s]:e.removeAttribute?e.removeAttribute(s):e[s]=null)}},_data:function(e,t,i){return O.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=O.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),O.fn.extend({data:function(e,i){var n,r,a,s=null;if("undefined"==typeof e){if(this.length&&(s=O.data(this[0]),1===this[0].nodeType&&!O._data(this[0],"parsedAttrs"))){r=this[0].attributes;for(var o=0,l=r.length;l>o;o++)a=r[o].name,0===a.indexOf("data-")&&(a=O.camelCase(a.substring(5)),N(this[0],a,s[a]));O._data(this[0],"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){O.data(this,e)}):(n=e.split("."),n[1]=n[1]?"."+n[1]:"",i===t?(s=this.triggerHandler("getData"+n[1]+"!",[n[0]]),s===t&&this.length&&(s=O.data(this[0],e),s=N(this[0],e,s)),s===t&&n[1]?this.data(n[0]):s):this.each(function(){var t=O(this),r=[n[0],i];t.triggerHandler("setData"+n[1]+"!",r),O.data(this,e,i),t.triggerHandler("changeData"+n[1]+"!",r)}))},removeData:function(e){return this.each(function(){O.removeData(this,e)})}}),O.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",O._data(e,t,(O._data(e,t)||0)+1))},_unmark:function(e,t,i){if(e!==!0&&(i=t,t=e,e=!1),t){i=i||"fx";var n=i+"mark",r=e?0:(O._data(t,n)||1)-1;r?O._data(t,n,r):(O.removeData(t,n,!0),E(t,i,"mark"))}},queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=O._data(e,t),i&&(!n||O.isArray(i)?n=O._data(e,t,O.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=O.queue(e,t),n=i.shift(),r={};"inprogress"===n&&(n=i.shift()),n&&("fx"===t&&i.unshift("inprogress"),O._data(e,t+".run",r),n.call(e,function(){O.dequeue(e,t)},r)),i.length||(O.removeData(e,t+"queue "+t+".run",!0),E(e,t,"queue"))}}),O.fn.extend({queue:function(e,i){return"string"!=typeof e&&(i=e,e="fx"),i===t?O.queue(this[0],e):this.each(function(){var t=O.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&O.dequeue(this,e)})},dequeue:function(e){return this.each(function(){O.dequeue(this,e)})},delay:function(e,t){return e=O.fx?O.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){function n(){--l||a.resolveWith(s,[s])}"string"!=typeof e&&(i=e,e=t),e=e||"fx";for(var r,a=O.Deferred(),s=this,o=s.length,l=1,u=e+"defer",c=e+"queue",d=e+"mark";o--;)(r=O.data(s[o],u,t,!0)||(O.data(s[o],c,t,!0)||O.data(s[o],d,t,!0))&&O.data(s[o],u,O.Callbacks("once memory"),!0))&&(l++,r.add(n));return n(),a.promise()}});var F,H,$,U=/[\n\t\r]/g,z=/\s+/,q=/\r/g,W=/^(?:button|input)$/i,X=/^(?:button|input|object|select|textarea)$/i,Y=/^a(?:rea)?$/i,Q=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,K=O.support.getSetAttribute;O.fn.extend({attr:function(e,t){return O.access(this,e,t,!0,O.attr)},removeAttr:function(e){return this.each(function(){O.removeAttr(this,e)})},prop:function(e,t){return O.access(this,e,t,!0,O.prop)},removeProp:function(e){return e=O.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,r,a,s,o;if(O.isFunction(e))return this.each(function(t){O(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(z),i=0,n=this.length;n>i;i++)if(r=this[i],1===r.nodeType)if(r.className||1!==t.length){for(a=" "+r.className+" ",s=0,o=t.length;o>s;s++)~a.indexOf(" "+t[s]+" ")||(a+=t[s]+" ");r.className=O.trim(a)}else r.className=e;return this},removeClass:function(e){var i,n,r,a,s,o,l;if(O.isFunction(e))return this.each(function(t){O(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(z),n=0,r=this.length;r>n;n++)if(a=this[n],1===a.nodeType&&a.className)if(e){for(s=(" "+a.className+" ").replace(U," "),o=0,l=i.length;l>o;o++)s=s.replace(" "+i[o]+" "," ");a.className=O.trim(s)}else a.className="";return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return O.isFunction(e)?this.each(function(i){O(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var r,a=0,s=O(this),o=t,l=e.split(z);r=l[a++];)o=n?o:!s.hasClass(r),s[o?"addClass":"removeClass"](r);else("undefined"===i||"boolean"===i)&&(this.className&&O._data(this,"__className__",this.className),this.className=this.className||e===!1?"":O._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(U," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,n,r,a=this[0];return arguments.length?(r=O.isFunction(e),this.each(function(n){var a,s=O(this);1===this.nodeType&&(a=r?e.call(this,n,s.val()):e,null==a?a="":"number"==typeof a?a+="":O.isArray(a)&&(a=O.map(a,function(e){return null==e?"":e+""})),i=O.valHooks[this.nodeName.toLowerCase()]||O.valHooks[this.type],i&&"set"in i&&i.set(this,a,"value")!==t||(this.value=a))})):a?(i=O.valHooks[a.nodeName.toLowerCase()]||O.valHooks[a.type],i&&"get"in i&&(n=i.get(a,"value"))!==t?n:(n=a.value,"string"==typeof n?n.replace(q,""):null==n?"":n)):void 0}}),O.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,r,a=e.selectedIndex,s=[],o=e.options,l="select-one"===e.type;if(0>a)return null;for(i=l?a:0,n=l?a+1:o.length;n>i;i++)if(r=o[i],r.selected&&(O.support.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!O.nodeName(r.parentNode,"optgroup"))){if(t=O(r).val(),l)return t;s.push(t)}return l&&!s.length&&o.length?O(o[a]).val():s},set:function(e,t){var i=O.makeArray(t);return O(e).find("option").each(function(){this.selected=O.inArray(O(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,i,n,r){var a,s,o,l=e.nodeType;return e&&3!==l&&8!==l&&2!==l?r&&i in O.attrFn?O(e)[i](n):"undefined"==typeof e.getAttribute?O.prop(e,i,n):(o=1!==l||!O.isXMLDoc(e),o&&(i=i.toLowerCase(),s=O.attrHooks[i]||(Q.test(i)?H:F)),n!==t?null===n?void O.removeAttr(e,i):s&&"set"in s&&o&&(a=s.set(e,n,i))!==t?a:(e.setAttribute(i,""+n),n):s&&"get"in s&&o&&null!==(a=s.get(e,i))?a:(a=e.getAttribute(i),null===a?t:a)):void 0},removeAttr:function(e,t){var i,n,r,a,s=0;if(t&&1===e.nodeType)for(n=t.toLowerCase().split(z),a=n.length;a>s;s++)r=n[s],r&&(i=O.propFix[r]||r,O.attr(e,r,""),e.removeAttribute(K?r:i),Q.test(r)&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(W.test(e.nodeName)&&e.parentNode)O.error("type property can't be changed");else if(!O.support.radioValue&&"radio"===t&&O.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return F&&O.nodeName(e,"button")?F.get(e,t):t in e?e.value:null},set:function(e,t,i){return F&&O.nodeName(e,"button")?F.set(e,t,i):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var r,a,s,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?(s=1!==o||!O.isXMLDoc(e),s&&(i=O.propFix[i]||i,a=O.propHooks[i]),n!==t?a&&"set"in a&&(r=a.set(e,n,i))!==t?r:e[i]=n:a&&"get"in a&&null!==(r=a.get(e,i))?r:e[i]):void 0},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):X.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),O.attrHooks.tabindex=O.propHooks.tabIndex,H={get:function(e,i){var n,r=O.prop(e,i);return r===!0||"boolean"!=typeof r&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?O.removeAttr(e,i):(n=O.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},K||($={name:!0,id:!0},F=O.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&($[i]?""!==n.nodeValue:n.specified)?n.nodeValue:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=I.createAttribute(i),e.setAttributeNode(n)),n.nodeValue=t+""}},O.attrHooks.tabindex.set=F.set,O.each(["width","height"],function(e,t){O.attrHooks[t]=O.extend(O.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),O.attrHooks.contenteditable={get:F.get,set:function(e,t,i){""===t&&(t="false"),F.set(e,t,i)}}),O.support.hrefNormalized||O.each(["href","src","width","height"],function(e,i){O.attrHooks[i]=O.extend(O.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),O.support.style||(O.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),O.support.optSelected||(O.propHooks.selected=O.extend(O.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),O.support.enctype||(O.propFix.enctype="encoding"),O.support.checkOn||O.each(["radio","checkbox"],function(){O.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]=O.extend(O.valHooks[this],{set:function(e,t){return O.isArray(t)?e.checked=O.inArray(O(e).val(),t)>=0:void 0}})});var Z=/^(?:textarea|input|select)$/i,J=/^([^\.]*)?(?:\.(.+))?$/,ee=/\bhover(\.\S+)?\b/,te=/^key/,ie=/^(?:mouse|contextmenu)|click/,ne=/^(?:focusinfocus|focusoutblur)$/,re=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ae=function(e){
var t=re.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},se=function(e,t){var i=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(i.id||{}).value===t[2])&&(!t[3]||t[3].test((i["class"]||{}).value))},oe=function(e){return O.event.special.hover?e:e.replace(ee,"mouseenter$1 mouseleave$1")};O.event={add:function(e,i,n,r,a){var s,o,l,u,c,d,h,p,f,g,m;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(s=O._data(e))){for(n.handler&&(f=n,n=f.handler),n.guid||(n.guid=O.guid++),l=s.events,l||(s.events=l={}),o=s.handle,o||(s.handle=o=function(e){return"undefined"==typeof O||e&&O.event.triggered===e.type?t:O.event.dispatch.apply(o.elem,arguments)},o.elem=e),i=O.trim(oe(i)).split(" "),u=0;u<i.length;u++)c=J.exec(i[u])||[],d=c[1],h=(c[2]||"").split(".").sort(),m=O.event.special[d]||{},d=(a?m.delegateType:m.bindType)||d,m=O.event.special[d]||{},p=O.extend({type:d,origType:c[1],data:r,handler:n,guid:n.guid,selector:a,quick:ae(a),namespace:h.join(".")},f),g=l[d],g||(g=l[d]=[],g.delegateCount=0,m.setup&&m.setup.call(e,r,h,o)!==!1||(e.addEventListener?e.addEventListener(d,o,!1):e.attachEvent&&e.attachEvent("on"+d,o))),m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),a?g.splice(g.delegateCount++,0,p):g.push(p),O.event.global[d]=!0;e=null}},global:{},remove:function(e,t,i,n,r){var a,s,o,l,u,c,d,h,p,f,g,m,v=O.hasData(e)&&O._data(e);if(v&&(h=v.events)){for(t=O.trim(oe(t||"")).split(" "),a=0;a<t.length;a++)if(s=J.exec(t[a])||[],o=l=s[1],u=s[2],o){for(p=O.event.special[o]||{},o=(n?p.delegateType:p.bindType)||o,g=h[o]||[],c=g.length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=0;d<g.length;d++)m=g[d],(r||l===m.origType)&&(!i||i.guid===m.guid)&&(!u||u.test(m.namespace))&&(!n||n===m.selector||"**"===n&&m.selector)&&(g.splice(d--,1),m.selector&&g.delegateCount--,p.remove&&p.remove.call(e,m));0===g.length&&c!==g.length&&((!p.teardown||p.teardown.call(e,u)===!1)&&O.removeEvent(e,o,v.handle),delete h[o])}else for(o in h)O.event.remove(e,o+t[a],i,n,!0);O.isEmptyObject(h)&&(f=v.handle,f&&(f.elem=null),O.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,r,a){if(!r||3!==r.nodeType&&8!==r.nodeType){var s,o,l,u,c,d,h,p,f,g,m=i.type||i,v=[];if(ne.test(m+O.event.triggered))return;if(m.indexOf("!")>=0&&(m=m.slice(0,-1),o=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),(!r||O.event.customEvent[m])&&!O.event.global[m])return;if(i="object"==typeof i?i[O.expando]?i:new O.Event(m,i):new O.Event(m),i.type=m,i.isTrigger=!0,i.exclusive=o,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=m.indexOf(":")<0?"on"+m:"",!r){s=O.cache;for(l in s)s[l].events&&s[l].events[m]&&O.event.trigger(i,n,s[l].handle.elem,!0);return}if(i.result=t,i.target||(i.target=r),n=null!=n?O.makeArray(n):[],n.unshift(i),h=O.event.special[m]||{},h.trigger&&h.trigger.apply(r,n)===!1)return;if(f=[[r,h.bindType||m]],!a&&!h.noBubble&&!O.isWindow(r)){for(g=h.delegateType||m,u=ne.test(g+m)?r:r.parentNode,c=null;u;u=u.parentNode)f.push([u,g]),c=u;c&&c===r.ownerDocument&&f.push([c.defaultView||c.parentWindow||e,g])}for(l=0;l<f.length&&!i.isPropagationStopped();l++)u=f[l][0],i.type=f[l][1],p=(O._data(u,"events")||{})[i.type]&&O._data(u,"handle"),p&&p.apply(u,n),p=d&&u[d],p&&O.acceptData(u)&&p.apply(u,n)===!1&&i.preventDefault();return i.type=m,!a&&!i.isDefaultPrevented()&&(!h._default||h._default.apply(r.ownerDocument,n)===!1)&&("click"!==m||!O.nodeName(r,"a"))&&O.acceptData(r)&&d&&r[m]&&("focus"!==m&&"blur"!==m||0!==i.target.offsetWidth)&&!O.isWindow(r)&&(c=r[d],c&&(r[d]=null),O.event.triggered=m,r[m](),O.event.triggered=t,c&&(r[d]=c)),i.result}},dispatch:function(i){i=O.event.fix(i||e.event);var n,r,a,s,o,l,u,c,d,h,p=(O._data(this,"events")||{})[i.type]||[],f=p.delegateCount,g=[].slice.call(arguments,0),m=!i.exclusive&&!i.namespace,v=[];if(g[0]=i,i.delegateTarget=this,f&&!i.target.disabled&&(!i.button||"click"!==i.type))for(s=O(this),s.context=this.ownerDocument||this,a=i.target;a!=this;a=a.parentNode||this){for(l={},c=[],s[0]=a,n=0;f>n;n++)d=p[n],h=d.selector,l[h]===t&&(l[h]=d.quick?se(a,d.quick):s.is(h)),l[h]&&c.push(d);c.length&&v.push({elem:a,matches:c})}for(p.length>f&&v.push({elem:this,matches:p.slice(f)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(u=v[n],i.currentTarget=u.elem,r=0;r<u.matches.length&&!i.isImmediatePropagationStopped();r++)d=u.matches[r],(m||!i.namespace&&!d.namespace||i.namespace_re&&i.namespace_re.test(d.namespace))&&(i.data=d.data,i.handleObj=d,o=((O.event.special[d.origType]||{}).handle||d.handler).apply(u.elem,g),o!==t&&(i.result=o,o===!1&&(i.preventDefault(),i.stopPropagation())));return i.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,r,a,s=i.button,o=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||I,r=n.documentElement,a=n.body,e.pageX=i.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=i.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?i.toElement:o),!e.which&&s!==t&&(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[O.expando])return e;var i,n,r=e,a=O.event.fixHooks[e.type]||{},s=a.props?this.props.concat(a.props):this.props;for(e=O.Event(r),i=s.length;i;)n=s[--i],e[n]=r[n];return e.target||(e.target=r.srcElement||I),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),a.filter?a.filter(e,r):e},special:{ready:{setup:O.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){O.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var r=O.extend(new O.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?O.event.trigger(r,null,t):O.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},O.event.handle=O.event.dispatch,O.removeEvent=I.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},O.Event=function(e,t){return this instanceof O.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?P:T):this.type=e,t&&O.extend(this,t),this.timeStamp=e&&e.timeStamp||O.now(),this[O.expando]=!0,void 0):new O.Event(e,t)},O.Event.prototype={preventDefault:function(){this.isDefaultPrevented=P;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=P;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=P,this.stopPropagation()},isDefaultPrevented:T,isPropagationStopped:T,isImmediatePropagationStopped:T},O.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){O.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,a=e.handleObj;a.selector;return(!r||r!==n&&!O.contains(n,r))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),O.support.submitBubbles||(O.event.special.submit={setup:function(){return O.nodeName(this,"form")?!1:void O.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=O.nodeName(i,"input")||O.nodeName(i,"button")?i.form:t;n&&!n._submit_attached&&(O.event.add(n,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&O.event.simulate("submit",this.parentNode,e,!0)}),n._submit_attached=!0)})},teardown:function(){return O.nodeName(this,"form")?!1:void O.event.remove(this,"._submit")}}),O.support.changeBubbles||(O.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(O.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),O.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,O.event.simulate("change",this,e,!0))})),!1):void O.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!t._change_attached&&(O.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&O.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return O.event.remove(this,"._change"),Z.test(this.nodeName)}}),O.support.focusinBubbles||O.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){O.event.simulate(t,e.target,O.event.fix(e),!0)};O.event.special[t]={setup:function(){0===i++&&I.addEventListener(e,n,!0)},teardown:function(){0===--i&&I.removeEventListener(e,n,!0)}}}),O.fn.extend({on:function(e,i,n,r,a){var s,o;if("object"==typeof e){"string"!=typeof i&&(n=i,i=t);for(o in e)this.on(o,i,n,e[o],a);return this}if(null==n&&null==r?(r=i,n=i=t):null==r&&("string"==typeof i?(r=n,n=t):(r=n,n=i,i=t)),r===!1)r=T;else if(!r)return this;return 1===a&&(s=r,r=function(e){return O().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=O.guid++)),this.each(function(){O.event.add(this,e,r,n,i)})},one:function(e,t,i,n){return this.on.call(this,e,t,i,n,1)},off:function(e,i,n){if(e&&e.preventDefault&&e.handleObj){var r=e.handleObj;return O(e.delegateTarget).off(r.namespace?r.type+"."+r.namespace:r.type,r.selector,r.handler),this}if("object"==typeof e){for(var a in e)this.off(a,i,e[a]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=T),this.each(function(){O.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return O(this.context).on(e,this.selector,t,i),this},die:function(e,t){return O(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each(function(){O.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?O.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||O.guid++,n=0,r=function(i){var r=(O._data(this,"lastToggle"+e.guid)||0)%n;return O._data(this,"lastToggle"+e.guid,r+1),i.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=i;n<t.length;)t[n++].guid=i;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),O.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){O.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},O.attrFn&&(O.attrFn[t]=!0),te.test(t)&&(O.event.fixHooks[t]=O.event.keyHooks),ie.test(t)&&(O.event.fixHooks[t]=O.event.mouseHooks)}),function(){function e(e,t,i,n,a,s){for(var o=0,l=n.length;l>o;o++){var u=n[o];if(u){var c=!1;for(u=u[e];u;){if(u[r]===i){c=n[u.sizset];break}if(1===u.nodeType)if(s||(u[r]=i,u.sizset=o),"string"!=typeof t){if(u===t){c=!0;break}}else if(h.filter(t,[u]).length>0){c=u;break}u=u[e]}n[o]=c}}}function i(e,t,i,n,a,s){for(var o=0,l=n.length;l>o;o++){var u=n[o];if(u){var c=!1;for(u=u[e];u;){if(u[r]===i){c=n[u.sizset];break}if(1===u.nodeType&&!s&&(u[r]=i,u.sizset=o),u.nodeName.toLowerCase()===t){c=u;break}u=u[e]}n[o]=c}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),a=0,s=Object.prototype.toString,o=!1,l=!0,u=/\\/g,c=/\r\n/g,d=/\W/;[0,0].sort(function(){return l=!1,0});var h=function(e,t,i,r){i=i||[],t=t||I;var a=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var o,l,u,c,d,p,m,v,b=!0,_=h.isXML(t),x=[],w=e;do if(n.exec(""),o=n.exec(w),o&&(w=o[3],x.push(o[1]),o[2])){c=o[3];break}while(o);if(x.length>1&&g.exec(e))if(2===x.length&&f.relative[x[0]])l=S(x[0]+x[1],t,r);else for(l=f.relative[x[0]]?[t]:h(x.shift(),t);x.length;)e=x.shift(),f.relative[e]&&(e+=x.shift()),l=S(e,l,r);else if(!r&&x.length>1&&9===t.nodeType&&!_&&f.match.ID.test(x[0])&&!f.match.ID.test(x[x.length-1])&&(d=h.find(x.shift(),t,_),t=d.expr?h.filter(d.expr,d.set)[0]:d.set[0]),t)for(d=r?{expr:x.pop(),set:y(r)}:h.find(x.pop(),1!==x.length||"~"!==x[0]&&"+"!==x[0]||!t.parentNode?t:t.parentNode,_),l=d.expr?h.filter(d.expr,d.set):d.set,x.length>0?u=y(l):b=!1;x.length;)p=x.pop(),m=p,f.relative[p]?m=x.pop():p="",null==m&&(m=t),f.relative[p](u,m,_);else u=x=[];if(u||(u=l),u||h.error(p||e),"[object Array]"===s.call(u))if(b)if(t&&1===t.nodeType)for(v=0;null!=u[v];v++)u[v]&&(u[v]===!0||1===u[v].nodeType&&h.contains(t,u[v]))&&i.push(l[v]);else for(v=0;null!=u[v];v++)u[v]&&1===u[v].nodeType&&i.push(l[v]);else i.push.apply(i,u);else y(u,i);return c&&(h(c,a,i,r),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(_&&(o=l,e.sort(_),o))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,i){var n,r,a,s,o,l;if(!e)return[];for(r=0,a=f.order.length;a>r;r++)if(o=f.order[r],(s=f.leftMatch[o].exec(e))&&(l=s[1],s.splice(1,1),"\\"!==l.substr(l.length-1)&&(s[1]=(s[1]||"").replace(u,""),n=f.find[o](s,t,i),null!=n))){e=e.replace(f.match[o],"");break}return n||(n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:n,expr:e}},h.filter=function(e,i,n,r){for(var a,s,o,l,u,c,d,p,g,m=e,v=[],y=i,b=i&&i[0]&&h.isXML(i[0]);e&&i.length;){for(o in f.filter)if(null!=(a=f.leftMatch[o].exec(e))&&a[2]){if(c=f.filter[o],d=a[1],s=!1,a.splice(1,1),"\\"===d.substr(d.length-1))continue;if(y===v&&(v=[]),f.preFilter[o])if(a=f.preFilter[o](a,y,n,v,r,b)){if(a===!0)continue}else s=l=!0;if(a)for(p=0;null!=(u=y[p]);p++)u&&(l=c(u,a,p,y),g=r^l,n&&null!=l?g?s=!0:y[p]=!1:g&&(v.push(u),s=!0));if(l!==t){if(n||(y=v),e=e.replace(f.match[o],""),!s)return[];break}}if(e===m){if(null!=s)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,i,n=e.nodeType,r="";if(n){if(1===n||9===n){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(c,"");for(e=e.firstChild;e;e=e.nextSibling)r+=p(e)}else if(3===n||4===n)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(r+=p(i));return r},f=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,n=i&&!d.test(t),r=i&&!n;n&&(t=t.toLowerCase());for(var a,s=0,o=e.length;o>s;s++)if(a=e[s]){for(;(a=a.previousSibling)&&1!==a.nodeType;);e[s]=r||a&&a.nodeName.toLowerCase()===t?a||!1:a===t}r&&h.filter(t,e,!0)},">":function(e,t){var i,n="string"==typeof t,r=0,a=e.length;if(n&&!d.test(t)){for(t=t.toLowerCase();a>r;r++)if(i=e[r]){var s=i.parentNode;e[r]=s.nodeName.toLowerCase()===t?s:!1}}else{for(;a>r;r++)i=e[r],i&&(e[r]=n?i.parentNode:i.parentNode===t);n&&h.filter(t,e,!0)}},"":function(t,n,r){var s,o=a++,l=e;"string"==typeof n&&!d.test(n)&&(n=n.toLowerCase(),s=n,l=i),l("parentNode",n,o,t,s,r)},"~":function(t,n,r){var s,o=a++,l=e;"string"==typeof n&&!d.test(n)&&(n=n.toLowerCase(),s=n,l=i),l("previousSibling",n,o,t,s,r)}},find:{ID:function(e,t,i){if("undefined"!=typeof t.getElementById&&!i){var n=t.getElementById(e[1]);return n&&n.parentNode?[n]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var i=[],n=t.getElementsByName(e[1]),r=0,a=n.length;a>r;r++)n[r].getAttribute("name")===e[1]&&i.push(n[r]);return 0===i.length?null:i}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,i,n,r,a){if(e=" "+e[1].replace(u,"")+" ",a)return e;for(var s,o=0;null!=(s=t[o]);o++)s&&(r^(s.className&&(" "+s.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||n.push(s):i&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(u,"")},TAG:function(e,t){return e[1].replace(u,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=a++,e},ATTR:function(e,t,i,n,r,a){var s=e[1]=e[1].replace(u,"");return!a&&f.attrMap[s]&&(e[1]=f.attrMap[s]),e[4]=(e[4]||e[5]||"").replace(u,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,r,a){if("not"===e[1]){if(!((n.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var s=h.filter(e[3],t,i,!0^a);return i||r.push.apply(r,s),!1}e[3]=h(e[3],null,null,t)}else if(f.match.POS.test(e[0])||f.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!h(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,n){return t===n.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,n){var r=t[1],a=f.filters[r];if(a)return a(e,i,t,n);if("contains"===r)return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if("not"===r){for(var s=t[3],o=0,l=s.length;l>o;o++)if(s[o]===e)return!1;return!0}h.error(r)},CHILD:function(e,t){var i,n,a,s,o,l,u=t[1],c=e;switch(u){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===u)return!0;c=e;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0;case"nth":if(i=t[2],n=t[3],1===i&&0===n)return!0;if(a=t[0],s=e.parentNode,s&&(s[r]!==a||!e.nodeIndex)){for(o=0,c=s.firstChild;c;c=c.nextSibling)1===c.nodeType&&(c.nodeIndex=++o);s[r]=a}return l=e.nodeIndex-n,0===i?0===l:l%i===0&&l/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],n=h.attr?h.attr(e,i):f.attrHandle[i]?f.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),r=n+"",a=t[2],s=t[4];return null==n?"!="===a:!a&&h.attr?null!=n:"="===a?r===s:"*="===a?r.indexOf(s)>=0:"~="===a?(" "+r+" ").indexOf(s)>=0:s?"!="===a?r!==s:"^="===a?0===r.indexOf(s):"$="===a?r.substr(r.length-s.length)===s:"|="===a?r===s||r.substr(0,s.length+1)===s+"-":!1:r&&n!==!1},POS:function(e,t,i,n){var r=t[2],a=f.setFilters[r];return a?a(e,i,t,n):void 0}}},g=f.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var v in f.match)f.match[v]=new RegExp(f.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[v].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(I.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var i=0,n=t||[];if("[object Array]"===s.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var r=e.length;r>i;i++)n.push(e[i]);else for(;e[i];i++)n.push(e[i]);return n}}var _,x;I.documentElement.compareDocumentPosition?_=function(e,t){return e===t?(o=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(_=function(e,t){if(e===t)return o=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,r=[],a=[],s=e.parentNode,l=t.parentNode,u=s;if(s===l)return x(e,t);if(!s)return-1;if(!l)return 1;for(;u;)r.unshift(u),u=u.parentNode;for(u=l;u;)a.unshift(u),u=u.parentNode;i=r.length,n=a.length;for(var c=0;i>c&&n>c;c++)if(r[c]!==a[c])return x(r[c],a[c]);return c===i?x(e,a[c],-1):x(r[c],t,1)},x=function(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}),function(){var e=I.createElement("div"),i="script"+(new Date).getTime(),n=I.documentElement;e.innerHTML="<a name='"+i+"'/>",n.insertBefore(e,n.firstChild),I.getElementById(i)&&(f.find.ID=function(e,i,n){if("undefined"!=typeof i.getElementById&&!n){var r=i.getElementById(e[1]);return r?r.id===e[1]||"undefined"!=typeof r.getAttributeNode&&r.getAttributeNode("id").nodeValue===e[1]?[r]:t:[]}},f.filter.ID=function(e,t){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=I.createElement("div");e.appendChild(I.createComment("")),e.getElementsByTagName("*").length>0&&(f.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var n=[],r=0;i[r];r++)1===i[r].nodeType&&n.push(i[r]);i=n}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(f.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),I.querySelectorAll&&function(){var e=h,t=I.createElement("div"),i="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){h=function(t,n,r,a){if(n=n||I,!a&&!h.isXML(n)){var s=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(s&&(1===n.nodeType||9===n.nodeType)){if(s[1])return y(n.getElementsByTagName(t),r);if(s[2]&&f.find.CLASS&&n.getElementsByClassName)return y(n.getElementsByClassName(s[2]),r)}if(9===n.nodeType){if("body"===t&&n.body)return y([n.body],r);if(s&&s[3]){var o=n.getElementById(s[3]);if(!o||!o.parentNode)return y([],r);if(o.id===s[3])return y([o],r)}try{return y(n.querySelectorAll(t),r)}catch(l){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var u=n,c=n.getAttribute("id"),d=c||i,p=n.parentNode,g=/^\s*[+~]/.test(t);c?d=d.replace(/'/g,"\\$&"):n.setAttribute("id",d),g&&p&&(n=n.parentNode);try{if(!g||p)return y(n.querySelectorAll("[id='"+d+"'] "+t),r)}catch(m){}finally{c||u.removeAttribute("id")}}}return e(t,n,r,a)};for(var n in e)h[n]=e[n];t=null}}(),function(){var e=I.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(I.createElement("div"),"div"),n=!1;try{t.call(I.documentElement,"[test!='']:sizzle")}catch(r){n=!0}h.matchesSelector=function(e,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(e))try{if(n||!f.match.PSEUDO.test(r)&&!/!=/.test(r)){var a=t.call(e,r);if(a||!i||e.document&&11!==e.document.nodeType)return a}}catch(s){}return h(r,null,null,[e]).length>0}}}(),function(){var e=I.createElement("div");if(e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length){if(e.lastChild.className="e",1===e.getElementsByClassName("e").length)return;f.order.splice(1,0,"CLASS"),f.find.CLASS=function(e,t,i){return"undefined"==typeof t.getElementsByClassName||i?void 0:t.getElementsByClassName(e[1])},e=null}}(),I.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:I.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var S=function(e,t,i){for(var n,r=[],a="",s=t.nodeType?[t]:t;n=f.match.PSEUDO.exec(e);)a+=n[0],e=e.replace(f.match.PSEUDO,"");e=f.relative[e]?e+"*":e;for(var o=0,l=s.length;l>o;o++)h(e,s[o],r,i);return h.filter(a,r)};h.attr=O.attr,h.selectors.attrMap={},O.find=h,O.expr=h.selectors,O.expr[":"]=O.expr.filters,O.unique=h.uniqueSort,O.text=h.getText,O.isXMLDoc=h.isXML,O.contains=h.contains}();var le=/Until$/,ue=/^(?:parents|prevUntil|prevAll)/,ce=/,/,de=/^.[^:#\[\.,]*$/,he=Array.prototype.slice,pe=O.expr.match.POS,fe={children:!0,contents:!0,next:!0,prev:!0};O.fn.extend({find:function(e){var t,i,n=this;if("string"!=typeof e)return O(e).filter(function(){for(t=0,i=n.length;i>t;t++)if(O.contains(n[t],this))return!0});var r,a,s,o=this.pushStack("","find",e);for(t=0,i=this.length;i>t;t++)if(r=o.length,O.find(e,this[t],o),t>0)for(a=r;a<o.length;a++)for(s=0;r>s;s++)if(o[s]===o[a]){o.splice(a--,1);break}return o},has:function(e){var t=O(e);return this.filter(function(){for(var e=0,i=t.length;i>e;e++)if(O.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(k(this,e,!1),"not",e)},filter:function(e){return this.pushStack(k(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?pe.test(e)?O(e,this.context).index(this[0])>=0:O.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,n,r=[],a=this[0];if(O.isArray(e)){for(var s=1;a&&a.ownerDocument&&a!==t;){for(i=0;i<e.length;i++)O(a).is(e[i])&&r.push({selector:e[i],elem:a,level:s});a=a.parentNode,s++}return r}var o=pe.test(e)||"string"!=typeof e?O(e,t||this.context):0;for(i=0,n=this.length;n>i;i++)for(a=this[i];a;){if(o?o.index(a)>-1:O.find.matchesSelector(a,e)){r.push(a);break}if(a=a.parentNode,!a||!a.ownerDocument||a===t||11===a.nodeType)break}return r=r.length>1?O.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?O.inArray(this[0],O(e)):O.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?O(e,t):O.makeArray(e&&e.nodeType?[e]:e),n=O.merge(this.get(),i);return this.pushStack(A(i[0])||A(n[0])?n:O.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),O.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O.dir(e,"parentNode")},parentsUntil:function(e,t,i){return O.dir(e,"parentNode",i)},next:function(e){return O.nth(e,2,"nextSibling")},prev:function(e){return O.nth(e,2,"previousSibling")},nextAll:function(e){return O.dir(e,"nextSibling")},prevAll:function(e){return O.dir(e,"previousSibling")},nextUntil:function(e,t,i){return O.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return O.dir(e,"previousSibling",i)},siblings:function(e){return O.sibling(e.parentNode.firstChild,e)},children:function(e){return O.sibling(e.firstChild)},contents:function(e){return O.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:O.makeArray(e.childNodes)}},function(e,t){O.fn[e]=function(i,n){var r=O.map(this,t,i);return le.test(e)||(n=i),n&&"string"==typeof n&&(r=O.filter(n,r)),r=this.length>1&&!fe[e]?O.unique(r):r,(this.length>1||ce.test(n))&&ue.test(e)&&(r=r.reverse()),this.pushStack(r,e,he.call(arguments).join(","))}}),O.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?O.find.matchesSelector(t[0],e)?[t[0]]:[]:O.find.matches(e,t)},dir:function(e,i,n){for(var r=[],a=e[i];a&&9!==a.nodeType&&(n===t||1!==a.nodeType||!O(a).is(n));)1===a.nodeType&&r.push(a),a=a[i];return r},nth:function(e,t,i,n){t=t||1;for(var r=0;e&&(1!==e.nodeType||++r!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var ge="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",me=/ jQuery\d+="(?:\d+|null)"/g,ve=/^\s+/,ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,be=/<([\w:]+)/,_e=/<tbody/i,xe=/<|&#?\w+;/,Se=/<(?:script|style)/i,we=/<(?:script|object|embed|option|style)/i,Ce=new RegExp("<(?:"+ge+")","i"),ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/\/(java|ecma)script/i,Pe=/^\s*<!(?:\[CDATA\[|\-\-)/,Te={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ee=C(I);Te.optgroup=Te.option,Te.tbody=Te.tfoot=Te.colgroup=Te.caption=Te.thead,Te.th=Te.td,O.support.htmlSerialize||(Te._default=[1,"div<div>","</div>"]),O.fn.extend({text:function(e){return O.isFunction(e)?this.each(function(t){var i=O(this);i.text(e.call(this,t,i.text()))}):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||I).createTextNode(e)):O.text(this)},wrapAll:function(e){if(O.isFunction(e))return this.each(function(t){O(this).wrapAll(e.call(this,t))});if(this[0]){var t=O(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return O.isFunction(e)?this.each(function(t){O(this).wrapInner(e.call(this,t))}):this.each(function(){var t=O(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=O.isFunction(e);return this.each(function(i){O(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){O.nodeName(this,"body")||O(this).replaceWith(this.childNodes);
}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=O.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,O.clean(arguments)),e}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||O.filter(e,[i]).length)&&(!t&&1===i.nodeType&&(O.cleanData(i.getElementsByTagName("*")),O.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&O.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return O.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(me,""):null;if("string"!=typeof e||Se.test(e)||!O.support.leadingWhitespace&&ve.test(e)||Te[(be.exec(e)||["",""])[1].toLowerCase()])O.isFunction(e)?this.each(function(t){var i=O(this);i.html(e.call(this,t,i.html()))}):this.empty().append(e);else{e=e.replace(ye,"<$1></$2>");try{for(var i=0,n=this.length;n>i;i++)1===this[i].nodeType&&(O.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=e)}catch(r){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?O.isFunction(e)?this.each(function(t){var i=O(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=O(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;O(this).remove(),t?O(t).before(e):O(i).append(e)})):this.length?this.pushStack(O(O.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){var r,a,s,o,l=e[0],u=[];if(!O.support.checkClone&&3===arguments.length&&"string"==typeof l&&ke.test(l))return this.each(function(){O(this).domManip(e,i,n,!0)});if(O.isFunction(l))return this.each(function(r){var a=O(this);e[0]=l.call(this,r,i?a.html():t),a.domManip(e,i,n)});if(this[0]){if(o=l&&l.parentNode,r=O.support.parentNode&&o&&11===o.nodeType&&o.childNodes.length===this.length?{fragment:o}:O.buildFragment(e,this,u),s=r.fragment,a=1===s.childNodes.length?s=s.firstChild:s.firstChild,a){i=i&&O.nodeName(a,"tr");for(var c=0,d=this.length,h=d-1;d>c;c++)n.call(i?w(this[c],a):this[c],r.cacheable||d>1&&h>c?O.clone(s,!0,!0):s)}u.length&&O.each(u,m)}return this}}),O.buildFragment=function(e,t,i){var n,r,a,s,o=e[0];return t&&t[0]&&(s=t[0].ownerDocument||t[0]),s.createDocumentFragment||(s=I),1===e.length&&"string"==typeof o&&o.length<512&&s===I&&"<"===o.charAt(0)&&!we.test(o)&&(O.support.checkClone||!ke.test(o))&&(O.support.html5Clone||!Ce.test(o))&&(r=!0,a=O.fragments[o],a&&1!==a&&(n=a)),n||(n=s.createDocumentFragment(),O.clean(e,s,n,i)),r&&(O.fragments[o]=a?n:1),{fragment:n,cacheable:r}},O.fragments={},O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){O.fn[e]=function(i){var n=[],r=O(i),a=1===this.length&&this[0].parentNode;if(a&&11===a.nodeType&&1===a.childNodes.length&&1===r.length)return r[t](this[0]),this;for(var s=0,o=r.length;o>s;s++){var l=(s>0?this.clone(!0):this).get();O(r[s])[t](l),n=n.concat(l)}return this.pushStack(n,e,r.selector)}}),O.extend({clone:function(e,t,i){var n,r,a,s=O.support.html5Clone||!Ce.test("<"+e.nodeName)?e.cloneNode(!0):v(e);if(!(O.support.noCloneEvent&&O.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||O.isXMLDoc(e)))for(x(e,s),n=_(e),r=_(s),a=0;n[a];++a)r[a]&&x(n[a],r[a]);if(t&&(S(e,s),i))for(n=_(e),r=_(s),a=0;n[a];++a)S(n[a],r[a]);return n=r=null,s},clean:function(e,t,i,n){var r;t=t||I,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||I);for(var a,s,o=[],l=0;null!=(s=e[l]);l++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(xe.test(s)){s=s.replace(ye,"<$1></$2>");var u=(be.exec(s)||["",""])[1].toLowerCase(),c=Te[u]||Te._default,d=c[0],h=t.createElement("div");for(t===I?Ee.appendChild(h):C(t).appendChild(h),h.innerHTML=c[1]+s+c[2];d--;)h=h.lastChild;if(!O.support.tbody){var p=_e.test(s),f="table"!==u||p?"<table>"!==c[1]||p?[]:h.childNodes:h.firstChild&&h.firstChild.childNodes;for(a=f.length-1;a>=0;--a)O.nodeName(f[a],"tbody")&&!f[a].childNodes.length&&f[a].parentNode.removeChild(f[a])}!O.support.leadingWhitespace&&ve.test(s)&&h.insertBefore(t.createTextNode(ve.exec(s)[0]),h.firstChild),s=h.childNodes}else s=t.createTextNode(s);var g;if(!O.support.appendChecked)if(s[0]&&"number"==typeof(g=s.length))for(a=0;g>a;a++)y(s[a]);else y(s);s.nodeType?o.push(s):o=O.merge(o,s)}if(i)for(r=function(e){return!e.type||Ae.test(e.type)},l=0;o[l];l++)if(!n||!O.nodeName(o[l],"script")||o[l].type&&"text/javascript"!==o[l].type.toLowerCase()){if(1===o[l].nodeType){var m=O.grep(o[l].getElementsByTagName("script"),r);o.splice.apply(o,[l+1,0].concat(m))}i.appendChild(o[l])}else n.push(o[l].parentNode?o[l].parentNode.removeChild(o[l]):o[l]);return o},cleanData:function(e){for(var t,i,n,r=O.cache,a=O.event.special,s=O.support.deleteExpando,o=0;null!=(n=e[o]);o++)if((!n.nodeName||!O.noData[n.nodeName.toLowerCase()])&&(i=n[O.expando])){if(t=r[i],t&&t.events){for(var l in t.events)a[l]?O.event.remove(n,l):O.removeEvent(n,l,t.handle);t.handle&&(t.handle.elem=null)}s?delete n[O.expando]:n.removeAttribute&&n.removeAttribute(O.expando),delete r[i]}}});var Ge,Ne,Le,Ie=/alpha\([^)]*\)/i,Me=/opacity=([^)]*)/,Ve=/([A-Z]|^ms)/g,Oe=/^-?\d+(?:px)?$/i,je=/^-?\d/,Re=/^([\-+])=([\-+.\de]+)/,Be={position:"absolute",visibility:"hidden",display:"block"},De=["Left","Right"],Fe=["Top","Bottom"];O.fn.css=function(e,i){return 2===arguments.length&&i===t?this:O.access(this,e,i,!0,function(e,i,n){return n!==t?O.style(e,i,n):O.css(e,i)})},O.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ge(e,"opacity","opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":O.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,o=O.camelCase(i),l=e.style,u=O.cssHooks[o];if(i=O.cssProps[o]||o,n===t)return u&&"get"in u&&(a=u.get(e,!1,r))!==t?a:l[i];if(s=typeof n,"string"===s&&(a=Re.exec(n))&&(n=+(a[1]+1)*+a[2]+parseFloat(O.css(e,i)),s="number"),null==n||"number"===s&&isNaN(n))return;if("number"===s&&!O.cssNumber[o]&&(n+="px"),!(u&&"set"in u&&(n=u.set(e,n))===t))try{l[i]=n}catch(c){}}},css:function(e,i,n){var r,a;return i=O.camelCase(i),a=O.cssHooks[i],i=O.cssProps[i]||i,"cssFloat"===i&&(i="float"),a&&"get"in a&&(r=a.get(e,!0,n))!==t?r:Ge?Ge(e,i):void 0},swap:function(e,t,i){var n={};for(var r in t)n[r]=e.style[r],e.style[r]=t[r];i.call(e);for(r in t)e.style[r]=n[r]}}),O.curCSS=O.css,O.each(["height","width"],function(e,t){O.cssHooks[t]={get:function(e,i,n){var r;return i?0!==e.offsetWidth?g(e,t,n):(O.swap(e,Be,function(){r=g(e,t,n)}),r):void 0},set:function(e,t){return Oe.test(t)?(t=parseFloat(t),t>=0?t+"px":void 0):t}}}),O.support.opacity||(O.cssHooks.opacity={get:function(e,t){return Me.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=O.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===O.trim(a.replace(Ie,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=Ie.test(a)?a.replace(Ie,r):a+" "+r)}}),O(function(){O.support.reliableMarginRight||(O.cssHooks.marginRight={get:function(e,t){var i;return O.swap(e,{display:"inline-block"},function(){i=t?Ge(e,"margin-right","marginRight"):e.style.marginRight}),i}})}),I.defaultView&&I.defaultView.getComputedStyle&&(Ne=function(e,t){var i,n,r;return t=t.replace(Ve,"-$1").toLowerCase(),(n=e.ownerDocument.defaultView)&&(r=n.getComputedStyle(e,null))&&(i=r.getPropertyValue(t),""===i&&!O.contains(e.ownerDocument.documentElement,e)&&(i=O.style(e,t))),i}),I.documentElement.currentStyle&&(Le=function(e,t){var i,n,r,a=e.currentStyle&&e.currentStyle[t],s=e.style;return null===a&&s&&(r=s[t])&&(a=r),!Oe.test(a)&&je.test(a)&&(i=s.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a||0,a=s.pixelLeft+"px",s.left=i,n&&(e.runtimeStyle.left=n)),""===a?"auto":a}),Ge=Ne||Le,O.expr&&O.expr.filters&&(O.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!O.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||O.css(e,"display"))},O.expr.filters.visible=function(e){return!O.expr.filters.hidden(e)});var He,$e,Ue=/%20/g,ze=/\[\]$/,qe=/\r?\n/g,We=/#.*$/,Xe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ye=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Qe=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ke=/^(?:GET|HEAD)$/,Ze=/^\/\//,Je=/\?/,et=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,tt=/^(?:select|textarea)/i,it=/\s+/,nt=/([?&])_=[^&]*/,rt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,at=O.fn.load,st={},ot={},lt=["*/"]+["*"];try{He=V.href}catch(ut){He=I.createElement("a"),He.href="",He=He.href}$e=rt.exec(He.toLowerCase())||[],O.fn.extend({load:function(e,i,n){if("string"!=typeof e&&at)return at.apply(this,arguments);if(!this.length)return this;var r=e.indexOf(" ");if(r>=0){var a=e.slice(r,e.length);e=e.slice(0,r)}var s="GET";i&&(O.isFunction(i)?(n=i,i=t):"object"==typeof i&&(i=O.param(i,O.ajaxSettings.traditional),s="POST"));var o=this;return O.ajax({url:e,type:s,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done(function(e){i=e}),o.html(a?O("<div>").append(i.replace(et,"")).find(a):i)),n&&o.each(n,[i,t,e])}}),this},serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?O.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||tt.test(this.nodeName)||Ye.test(this.type))}).map(function(e,t){var i=O(this).val();return null==i?null:O.isArray(i)?O.map(i,function(e,i){return{name:t.name,value:e.replace(qe,"\r\n")}}):{name:t.name,value:i.replace(qe,"\r\n")}}).get()}}),O.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){O.fn[t]=function(e){return this.on(t,e)}}),O.each(["get","post"],function(e,i){O[i]=function(e,n,r,a){return O.isFunction(n)&&(a=a||r,r=n,n=t),O.ajax({type:i,url:e,data:n,success:r,dataType:a})}}),O.extend({getScript:function(e,i){return O.get(e,t,i,"script")},getJSON:function(e,t,i){return O.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?h(e,O.ajaxSettings):(t=e,e=O.ajaxSettings),h(e,t),e},ajaxSettings:{url:He,isLocal:Qe.test($e[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":lt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":O.parseJSON,"text xml":O.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:f(st),ajaxTransport:f(ot),ajax:function(e,i){function n(e,i,n,s){if(2!==w){w=2,l&&clearTimeout(l),o=t,a=s||"",C.readyState=e>0?4:0;var d,p,f,x,S,k=i,A=n?c(g,C,n):t;if(e>=200&&300>e||304===e)if(g.ifModified&&((x=C.getResponseHeader("Last-Modified"))&&(O.lastModified[r]=x),(S=C.getResponseHeader("Etag"))&&(O.etag[r]=S)),304===e)k="notmodified",d=!0;else try{p=u(g,A),k="success",d=!0}catch(P){k="parsererror",f=P}else f=k,(!k||e)&&(k="error",0>e&&(e=0));C.status=e,C.statusText=""+(i||k),d?y.resolveWith(m,[p,k,C]):y.rejectWith(m,[C,k,f]),C.statusCode(_),_=t,h&&v.trigger("ajax"+(d?"Success":"Error"),[C,g,d?p:f]),b.fireWith(m,[C,k]),h&&(v.trigger("ajaxComplete",[C,g]),--O.active||O.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var r,a,s,o,l,d,h,f,g=O.ajaxSetup({},i),m=g.context||g,v=m!==g&&(m.nodeType||m instanceof O)?O(m):O.event,y=O.Deferred(),b=O.Callbacks("once memory"),_=g.statusCode||{},x={},S={},w=0,C={readyState:0,setRequestHeader:function(e,t){if(!w){var i=e.toLowerCase();e=S[i]=S[i]||e,x[e]=t}return this},getAllResponseHeaders:function(){return 2===w?a:null},getResponseHeader:function(e){var i;if(2===w){if(!s)for(s={};i=Xe.exec(a);)s[i[1].toLowerCase()]=i[2];i=s[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return w||(g.mimeType=e),this},abort:function(e){return e=e||"abort",o&&o.abort(e),n(0,e),this}};if(y.promise(C),C.success=C.done,C.error=C.fail,C.complete=b.add,C.statusCode=function(e){if(e){var t;if(2>w)for(t in e)_[t]=[_[t],e[t]];else t=e[C.status],C.then(t,t)}return this},g.url=((e||g.url)+"").replace(We,"").replace(Ze,$e[1]+"//"),g.dataTypes=O.trim(g.dataType||"*").toLowerCase().split(it),null==g.crossDomain&&(d=rt.exec(g.url.toLowerCase()),g.crossDomain=!(!d||d[1]==$e[1]&&d[2]==$e[2]&&(d[3]||("http:"===d[1]?80:443))==($e[3]||("http:"===$e[1]?80:443)))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=O.param(g.data,g.traditional)),p(st,g,i,C),2===w)return!1;if(h=g.global,g.type=g.type.toUpperCase(),g.hasContent=!Ke.test(g.type),h&&0===O.active++&&O.event.trigger("ajaxStart"),!g.hasContent&&(g.data&&(g.url+=(Je.test(g.url)?"&":"?")+g.data,delete g.data),r=g.url,g.cache===!1)){var k=O.now(),A=g.url.replace(nt,"$1_="+k);g.url=A+(A===g.url?(Je.test(g.url)?"&":"?")+"_="+k:"")}(g.data&&g.hasContent&&g.contentType!==!1||i.contentType)&&C.setRequestHeader("Content-Type",g.contentType),g.ifModified&&(r=r||g.url,O.lastModified[r]&&C.setRequestHeader("If-Modified-Since",O.lastModified[r]),O.etag[r]&&C.setRequestHeader("If-None-Match",O.etag[r])),C.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+lt+"; q=0.01":""):g.accepts["*"]);for(f in g.headers)C.setRequestHeader(f,g.headers[f]);if(g.beforeSend&&(g.beforeSend.call(m,C,g)===!1||2===w))return C.abort(),!1;for(f in{success:1,error:1,complete:1})C[f](g[f]);if(o=p(ot,g,i,C)){C.readyState=1,h&&v.trigger("ajaxSend",[C,g]),g.async&&g.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},g.timeout));try{w=1,o.send(x,n)}catch(P){if(!(2>w))throw P;n(-1,P)}}else n(-1,"No Transport");return C},param:function(e,i){var n=[],r=function(e,t){t=O.isFunction(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=O.ajaxSettings.traditional),O.isArray(e)||e.jquery&&!O.isPlainObject(e))O.each(e,function(){r(this.name,this.value)});else for(var a in e)d(a,e[a],i,r);return n.join("&").replace(Ue,"+")}}),O.extend({active:0,lastModified:{},etag:{}});var ct=O.now(),dt=/(\=)\?(&|$)|\?\?/i;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return O.expando+"_"+ct++}}),O.ajaxPrefilter("json jsonp",function(t,i,n){var r="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(dt.test(t.url)||r&&dt.test(t.data))){var a,s=t.jsonpCallback=O.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o=e[s],l=t.url,u=t.data,c="$1"+s+"$2";return t.jsonp!==!1&&(l=l.replace(dt,c),t.url===l&&(r&&(u=u.replace(dt,c)),t.data===u&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+s))),t.url=l,t.data=u,e[s]=function(e){a=[e]},n.always(function(){e[s]=o,a&&O.isFunction(o)&&e[s](a[0])}),t.converters["script json"]=function(){return a||O.error(s+" was not called"),a[0]},t.dataTypes[0]="json","script"}}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return O.globalEval(e),e}}}),O.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),O.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=I.head||I.getElementsByTagName("head")[0]||I.documentElement;return{send:function(r,a){i=I.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,r||a(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var ht,pt=e.ActiveXObject?function(){for(var e in ht)ht[e](0,1)}:!1,ft=0;O.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&l()||o()}:l,function(e){O.extend(O.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(O.ajaxSettings.xhr()),O.support.ajax&&O.ajaxTransport(function(i){if(!i.crossDomain||O.support.cors){var n;return{send:function(r,a){var s,o,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(o in i.xhrFields)l[o]=i.xhrFields[o];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),!i.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");try{for(o in r)l.setRequestHeader(o,r[o])}catch(u){}l.send(i.hasContent&&i.data||null),n=function(e,r){var o,u,c,d,h;try{if(n&&(r||4===l.readyState))if(n=t,s&&(l.onreadystatechange=O.noop,pt&&delete ht[s]),r)4!==l.readyState&&l.abort();else{o=l.status,c=l.getAllResponseHeaders(),d={},h=l.responseXML,h&&h.documentElement&&(d.xml=h),d.text=l.responseText;try{u=l.statusText}catch(p){u=""}o||!i.isLocal||i.crossDomain?1223===o&&(o=204):o=d.text?200:404}}catch(f){r||a(-1,f)}d&&a(o,u,d,c)},i.async&&4!==l.readyState?(s=++ft,pt&&(ht||(ht={},O(e).unload(pt)),ht[s]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var gt,mt,vt,yt,bt={},_t=/^(?:toggle|show|hide)$/,xt=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,St=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];O.fn.extend({show:function(e,t,i){var a,s;if(e||0===e)return this.animate(r("show",3),e,t,i);for(var o=0,l=this.length;l>o;o++)a=this[o],a.style&&(s=a.style.display,!O._data(a,"olddisplay")&&"none"===s&&(s=a.style.display=""),""===s&&"none"===O.css(a,"display")&&O._data(a,"olddisplay",n(a.nodeName)));for(o=0;l>o;o++)a=this[o],a.style&&(s=a.style.display,(""===s||"none"===s)&&(a.style.display=O._data(a,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(r("hide",3),e,t,i);for(var n,a,s=0,o=this.length;o>s;s++)n=this[s],n.style&&(a=O.css(n,"display"),"none"!==a&&!O._data(n,"olddisplay")&&O._data(n,"olddisplay",a));for(s=0;o>s;s++)this[s].style&&(this[s].style.display="none");return this},_toggle:O.fn.toggle,toggle:function(e,t,i){var n="boolean"==typeof e;return O.isFunction(e)&&O.isFunction(t)?this._toggle.apply(this,arguments):null==e||n?this.each(function(){var t=n?e:O(this).is(":hidden");O(this)[t?"show":"hide"]()}):this.animate(r("toggle",3),e,t,i),this},fadeTo:function(e,t,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,r){function a(){s.queue===!1&&O._mark(this);var t,i,r,a,o,l,u,c,d,h=O.extend({},s),p=1===this.nodeType,f=p&&O(this).is(":hidden");h.animatedProperties={};for(r in e){if(t=O.camelCase(r),r!==t&&(e[t]=e[r],delete e[r]),i=e[t],O.isArray(i)?(h.animatedProperties[t]=i[1],i=e[t]=i[0]):h.animatedProperties[t]=h.specialEasing&&h.specialEasing[t]||h.easing||"swing","hide"===i&&f||"show"===i&&!f)return h.complete.call(this);p&&("height"===t||"width"===t)&&(h.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===O.css(this,"display")&&"none"===O.css(this,"float")&&(O.support.inlineBlockNeedsLayout&&"inline"!==n(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=h.overflow&&(this.style.overflow="hidden");for(r in e)a=new O.fx(this,h,r),i=e[r],_t.test(i)?(d=O._data(this,"toggle"+r)||("toggle"===i?f?"show":"hide":0),d?(O._data(this,"toggle"+r,"show"===d?"hide":"show"),a[d]()):a[i]()):(o=xt.exec(i),l=a.cur(),o?(u=parseFloat(o[2]),c=o[3]||(O.cssNumber[r]?"":"px"),"px"!==c&&(O.style(this,r,(u||1)+c),l=(u||1)/a.cur()*l,O.style(this,r,l+c)),o[1]&&(u=("-="===o[1]?-1:1)*u+l),a.custom(l,u,c)):a.custom(l,i,""));return!0}var s=O.speed(t,i,r);return O.isEmptyObject(e)?this.each(s.complete,[!1]):(e=O.extend({},e),s.queue===!1?this.each(a):this.queue(s.queue,a))},stop:function(e,i,n){return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,i){var r=t[i];O.removeData(e,i,!0),r.stop(n)}var i,r=!1,a=O.timers,s=O._data(this);if(n||O._unmark(!0,this),null==e)for(i in s)s[i]&&s[i].stop&&i.indexOf(".run")===i.length-4&&t(this,s,i);else s[i=e+".run"]&&s[i].stop&&t(this,s,i);for(i=a.length;i--;)a[i].elem===this&&(null==e||a[i].queue===e)&&(n?a[i](!0):a[i].saveState(),r=!0,a.splice(i,1));(!n||!r)&&O.dequeue(this,e)})}}),O.each({slideDown:r("show",1),slideUp:r("hide",1),slideToggle:r("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){O.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),O.extend({speed:function(e,t,i){var n=e&&"object"==typeof e?O.extend({},e):{complete:i||!i&&t||O.isFunction(e)&&e,duration:e,easing:i&&t||t&&!O.isFunction(t)&&t};return n.duration=O.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in O.fx.speeds?O.fx.speeds[n.duration]:O.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(e){O.isFunction(n.old)&&n.old.call(this),n.queue?O.dequeue(this,n.queue):e!==!1&&O._unmark(this)},n},easing:{linear:function(e,t,i,n){return i+n*e},swing:function(e,t,i,n){return(-Math.cos(e*Math.PI)/2+.5)*n+i}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),O.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(O.fx.step[this.prop]||O.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=O.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,i,n){function r(e){return a.step(e)}var a=this,o=O.fx;this.startTime=yt||s(),this.end=i,this.now=this.start=e,this.pos=this.state=0,this.unit=n||this.unit||(O.cssNumber[this.prop]?"":"px"),r.queue=this.options.queue,r.elem=this.elem,r.saveState=function(){a.options.hide&&O._data(a.elem,"fxshow"+a.prop)===t&&O._data(a.elem,"fxshow"+a.prop,a.start)},r()&&O.timers.push(r)&&!vt&&(vt=setInterval(o.tick,o.interval))},show:function(){var e=O._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||O.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),O(this.elem).show()},hide:function(){this.options.orig[this.prop]=O._data(this.elem,"fxshow"+this.prop)||O.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,n,r=yt||s(),a=!0,o=this.elem,l=this.options;if(e||r>=l.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),l.animatedProperties[this.prop]=!0;for(t in l.animatedProperties)l.animatedProperties[t]!==!0&&(a=!1);if(a){if(null!=l.overflow&&!O.support.shrinkWrapBlocks&&O.each(["","X","Y"],function(e,t){o.style["overflow"+t]=l.overflow[e]}),l.hide&&O(o).hide(),l.hide||l.show)for(t in l.animatedProperties)O.style(o,t,l.orig[t]),O.removeData(o,"fxshow"+t,!0),O.removeData(o,"toggle"+t,!0);n=l.complete,n&&(l.complete=!1,n.call(o))}return!1}return l.duration==1/0?this.now=r:(i=r-this.startTime,this.state=i/l.duration,this.pos=O.easing[l.animatedProperties[this.prop]](this.state,i,0,1,l.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},O.extend(O.fx,{tick:function(){for(var e,t=O.timers,i=0;i<t.length;i++)e=t[i],!e()&&t[i]===e&&t.splice(i--,1);t.length||O.fx.stop()},interval:13,stop:function(){clearInterval(vt),vt=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){O.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),O.each(["width","height"],function(e,t){O.fx.step[t]=function(e){O.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),O.expr&&O.expr.filters&&(O.expr.filters.animated=function(e){return O.grep(O.timers,function(t){return e===t.elem}).length});var wt=/^t(?:able|d|h)$/i,Ct=/^(?:body|html)$/i;"getBoundingClientRect"in I.documentElement?O.fn.offset=function(e){var t,n=this[0];if(e)return this.each(function(t){O.offset.setOffset(this,e,t)});if(!n||!n.ownerDocument)return null;if(n===n.ownerDocument.body)return O.offset.bodyOffset(n);try{t=n.getBoundingClientRect()}catch(r){}var a=n.ownerDocument,s=a.documentElement;if(!t||!O.contains(s,n))return t?{top:t.top,left:t.left}:{top:0,left:0};var o=a.body,l=i(a),u=s.clientTop||o.clientTop||0,c=s.clientLeft||o.clientLeft||0,d=l.pageYOffset||O.support.boxModel&&s.scrollTop||o.scrollTop,h=l.pageXOffset||O.support.boxModel&&s.scrollLeft||o.scrollLeft,p=t.top+d-u,f=t.left+h-c;return{top:p,left:f}}:O.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){O.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return O.offset.bodyOffset(t);for(var i,n=t.offsetParent,r=t,a=t.ownerDocument,s=a.documentElement,o=a.body,l=a.defaultView,u=l?l.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,d=t.offsetLeft;(t=t.parentNode)&&t!==o&&t!==s&&(!O.support.fixedPosition||"fixed"!==u.position);)i=l?l.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,d-=t.scrollLeft,t===n&&(c+=t.offsetTop,d+=t.offsetLeft,O.support.doesNotAddBorder&&(!O.support.doesAddBorderForTableAndCells||!wt.test(t.nodeName))&&(c+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),r=n,n=t.offsetParent),O.support.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(c+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),u=i;return("relative"===u.position||"static"===u.position)&&(c+=o.offsetTop,d+=o.offsetLeft),O.support.fixedPosition&&"fixed"===u.position&&(c+=Math.max(s.scrollTop,o.scrollTop),d+=Math.max(s.scrollLeft,o.scrollLeft)),{top:c,left:d}},O.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return O.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(O.css(e,"marginTop"))||0,i+=parseFloat(O.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=O.css(e,"position");"static"===n&&(e.style.position="relative");var r,a,s=O(e),o=s.offset(),l=O.css(e,"top"),u=O.css(e,"left"),c=("absolute"===n||"fixed"===n)&&O.inArray("auto",[l,u])>-1,d={},h={};c?(h=s.position(),r=h.top,a=h.left):(r=parseFloat(l)||0,a=parseFloat(u)||0),O.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(d.top=t.top-o.top+r),null!=t.left&&(d.left=t.left-o.left+a),"using"in t?t.using.call(e,d):s.css(d)}},O.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),n=Ct.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(O.css(e,"marginTop"))||0,i.left-=parseFloat(O.css(e,"marginLeft"))||0,n.top+=parseFloat(O.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(O.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||I.body;e&&!Ct.test(e.nodeName)&&"static"===O.css(e,"position");)e=e.offsetParent;return e})}}),O.each(["Left","Top"],function(e,n){var r="scroll"+n;O.fn[r]=function(n){var a,s;return n===t?(a=this[0])?(s=i(a),s?"pageXOffset"in s?s[e?"pageYOffset":"pageXOffset"]:O.support.boxModel&&s.document.documentElement[r]||s.document.body[r]:a[r]):null:this.each(function(){s=i(this),s?s.scrollTo(e?O(s).scrollLeft():n,e?n:O(s).scrollTop()):this[r]=n})}}),O.each(["Height","Width"],function(e,i){var n=i.toLowerCase();O.fn["inner"+i]=function(){var e=this[0];return e?e.style?parseFloat(O.css(e,n,"padding")):this[n]():null},O.fn["outer"+i]=function(e){var t=this[0];return t?t.style?parseFloat(O.css(t,n,e?"margin":"border")):this[n]():null},O.fn[n]=function(e){var r=this[0];if(!r)return null==e?null:this;if(O.isFunction(e))return this.each(function(t){var i=O(this);i[n](e.call(this,t,i[n]()))});if(O.isWindow(r)){var a=r.document.documentElement["client"+i],s=r.document.body;return"CSS1Compat"===r.document.compatMode&&a||s&&s["client"+i]||a}if(9===r.nodeType)return Math.max(r.documentElement["client"+i],r.body["scroll"+i],r.documentElement["scroll"+i],r.body["offset"+i],r.documentElement["offset"+i]);if(e===t){var o=O.css(r,n),l=parseFloat(o);return O.isNumeric(l)?l:o}return this.css(n,"string"==typeof e?e:e+"px")}}),e.jQuery=e.$=O,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return O})}(window),function(e){function t(t){if("string"==typeof t.data){var i=t.handler,n=t.data.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||!/textarea|select/i.test(t.target.nodeName)&&"text"!==t.target.type){var r="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],a=String.fromCharCode(t.which).toLowerCase(),s="",o={};t.altKey&&"alt"!==r&&(s+="alt+"),t.ctrlKey&&"ctrl"!==r&&(s+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==r&&(s+="meta+"),t.shiftKey&&"shift"!==r&&(s+="shift+"),r?o[s+r]=!0:(o[s+a]=!0,o[s+e.hotkeys.shiftNums[a]]=!0,"shift+"===s&&(o[e.hotkeys.shiftNums[a]]=!0));for(var l=0,u=n.length;u>l;l++)if(o[n[l]])return i.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta",219:"[",221:"]"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(jQuery),function(e,t){function i(e){return"string"==typeof e}function n(e){var t=v.call(arguments,1);return function(){return e.apply(this,t.concat(v.call(arguments)))}}function r(e){return e.replace(/^[^#]*#?(.*)$/,"$1")}function a(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function s(n,r,a,s,o){var l,c,h,p,f;return s!==u?(h=a.match(n?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),f=h[3]||"",2===o&&i(s)?c=s.replace(n?G:E,""):(p=d(h[2]),s=i(s)?d[n?C:w](s):s,c=2===o?s:1===o?e.extend({},s,p):e.extend({},p,s),c=b(c),n&&(c=c.replace(m,y))),l=h[1]+(n?"#":c||!h[1]?"?":"")+c+f):l=r(a!==u?a:t[A][P]),l}function o(e,t,n){return t===u||"boolean"==typeof t?(n=t,t=b[e?C:w]()):t=i(t)?t.replace(e?G:E,""):t,d(t,n)}function l(t,n,r,a){return i(r)||"object"==typeof r||(a=r,r=n,n=u),this.each(function(){var i=e(this),s=n||g()[(this.nodeName||"").toLowerCase()]||"",o=s&&i.attr(s)||"";i.attr(s,b[t](o,r,a))})}var u,c,d,h,p,f,g,m,v=Array.prototype.slice,y=decodeURIComponent,b=e.param,_=e.bbq=e.bbq||{},x=e.event.special,S="hashchange",w="querystring",C="fragment",k="elemUrlAttr",A="location",P="href",T="src",E=/^.*\?|#.*$/g,G=/^.*\#/,N={};
b[w]=n(s,0,a),b[C]=c=n(s,1,r),c.noEscape=function(t){t=t||"";var i=e.map(t.split(""),encodeURIComponent);m=new RegExp(i.join("|"),"g")},c.noEscape(",/"),e.deparam=d=function(t,i){var n={},r={"true":!0,"false":!1,"null":null};return e.each(t.replace(/\+/g," ").split("&"),function(t,a){var s,o=a.split("="),l=y(o[0]),c=n,d=0,h=l.split("]["),p=h.length-1;if(/\[/.test(h[0])&&/\]$/.test(h[p])?(h[p]=h[p].replace(/\]$/,""),h=h.shift().split("[").concat(h),p=h.length-1):p=0,2===o.length)if(s=y(o[1]),i&&(s=s&&!isNaN(s)?+s:"undefined"===s?u:r[s]!==u?r[s]:s),p)for(;p>=d;d++)l=""===h[d]?c.length:h[d],c=c[l]=p>d?c[l]||(h[d+1]&&isNaN(h[d+1])?{}:[]):s;else e.isArray(n[l])?n[l].push(s):n[l]!==u?n[l]=[n[l],s]:n[l]=s;else l&&(n[l]=i?u:"")}),n},d[w]=n(o,0),d[C]=h=n(o,1),e[k]||(e[k]=function(t){return e.extend(N,t)})({a:P,base:P,iframe:T,img:T,input:T,form:"action",link:P,script:T}),g=e[k],e.fn[w]=n(l,w),e.fn[C]=n(l,C),_.pushState=p=function(e,n){i(e)&&/^#/.test(e)&&n===u&&(n=2);var r=e!==u,a=c(t[A][P],r?e:{},r?n:2);t[A][P]=a+(/#/.test(a)?"":"#")},_.getState=f=function(e,t){return e===u||"boolean"==typeof e?h(e):h(t)[e]},_.removeState=function(t){var i={};t!==u&&(i=f(),e.each(e.isArray(t)?t:arguments,function(e,t){delete i[t]})),p(i,2)},x[S]=e.extend(x[S],{add:function(t){function i(e){var t=e[C]=c();e.getState=function(e,i){return e===u||"boolean"==typeof e?d(t,e):d(t,i)[e]},n.apply(this,arguments)}var n;return e.isFunction(t)?(n=t,i):(n=t.handler,void(t.handler=i))}})}(jQuery,this),function(e,t,i){function n(e){return e=e||t[s][l],e.replace(/^[^#]*#?(.*)$/,"$1")}var r,a=e.event.special,s="location",o="hashchange",l="href",u=(e.browser,document.documentMode),c=document.documentMode&&(u===i||8>u),d="on"+o in t&&!c;e[o+"Delay"]=100,a[o]=e.extend(a[o],{setup:function(){return d?!1:void e(r.start)},teardown:function(){return d?!1:void e(r.stop)}}),r=function(){function i(){u=d=function(e){return e},c&&(a=e('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,d=function(){return n(a.document[s][l])},(u=function(e,t){if(e!==t){var i=a.document;i.open().close(),i[s].hash="#"+e}})(n()))}var r,a,u,d,h={};return h.start=function(){if(!r){var a=n();u||i(),function c(){var i=n(),h=d(a);i!==a?(u(a=i,h),e(t).trigger(o)):h!==a&&(t[s][l]=t[s][l].replace(/#.*/,"")+"#"+h),r=setTimeout(c,e[o+"Delay"])}()}},h.stop=function(){a||(r&&clearTimeout(r),r=0)},h}()}(jQuery,this),function(e){var t,i={};e.svgIcons=function(n,r){function a(t,i){if("ajax"!==t){if(v)return;c=S[0].contentDocument;var n=c&&c.getElementById("svg_eof");if(!(n||i&&n))return y++,void(50>y?setTimeout(a,20):(o(),v=!0));v=!0}if(u=e(c.firstChild).children(),r.no_img)setTimeout(function(){m||s()},500);else{var l=x+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D";d=e(new Image).attr({src:l,width:0,height:0}).appendTo("body").load(function(){s(!0)}).error(function(){s()})}}function s(n,a){if(!m){r.no_img&&(n=!1);var s,o;if(n&&(o=e(document.createElement("div")),o.hide().appendTo("body")),a){var c=r.fallback_path?r.fallback_path:"";e.each(a,function(t,i){s=e("#"+t);var n=e(new Image).attr({"class":"svg_icon",src:c+i,width:f,height:g,alt:"icon"});A(n,t)})}else for(var v=u.length,y=0;v>y;y++){var b=u[y],w=b.id;if("svg_eof"===w)break;s=e("#"+w);var C=b.getElementsByTagNameNS(h,"svg")[0],P=document.createElementNS(h,"svg");P.setAttributeNS(null,"viewBox",[0,0,f,g].join(" "));var T=C.getAttribute("width"),E=C.getAttribute("height");C.removeAttribute("width"),C.removeAttribute("height");var G=C.getAttribute("viewBox");G||C.setAttribute("viewBox",[0,0,T,E].join(" ")),P.setAttribute("xmlns",h),P.setAttribute("width",f),P.setAttribute("height",g),P.setAttribute("xmlns:xlink",p),P.setAttribute("class","svg_icon"),_||(C=C.cloneNode(!0)),P.appendChild(C);var N;if(n){o.empty().append(P);var L=x+l(unescape(encodeURIComponent((new XMLSerializer).serializeToString(P))));N=e(new Image).attr({"class":"svg_icon",src:L})}else N=t(e(P),y);A(N,w)}r.placement&&e.each(r.placement,function(r,a){i[a]&&e(r).each(function(r){var s=i[a].clone();r>0&&!n&&(s=t(s,r,!0)),k(e(this),s,a)})}),a||(n&&o.remove(),S&&S.remove(),d&&d.remove()),r.resize&&e.resizeSvgIcons(r.resize),m=!0,r.callback&&r.callback(i)}}function o(){if(-1!=n.indexOf(".svgz")){var t=n.replace(".svgz",".svg");window.console&&console.log(".svgz failed, trying with .svg"),e.svgIcons(t,r)}else r.fallback&&s(!1,r.fallback)}function l(e){if(window.btoa)return window.btoa(e);var t,i,n,r,a,s,o,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=new Array(4*Math.floor((e.length+2)/3)),c=0,d=0;do t=e.charCodeAt(c++),i=e.charCodeAt(c++),n=e.charCodeAt(c++),r=t>>2,a=(3&t)<<4|i>>4,s=(15&i)<<2|n>>6,o=63&n,isNaN(i)?s=o=64:isNaN(n)&&(o=64),u[d++]=l.charAt(r),u[d++]=l.charAt(a),u[d++]=l.charAt(s),u[d++]=l.charAt(o);while(c<e.length);return u.join("")}var u,c,d,h="http://www.w3.org/2000/svg",p="http://www.w3.org/1999/xlink",f=r.w?r.w:24,g=r.h?r.h:24,m=!1,v=!1,y=0,b=navigator.userAgent,_=!!window.opera,x=(b.indexOf("Safari/")>-1&&-1==b.indexOf("Chrome/"),"data:image/svg+xml;charset=utf-8;base64,");if(r.svgz){var S=e('<object data="'+n+'" type=image/svg+xml>').appendTo("body").hide();try{c=S[0].contentDocument,S.load(a),a(0,!0)}catch(w){o()}}else{var C=new DOMParser;e.ajax({url:n,dataType:"string",success:function(t){return t?(c=C.parseFromString(t,"text/xml"),void e(function(){a("ajax")})):void e(o)},error:function(t){window.opera?e(function(){o()}):t.responseText?(c=C.parseFromString(t.responseText,"text/xml"),c.childNodes.length||e(o),e(function(){a("ajax")})):e(o)}})}var k=function(e,t,i,n){if(_&&t.css("visibility","hidden"),r.replace){n&&t.attr("id",i);var a=e.attr("class");a&&t.attr("class","svg_icon "+a),e.replaceWith(t)}else e.append(t);_&&setTimeout(function(){t.removeAttr("style")},1)},A=function(e,t){(void 0===r.id_match||r.id_match!==!1)&&k(holder,e,t,!0),i[t]=e};t=function(t,i,n){var r=t.find("defs");if(!r.length)return t;var a;a=_?r.find("*").filter(function(){return!!this.id}):r.find("[id]");var s=t[0].getElementsByTagName("*"),o=s.length;return a.each(function(t){var n=this.id,r=e(c).find("#"+n).length<=1;_&&(r=!1);var a="x"+n+i+t;this.id=a;var l="url(#"+n+")",u="url(#"+a+")";for(t=0;o>t;t++){var d=s[t];d.getAttribute("fill")===l&&d.setAttribute("fill",u),d.getAttribute("stroke")===l&&d.setAttribute("stroke",u),d.getAttribute("filter")===l&&d.setAttribute("filter",u)}}),t}},e.getSvgIcon=function(e,n){var r=i[e];return n&&r&&(r=t(r,0,!0).clone(!0)),r},e.resizeSvgIcons=function(t){var i=!e(".svg_icon:first").length;e.each(t,function(t,n){var r=e.isArray(n),a=r?n[0]:n,s=r?n[1]:n;i&&(t=t.replace(/\.svg_icon/g,"svg")),e(t).each(function(){this.setAttribute("width",a),this.setAttribute("height",s),window.opera&&window.widget&&(this.parentNode.style.width=a+"px",this.parentNode.style.height=s+"px")})})}}(jQuery),function(){function e(e,n,r){if(e=document.createElementNS(t.svg,e),i)for(var a in n)e.setAttribute(a,n[a]);else for(a in n){var s=n[a],o=e[a];o&&"SVGLength"===o.constructor?o.baseVal.value=s:e.setAttribute(a,s)}return r&&r.appendChild(e),e}var t={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};window.console||(window.console=new function(){this.log=function(){},this.dir=function(){}}),$.jGraduate={Paint:function(e){if(e=e||{},this.alpha=isNaN(e.alpha)?100:e.alpha,e.copy)switch(this.type=e.copy.type,this.alpha=e.copy.alpha,this.radialGradient=this.linearGradient=this.solidColor=null,this.type){case"solidColor":this.solidColor=e.copy.solidColor;break;case"linearGradient":this.linearGradient=e.copy.linearGradient.cloneNode(!0);break;case"radialGradient":this.radialGradient=e.copy.radialGradient.cloneNode(!0)}else e.linearGradient?(this.type="linearGradient",this.radialGradient=this.solidColor=null,this.linearGradient=e.linearGradient.cloneNode(!0)):e.radialGradient?(this.type="radialGradient",this.linearGradient=this.solidColor=null,this.radialGradient=e.radialGradient.cloneNode(!0)):e.solidColor?(this.type="solidColor",this.solidColor=e.solidColor):(this.type="none",this.radialGradient=this.linearGradient=this.solidColor=null)}},jQuery.fn.jGraduateDefaults={paint:new $.jGraduate.Paint,window:{pickerTitle:"Drag markers to pick a paint"},images:{clientPath:"images/"},newstop:"inverse"};var i=navigator.userAgent.indexOf("Gecko/")>=0;jQuery.fn.jGraduate=function(i){var n=arguments;return this.each(function(){function r(t,i,n,r,o){var u=o||e("stop",{"stop-color":i,"stop-opacity":n,offset:t},_);o?(i=o.getAttribute("stop-color"),n=o.getAttribute("stop-opacity"),t=o.getAttribute("offset")):_.appendChild(u),null===n&&(n=1),o=e("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",fill:"url(#jGraduate_trans)",transform:"translate("+(10+t*S)+", 26)"},U);var h=e("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",fill:i,"fill-opacity":n,transform:"translate("+(10+t*S)+", 26)",stroke:"#000","stroke-width":1.5},U);return $(h).mousedown(function(e){return a(this),W=z,m.mousemove(l).mouseup(s),X=Y.offset(),e.preventDefault(),!1}).data("stop",u).data("bg",o).dblclick(function(){$("div.jGraduate_LightBox").show();for(var e=this,t=+u.getAttribute("stop-opacity")||1,n=u.getAttribute("stop-color")||1,r=(255*parseFloat(t)).toString(16);r.length<2;)r="0"+r;i=n.substr(1)+r,$("#"+d+"_jGraduate_stopPicker").css({left:100,bottom:15}).jPicker({window:{title:"Pick the start color and opacity for the gradient"},images:{clientPath:c.images.clientPath},color:{active:i,alphaSupport:!0}},function(i){n=i.val("hex")?"#"+i.val("hex"):"none",t=null!==i.val("a")?i.val("a")/256:1,e.setAttribute("fill",n),e.setAttribute("fill-opacity",t),u.setAttribute("stop-color",n),u.setAttribute("stop-opacity",t),$("div.jGraduate_LightBox").hide(),$("#"+d+"_jGraduate_stopPicker").hide()},null,function(){$("div.jGraduate_LightBox").hide(),$("#"+d+"_jGraduate_stopPicker").hide()})}),$(_).find("stop").each(function(){var e=$(this);if(+this.getAttribute("offset")>t){if(!i){var n=this.getAttribute("stop-color"),r=this.getAttribute("stop-opacity");u.setAttribute("stop-color",n),h.setAttribute("fill",n),u.setAttribute("stop-opacity",null===r?1:r),h.setAttribute("fill-opacity",null===r?1:r)}return e.before(u),!1}}),r&&a(h),u}function a(e){z&&z.setAttribute("stroke","#000"),e.setAttribute("stroke","blue"),z=e,z.parentNode.appendChild(z)}function s(){if(m.unbind("mousemove",l),"none"!==Q.getAttribute("display")){Q.setAttribute("display","none");var e=$(z),t=e.data("stop");e=e.data("bg"),$([z,t,e]).remove()}W=null}function o(){var e=J?"rotate("+J+","+ee+","+te+") ":"";1===K&&1===Z?_.removeAttribute("gradientTransform"):_.setAttribute("gradientTransform",e+"translate("+-ee*(K-1)+","+-te*(Z-1)+") scale("+K+","+Z+")")}function l(e){var t=e.pageX-X.left;e=e.pageY-X.top,t=10>t?10:t>S+10?S+10:t;var i="translate("+t+", 26)";-60>e||e>130?(Q.setAttribute("display","block"),Q.setAttribute("transform",i)):Q.setAttribute("display","none"),W.setAttribute("transform",i),$.data(W,"bg").setAttribute("transform",i),$.data(W,"stop").setAttribute("offset",(t-10)/S);var n=0;$(_).find("stop").each(function(){var e=this.getAttribute("offset"),t=$(this);n>e&&(t.prev().before(t),H=$(_).find("stop")),n=e})}var u=$(this),c=$.extend(!0,{},jQuery.fn.jGraduateDefaults,i),d=u.attr("id"),h="#"+u.attr("id")+" ";if(h){var p=function(){switch(u.paint.type){case"radialGradient":u.paint.linearGradient=null;break;case"linearGradient":u.paint.radialGradient=null;break;case"solidColor":u.paint.radialGradient=u.paint.linearGradient=null}$.isFunction(u.okCallback)&&u.okCallback(u.paint),u.hide()},f=function(){$.isFunction(u.cancelCallback)&&u.cancelCallback(),u.hide()};$.extend(!0,u,{paint:new $.jGraduate.Paint({copy:c.paint}),okCallback:$.isFunction(n[1])&&n[1]||null,cancelCallback:$.isFunction(n[2])&&n[2]||null}),u.position();var g=null,m=$(window);"none"==u.paint.type&&(u.paint=$.jGraduate.Paint({solidColor:"ffffff"})),u.addClass("jGraduate_Picker"),u.html('<ul class="jGraduate_tabs"><li class="jGraduate_tab_color jGraduate_tab_current" data-type="col">Solid Color</li><li class="jGraduate_tab_lingrad" data-type="lg">Linear Gradient</li><li class="jGraduate_tab_radgrad" data-type="rg">Radial Gradient</li></ul><div class="jGraduate_colPick"></div><div class="jGraduate_gradPick"></div><div class="jGraduate_LightBox"></div><div id="'+d+'_jGraduate_stopPicker" class="jGraduate_stopPicker"></div>');var v=$(h+"> .jGraduate_colPick"),y=$(h+"> .jGraduate_gradPick");y.html('<div id="'+d+'_jGraduate_Swatch" class="jGraduate_Swatch"><h2 class="jGraduate_Title">'+c.window.pickerTitle+'</h2><div id="'+d+'_jGraduate_GradContainer" class="jGraduate_GradContainer"></div><div id="'+d+'_jGraduate_StopSlider" class="jGraduate_StopSlider"></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_lg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Begin Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+d+'_jGraduate_x1" size="3" title="Enter starting x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+d+'_jGraduate_y1" size="3" title="Enter starting y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">End Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+d+'_jGraduate_x2" size="3" title="Enter ending x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+d+'_jGraduate_y2" size="3" title="Enter ending y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_rg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Center Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+d+'_jGraduate_cx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+d+'_jGraduate_cy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Focal Point</label><div class="jGraduate_Form_Section"><label>Match center: <input type="checkbox" checked="checked" id="'+d+'_jGraduate_match_ctr"/></label><br/><label>x:</label><input type="text" id="'+d+'_jGraduate_fx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+d+'_jGraduate_fy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_StopSection jGraduate_SpreadMethod"><label class="jGraduate_Form_Heading">Spread method</label><div class="jGraduate_Form_Section"><select class="jGraduate_spreadMethod"><option value=pad selected>Pad</option><option value=reflect>Reflect</option><option value=repeat>Repeat</option></select></div></div><div class="jGraduate_Form"><div class="jGraduate_Slider jGraduate_RadiusField jGraduate_rg_field"><label class="prelabel">Radius:</label><div id="'+d+'_jGraduate_Radius" class="jGraduate_SliderBar jGraduate_Radius" title="Click to set radius"><img id="'+d+'_jGraduate_RadiusArrows" class="jGraduate_RadiusArrows" src="'+c.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+d+'_jGraduate_RadiusInput" size="3" value="100"/>%</label></div><div class="jGraduate_Slider jGraduate_EllipField jGraduate_rg_field"><label class="prelabel">Ellip:</label><div id="'+d+'_jGraduate_Ellip" class="jGraduate_SliderBar jGraduate_Ellip" title="Click to set Ellip"><img id="'+d+'_jGraduate_EllipArrows" class="jGraduate_EllipArrows" src="'+c.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+d+'_jGraduate_EllipInput" size="3" value="0"/>%</label></div><div class="jGraduate_Slider jGraduate_AngleField jGraduate_rg_field"><label class="prelabel">Angle:</label><div id="'+d+'_jGraduate_Angle" class="jGraduate_SliderBar jGraduate_Angle" title="Click to set Angle"><img id="'+d+'_jGraduate_AngleArrows" class="jGraduate_AngleArrows" src="'+c.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+d+'_jGraduate_AngleInput" size="3" value="0"/>deg</label></div><div class="jGraduate_Slider jGraduate_OpacField"><label class="prelabel">Opac:</label><div id="'+d+'_jGraduate_Opac" class="jGraduate_SliderBar jGraduate_Opac" title="Click to set Opac"><img id="'+d+'_jGraduate_OpacArrows" class="jGraduate_OpacArrows" src="'+c.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+d+'_jGraduate_OpacInput" size="3" value="100"/>%</label></div></div><div class="jGraduate_OkCancel"><input type="button" id="'+d+'_jGraduate_Ok" class="jGraduate_Ok" value="OK"/><input type="button" id="'+d+'_jGraduate_Cancel" class="jGraduate_Cancel" value="Cancel"/></div>');var b,_,x,S=256,w=S-0,C=S-0,k={};$(".jGraduate_SliderBar").width(145);var A=$("#"+d+"_jGraduate_GradContainer")[0],P=e("svg",{id:d+"_jgraduate_svg",width:S,height:S,xmlns:t.svg},A);b=b||u.paint.type;var T=_=u.paint[b],E=u.paint.alpha,G="solidColor"===b;switch(b){case"solidColor":case"linearGradient":if(G||(_.id=d+"_lg_jgraduate_grad",T=_=P.appendChild(_)),e("radialGradient",{id:d+"_rg_jgraduate_grad"},P),"linearGradient"===b)break;case"radialGradient":G||(_.id=d+"_rg_jgraduate_grad",T=_=P.appendChild(_)),e("linearGradient",{id:d+"_lg_jgraduate_grad"},P)}if(G){T=_=$("#"+d+"_lg_jgraduate_grad")[0],g=u.paint[b],r(0,"#"+g,1);var N=typeof c.newstop;if("string"===N)switch(c.newstop){case"same":r(1,"#"+g,1);break;case"inverse":N="";for(var L=0;6>L;L+=2){g.substr(L,2);var I=(255-parseInt(g.substr(L,2),16)).toString(16);I.length<2&&(I=0+I),N+=I}r(1,"#"+N,1);break;case"white":r(1,"#ffffff",1);break;case"black":r(1,"#000000",1)}else"object"===N&&r(1,c.newstop.color||"#"+g,"opac"in c.newstop?c.newstop.opac:1)}g=parseFloat(T.getAttribute("x1")||0),N=parseFloat(T.getAttribute("y1")||0),L=parseFloat(T.getAttribute("x2")||1),I=parseFloat(T.getAttribute("y2")||0);var M=parseFloat(T.getAttribute("cx")||.5),V=parseFloat(T.getAttribute("cy")||.5),O=parseFloat(T.getAttribute("fx")||M),j=parseFloat(T.getAttribute("fy")||V);x=e("rect",{id:d+"_jgraduate_rect",x:0,y:0,width:w,height:C,fill:"url(#"+d+"_jgraduate_grad)","fill-opacity":E/100},P);var R=$("<div/>").attr({"class":"grad_coord jGraduate_lg_field",title:"Begin Stop"}).text(1).css({top:N*S,left:g*S}).data("coord","start").appendTo(A),B=R.clone().text(2).css({top:I*S,left:L*S}).attr("title","End stop").data("coord","end").appendTo(A),D=$("<div/>").attr({"class":"grad_coord jGraduate_rg_field",title:"Center stop"}).text("C").css({top:V*S,left:M*S}).data("coord","center").appendTo(A),F=D.clone().text("F").css({top:j*S,left:O*S,display:"none"}).attr("title","Focus point").data("coord","focus").appendTo(A);F[0].id=d+"_jGraduate_focusCoord",$(h+" .grad_coord"),$.each(["x1","y1","x2","y2","cx","cy","fx","fy"],function(e,t){var i=_.getAttribute(t),n=isNaN(t[1]);i||(i=n?"0.5":"x2"===t?"1.0":"0.0"),k[t]=$("#"+d+"_jGraduate_"+t).val(i).change(function(){isNaN(parseFloat(this.value))||this.value<0?this.value=0:this.value>1&&(this.value=1),("f"!==t[0]||le)&&(n&&"radialGradient"===b||!n&&"linearGradient"===b)&&_.setAttribute(t,this.value);var e=n?"c"===t[0]?D:F:"1"===t[1]?R:B,i=t.indexOf("x")>=0?"left":"top";e.css(i,this.value*S)}).change()});var H,U,z,q,W,X,Y=$("#"+d+"_jGraduate_StopSlider"),Q=e("path",{d:"m9.75,-6l-19.5,19.5m0,-19.5l19.5,19.5",fill:"none",stroke:"#D00","stroke-width":5,display:"none"},q),K=1,Z=1,J=0,ee=M,te=V;q=e("svg",{width:"100%",height:45},Y[0]),A=e("pattern",{width:16,height:16,patternUnits:"userSpaceOnUse",id:"jGraduate_trans"},q),e("image",{width:16,height:16},A).setAttributeNS(t.xlink,"xlink:href",c.images.clientPath+"map-opacity.png"),$(q).click(function(e){if(X=Y.offset(),"path"!==e.target.tagName){var t=e.pageX-X.left-8;t=10>t?10:t>S+10?S+10:t,r(t/S,0,0,!0),e.stopPropagation()}}),$(q).mouseover(function(){q.appendChild(Q)}),U=e("g",{},q),e("line",{x1:10,y1:15,x2:S+10,y2:15,"stroke-width":2,stroke:"#000"},q);var ie=y.find(".jGraduate_spreadMethod").change(function(){_.setAttribute("spreadMethod",$(this).val())}),ne=null,re=function(e){var t=e.pageX-oe.left,i=e.pageY-oe.top;t=0>t?0:t>S?S:t,i=0>i?0:i>S?S:i,ne.css("left",t).css("top",i),t/=w,i/=C;var n=ne.data("coord"),r=_;switch(n){case"start":k.x1.val(t),k.y1.val(i),r.setAttribute("x1",t),r.setAttribute("y1",i);break;case"end":k.x2.val(t),k.y2.val(i),r.setAttribute("x2",t),r.setAttribute("y2",i);break;case"center":k.cx.val(t),k.cy.val(i),r.setAttribute("cx",t),r.setAttribute("cy",i),ee=t,te=i,o();break;case"focus":k.fx.val(t),k.fy.val(i),r.setAttribute("fx",t),r.setAttribute("fy",i),o()}e.preventDefault()},ae=function(){ne=null,m.unbind("mousemove",re).unbind("mouseup",ae)};if(H=_.getElementsByTagNameNS(t.svg,"stop"),2>se){for(;2>se;)_.appendChild(document.createElementNS(t.svg,"stop")),++se;H=_.getElementsByTagNameNS(t.svg,"stop")}var se=H.length;for(L=0;se>L;L++)r(0,0,0,0,H[L]);ie.val(_.getAttribute("spreadMethod")||"pad");var oe,le=!1;x.setAttribute("fill-opacity",E/100),$("#"+d+" div.grad_coord").mousedown(function(e){e.preventDefault(),ne=$(this),ne.offset(),oe=ne.parent().offset(),m.mousemove(re).mouseup(ae)}),$("#"+d+"_jGraduate_Ok").bind("click",function(){u.paint.type=b,u.paint[b]=_.cloneNode(!0),u.paint.solidColor=null,p()}),$("#"+d+"_jGraduate_Cancel").bind("click",function(){f()}),"radialGradient"===b&&(le?F.show():(F.hide(),k.fx.val(""),k.fy.val(""))),$("#"+d+"_jGraduate_match_ctr")[0].checked=!le;var ue,ce;if($("#"+d+"_jGraduate_match_ctr").change(function(){le=!this.checked,F.toggle(le),k.fx.val(""),k.fy.val("");var e=_;if(le){var t=ue||.5,i=ce||.5;e.setAttribute("fx",t),e.setAttribute("fy",i),k.fx.val(t),k.fy.val(i)}else ue=e.getAttribute("fx"),ce=e.getAttribute("fy"),e.removeAttribute("fx"),e.removeAttribute("fy")}),H=_.getElementsByTagNameNS(t.svg,"stop"),se=H.length,2>se){for(;2>se;)_.appendChild(document.createElementNS(t.svg,"stop")),++se;H=_.getElementsByTagNameNS(t.svg,"stop")}var de;E=y=0,"radialGradient"===b&&(P=_.gradientTransform.baseVal,2===P.numberOfItems?(se=P.getItem(0),P=P.getItem(1),2===se.type&&3===P.type&&(se=P.matrix,1!==se.a?y=Math.round(100*-(1-se.a)):1!==se.d&&(y=Math.round(100*(1-se.d))))):3===P.numberOfItems&&(A=P.getItem(0),se=P.getItem(1),P=P.getItem(2),4===A.type&&2===se.type&&3===P.type&&(E=Math.round(A.angle),se=P.matrix,1!==se.a?y=Math.round(100*-(1-se.a)):1!==se.d&&(y=Math.round(100*(1-se.d)))))),y={radius:{handle:"#"+d+"_jGraduate_RadiusArrows",input:"#"+d+"_jGraduate_RadiusInput",val:100*(_.getAttribute("r")||.5)},opacity:{handle:"#"+d+"_jGraduate_OpacArrows",input:"#"+d+"_jGraduate_OpacInput",val:u.paint.alpha||100},ellip:{handle:"#"+d+"_jGraduate_EllipArrows",input:"#"+d+"_jGraduate_EllipInput",val:y},angle:{handle:"#"+d+"_jGraduate_AngleArrows",input:"#"+d+"_jGraduate_AngleInput",val:E}},$.each(y,function(e,t){var i=$(t.handle);i.mousedown(function(n){var r=i.parent();de={type:e,elem:i,input:$(t.input),parent:r,offset:r.offset()},m.mousemove(he).mouseup(pe),n.preventDefault()}),$(t.input).val(t.val).change(function(){var t=+this.value,n=0,r="radialGradient"===b;switch(e){case"radius":r&&_.setAttribute("r",t/100),n=Math.pow(t/100,.4)/2*145;break;case"opacity":u.paint.alpha=t,x.setAttribute("fill-opacity",t/100),n=1.45*t;break;case"ellip":if(K=Z=1,0===t){n=72.5;break}t>99.5&&(t=99.5),t>0?Z=1-t/100:K=-(t/100)-1,n=145*((t+100)/2)/100,r&&o();break;case"angle":J=t,n=J/180,n+=.5,n*=145,r&&o()}n>145?n=145:0>n&&(n=0),i.css({"margin-left":n-5})}).change()});var he=function(e){var t=e.pageX-de.offset.left-parseInt(de.parent.css("border-left-width"));t>145&&(t=145),0>=t&&(t=0);var i=t-5;switch(t/=145,de.type){case"radius":t=Math.pow(2*t,2.5),t>.98&&1.02>t&&(t=1),.01>=t&&(t=.01),_.setAttribute("r",t);break;case"opacity":u.paint.alpha=parseInt(100*t),x.setAttribute("fill-opacity",t);break;case"ellip":Z=K=1,.5>t?(t/=.5,K=0>=t?.01:t):t>.5&&(t/=.5,t=2-t,Z=0>=t?.01:t),o(),t-=1,Z===t+1&&(t=Math.abs(t));break;case"angle":t-=.5,J=t*=180,o(),t/=100}de.elem.css({"margin-left":i}),t=Math.round(100*t),de.input.val(t),e.preventDefault()},pe=function(){m.unbind("mousemove",he).unbind("mouseup",pe),de=null};for(y=(255*u.paint.alpha/100).toString(16);y.length<2;)y="0"+y;y=y.split(".")[0],g="none"==u.paint.solidColor?"":u.paint.solidColor+y,G||(g=H[0].getAttribute("stop-color")),$.extend($.fn.jPicker.defaults.window,{alphaSupport:!0,effects:{type:"show",speed:0}}),v.jPicker({window:{title:c.window.pickerTitle},images:{clientPath:c.images.clientPath},color:{active:g,alphaSupport:!0}},function(e){u.paint.type="solidColor",u.paint.alpha=e.val("ahex")?Math.round(e.val("a")/255*100):100,u.paint.solidColor=e.val("hex")?e.val("hex"):"none",u.paint.radialGradient=null,p()},null,function(){f()});var fe=$(h+" .jGraduate_tabs li");fe.click(function(){fe.removeClass("jGraduate_tab_current"),$(this).addClass("jGraduate_tab_current"),$(h+" > div").hide();var e=$(this).attr("data-type");if($(h+" .jGraduate_gradPick").show(),"rg"===e||"lg"===e){$(".jGraduate_"+e+"_field").show(),$(".jGraduate_"+("lg"===e?"rg":"lg")+"_field").hide(),$("#"+d+"_jgraduate_rect")[0].setAttribute("fill","url(#"+d+"_"+e+"_jgraduate_grad)"),b="lg"===e?"linearGradient":"radialGradient",$("#"+d+"_jGraduate_OpacInput").val(u.paint.alpha).change();var t=$("#"+d+"_"+e+"_jgraduate_grad")[0];if(_!==t){var i=$(_).find("stop");$(t).empty().append(i),_=t,t=ie.val(),_.setAttribute("spreadMethod",t)}le="rg"===e&&null!=_.getAttribute("fx")&&!(M==O&&V==j),$("#"+d+"_jGraduate_focusCoord").toggle(le),le&&($("#"+d+"_jGraduate_match_ctr")[0].checked=!1)}else $(h+" .jGraduate_gradPick").hide(),$(h+" .jGraduate_colPick").show()}),$(h+" > div").hide(),fe.removeClass("jGraduate_tab_current");var ge;switch(u.paint.type){case"linearGradient":ge=$(h+" .jGraduate_tab_lingrad");break;case"radialGradient":ge=$(h+" .jGraduate_tab_radgrad");break;default:ge=$(h+" .jGraduate_tab_color")}u.show(),setTimeout(function(){ge.addClass("jGraduate_tab_current").click()},10)}else alert("Container element must have an id attribute to maintain unique id strings for sub-elements.")})}}(),$.fn.SpinButton=function(e){function t(e,t){for(var i=e[t],n=document.body;(e=e.offsetParent)&&e!=n;)$.browser.msie&&"relative"==e.currentStyle.position||(i+=e[t]);return i}return this.each(function(){this.repeating=!1,this.spinCfg={min:e&&!isNaN(parseFloat(e.min))?Number(e.min):null,max:e&&!isNaN(parseFloat(e.max))?Number(e.max):null,step:e&&e.step?Number(e.step):1,stepfunc:e&&e.stepfunc?e.stepfunc:!1,page:e&&e.page?Number(e.page):10,upClass:e&&e.upClass?e.upClass:"up",downClass:e&&e.downClass?e.downClass:"down",reset:e&&e.reset?e.reset:this.value,delay:e&&e.delay?Number(e.delay):500,interval:e&&e.interval?Number(e.interval):100,_btn_width:20,_direction:null,_delay:null,_repeat:null,callback:e&&e.callback?e.callback:null},this.spinCfg.smallStep=e&&e.smallStep?e.smallStep:this.spinCfg.step/2,this.adjustValue=function(e){e=isNaN(this.value)?this.spinCfg.reset:$.isFunction(this.spinCfg.stepfunc)?this.spinCfg.stepfunc(this,e):Number((Number(this.value)+Number(e)).toFixed(5)),null!==this.spinCfg.min&&(e=Math.max(e,this.spinCfg.min)),null!==this.spinCfg.max&&(e=Math.min(e,this.spinCfg.max)),this.value=e,$.isFunction(this.spinCfg.callback)&&this.spinCfg.callback(this)},$(this).addClass(e&&e.spinClass?e.spinClass:"spin-button").mousemove(function(e){var i=e.pageX||e.x,n=e.pageY||e.y;e=e.target||e.srcElement;var r=svgEditor.tool_scale||1,a=$(e).height()/2;if(i=i>t(e,"offsetLeft")+e.offsetWidth*r-this.spinCfg._btn_width?n<t(e,"offsetTop")+a*r?1:-1:0,i!==this.spinCfg._direction){switch(i){case 1:$(this).removeClass(this.spinCfg.downClass).addClass(this.spinCfg.upClass);break;case-1:$(this).removeClass(this.spinCfg.upClass).addClass(this.spinCfg.downClass);break;default:$(this).removeClass(this.spinCfg.upClass).removeClass(this.spinCfg.downClass)}this.spinCfg._direction=i}}).mouseout(function(){$(this).removeClass(this.spinCfg.upClass).removeClass(this.spinCfg.downClass),this.spinCfg._direction=null,window.clearInterval(this.spinCfg._repeat),window.clearTimeout(this.spinCfg._delay)}).mousedown(function(e){if(0===e.button&&0!=this.spinCfg._direction){var t=this,i=e.shiftKey?t.spinCfg.smallStep:t.spinCfg.step,n=function(){t.adjustValue(t.spinCfg._direction*i)};n(),t.spinCfg._delay=window.setTimeout(function(){n(),t.spinCfg._repeat=window.setInterval(n,t.spinCfg.interval)},t.spinCfg.delay)}}).mouseup(function(){window.clearInterval(this.spinCfg._repeat),window.clearTimeout(this.spinCfg._delay)}).dblclick(function(){$.browser.msie&&this.adjustValue(this.spinCfg._direction*this.spinCfg.step)}).keydown(function(e){switch(e.keyCode){case 38:this.adjustValue(this.spinCfg.step);break;case 40:this.adjustValue(-this.spinCfg.step);break;case 33:this.adjustValue(this.spinCfg.page);break;case 34:this.adjustValue(-this.spinCfg.page)}}).keypress(function(e){if(this.repeating)switch(e.keyCode){case 38:this.adjustValue(this.spinCfg.step);break;case 40:this.adjustValue(-this.spinCfg.step);break;case 33:this.adjustValue(this.spinCfg.page);break;case 34:this.adjustValue(-this.spinCfg.page)}else this.repeating=!0}).keyup(function(e){switch(this.repeating=!1,e.keyCode){case 38:case 40:case 33:case 34:case 13:this.adjustValue(0)}}).bind("mousewheel",function(e){e.wheelDelta>=120?this.adjustValue(this.spinCfg.step):e.wheelDelta<=-120&&this.adjustValue(-this.spinCfg.step),e.preventDefault()}).change(function(){this.adjustValue(0)}),this.addEventListener&&this.addEventListener("DOMMouseScroll",function(e){e.detail>0?this.adjustValue(-this.spinCfg.step):e.detail<0&&this.adjustValue(this.spinCfg.step),e.preventDefault()},!1)})},document.addEventListener("touchstart",touchHandler,!0),document.addEventListener("touchmove",touchHandler,!0),document.addEventListener("touchend",touchHandler,!0),document.addEventListener("touchcancel",touchHandler,!0),svgedit={NS:{HTML:"http://www.w3.org/1999/xhtml",MATH:"http://www.w3.org/1998/Math/MathML",SE:"http://svg-edit.googlecode.com",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}},svgedit.getReverseNS=function(){"use strict";var e={};return $.each(this.NS,function(t,i){e[i]=t.toLowerCase()}),e},function(){"use strict";var e=jQuery.fn.attr,t="http://www.w3.org/2000/svg";jQuery.fn.attr=function(i,n){var r,a,s=this.length;if(!s)return e.apply(this,arguments);for(r=0;s>r;++r){var o=this[r];if(o.namespaceURI!==t)return e.apply(this,arguments);if(void 0!==n)o.setAttribute(i,n);else if($.isArray(i)){for(var l=i.length,u={};l--;){var c=i[l];a=o.getAttribute(c),(a||"0"===a)&&(a=isNaN(a)?a:a-0),u[c]=a}return u}if("object"!=typeof i)return a=o.getAttribute(i),(a||"0"===a)&&(a=isNaN(a)?a:a-0),a;var d;for(d in i)o.setAttribute(d,i[d])}return this}}(),jQuery&&function(){var e=$(window),t=$(document);$.extend($.fn,{contextMenu:function(i,n){return void 0==i.menu?!1:(void 0==i.inSpeed&&(i.inSpeed=150),void 0==i.outSpeed&&(i.outSpeed=75),0==i.inSpeed&&(i.inSpeed=-1),0==i.outSpeed&&(i.outSpeed=-1),$(this).each(function(){var r=$(this),a=$(r).offset(),s=$("#"+i.menu);s.addClass("contextMenu"),$(this).bind("mousedown",function(o){var l=o;$(this).mouseup(function(o){var u=$(this);if(u.unbind("mouseup"),2===l.button||i.allowLeft||l.ctrlKey&&svgedit.browser.isMac()){if(o.stopPropagation(),$(".contextMenu").hide(),r.hasClass("disabled"))return!1;var c=o.pageX,d=o.pageY,h=e.width()-s.width(),p=e.height()-s.height();c>h-15&&(c=h-15),d>p-30&&(d=p-30),t.unbind("click"),s.css({top:d,left:c}).fadeIn(i.inSpeed),s.find("A").mouseover(function(){s.find("LI.hover").removeClass("hover"),$(this).parent().addClass("hover")}).mouseout(function(){s.find("LI.hover").removeClass("hover")}),t.keypress(function(e){switch(e.keyCode){case 38:s.find("LI.hover").length?(s.find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),
s.find("LI.hover").length||s.find("LI:last").addClass("hover")):s.find("LI:last").addClass("hover");break;case 40:0==s.find("LI.hover").length?s.find("LI:first").addClass("hover"):(s.find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),s.find("LI.hover").length||s.find("LI:first").addClass("hover"));break;case 13:s.find("LI.hover A").trigger("click");break;case 27:t.trigger("click")}}),s.find("A").unbind("mouseup"),s.find("LI:not(.disabled) A").mouseup(function(){return t.unbind("click").unbind("keypress"),$(".contextMenu").hide(),n&&n($(this).attr("href").substr(1),$(u),{x:c-a.left,y:d-a.top,docX:c,docY:d}),!1}),setTimeout(function(){t.click(function(){return t.unbind("click").unbind("keypress"),s.fadeOut(i.outSpeed),!1})},0)}})}),$.browser.mozilla?$("#"+i.menu).each(function(){$(this).css({MozUserSelect:"none"})}):$.browser.msie?$("#"+i.menu).each(function(){$(this).bind("selectstart.disableTextSelect",function(){return!1})}):$("#"+i.menu).each(function(){$(this).bind("mousedown.disableTextSelect",function(){return!1})}),$(r).add($("UL.contextMenu")).bind("contextmenu",function(){return!1})}),$(this))},disableContextMenuItems:function(e){return void 0==e?($(this).find("LI").addClass("disabled"),$(this)):($(this).each(function(){if(void 0!=e)for(var t=e.split(","),i=0;i<t.length;i++)$(this).find('A[href="'+t[i]+'"]').parent().addClass("disabled")}),$(this))},enableContextMenuItems:function(e){return void 0==e?($(this).find("LI.disabled").removeClass("disabled"),$(this)):($(this).each(function(){if(void 0!=e)for(var t=e.split(","),i=0;i<t.length;i++)$(this).find('A[href="'+t[i]+'"]').parent().removeClass("disabled")}),$(this))},disableContextMenu:function(){return $(this).each(function(){$(this).addClass("disabled")}),$(this)},enableContextMenu:function(){return $(this).each(function(){$(this).removeClass("disabled")}),$(this)},destroyContextMenu:function(){return $(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")}),$(this)}})}(jQuery),function(){"use strict";window.SVGPathSeg||(window.SVGPathSeg=function(e,t,i){this.pathSegType=e,this.pathSegTypeAsLetter=t,this._owningPathSegList=i},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",e)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(e,t,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",e),this._x=t,this._y=i},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(e,t,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",e),this._x=t,this._y=i},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(e,t,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",e),this._x=t,this._y=i},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(e,t,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",e),this._x=t,this._y=i},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(e,t,i,n,r,a,s){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",e),this._x=t,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=s},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(e,t,i,n,r,a,s){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",e),this._x=t,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=s},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(e,t,i,n,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",e),this._x=t,this._y=i,this._x1=n,this._y1=r},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(e,t,i,n,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",e),this._x=t,this._y=i,this._x1=n,this._y1=r},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(e,t,i,n,r,a,s,o){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",e),this._x=t,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=s,this._sweepFlag=o},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(e,t,i,n,r,a,s,o){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",e),this._x=t,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=s,this._sweepFlag=o},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",e),this._x=t},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",e),this._x=t},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",e),this._y=t},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",e),this._y=t},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(e,t,i,n,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",e),this._x=t,this._y=i,this._x2=n,this._y2=r},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(e,t,i,n,r){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",e),this._x=t,this._y=i,this._x2=n,this._y2=r},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,t,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",e),this._x=t,this._y=i},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(e,t,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",e),this._x=t,this._y=i},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,t){return new SVGPathSegMovetoAbs(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,t){return new SVGPathSegMovetoRel(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,t){return new SVGPathSegLinetoAbs(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,t){return new SVGPathSegLinetoRel(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,t,i,n,r,a){return new SVGPathSegCurvetoCubicAbs(void 0,e,t,i,n,r,a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,t,i,n,r,a){return new SVGPathSegCurvetoCubicRel(void 0,e,t,i,n,r,a)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,t,i,n){return new SVGPathSegCurvetoQuadraticAbs(void 0,e,t,i,n)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,t,i,n){return new SVGPathSegCurvetoQuadraticRel(void 0,e,t,i,n)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,t,i,n,r,a,s){return new SVGPathSegArcAbs(void 0,e,t,i,n,r,a,s)},SVGPathElement.prototype.createSVGPathSegArcRel=function(e,t,i,n,r,a,s){return new SVGPathSegArcRel(void 0,e,t,i,n,r,a,s)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new SVGPathSegLinetoHorizontalAbs(void 0,e)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new SVGPathSegLinetoHorizontalRel(void 0,e)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new SVGPathSegLinetoVerticalAbs(void 0,e)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new SVGPathSegLinetoVerticalRel(void 0,e)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,t,i,n){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,e,t,i,n)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,t,i,n){return new SVGPathSegCurvetoCubicSmoothRel(void 0,e,t,i,n)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,t){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,t){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,e,t)}),window.SVGPathSegList||(window.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length}}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(e){if(this._pathElement){var t=!1;e.forEach(function(e){"d"==e.attributeName&&(t=!0)}),t&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(e){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||0>e||e>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},SVGPathSegList.prototype.insertItemBefore=function(e,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(t,0,e),e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList.prototype.replaceItem=function(e,t){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(t),this._list[t]=e,e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList.prototype.removeItem=function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var t=this._list[e];return this._list.splice(e,1),this._writeListToPath(),t},SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList._pathSegArrayAsString=function(e){var t="",i=!0;return e.forEach(function(e){i?(i=!1,t+=e._asPathString()):t+=" "+e._asPathString()}),t},SVGPathSegList.prototype._parsePath=function(e){if(!e||0==e.length)return[];var t=this,i=function(){this.pathSegList=[]};i.prototype.appendSegment=function(e){this.pathSegList.push(e)};var n=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};n.prototype._isCurrentSpace=function(){var e=this._string[this._currentIndex];return" ">=e&&(" "==e||"\n"==e||"	"==e||"\r"==e||"\f"==e)},n.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},n.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex)?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},n.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},n.prototype.peekSegmentType=function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)},n.prototype._pathSegTypeFromChar=function(e){switch(e){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},n.prototype._nextCommandHelper=function(e,t){return("+"==e||"-"==e||"."==e||e>="0"&&"9">=e)&&t!=SVGPathSeg.PATHSEG_CLOSEPATH?t==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:t==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:t:SVGPathSeg.PATHSEG_UNKNOWN},n.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==SVGPathSeg.PATHSEG_MOVETO_ABS||e==SVGPathSeg.PATHSEG_MOVETO_REL},n.prototype._parseNumber=function(){var e=0,t=0,i=1,n=0,r=1,a=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,
r=-1),this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))return void 0;for(var o=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=o)for(var l=this._currentIndex-1,u=1;l>=o;)t+=u*(this._string.charAt(l--)-"0"),u*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return void 0;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)n+=(this._string.charAt(this._currentIndex++)-"0")*(i*=.1)}if(this._currentIndex!=s&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,a=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return void 0;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)e*=10,e+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var c=t+n;return c*=r,e&&(c*=Math.pow(10,a*e)),s==this._currentIndex?void 0:(this._skipOptionalSpacesOrDelimiter(),c)},n.prototype._parseArcFlag=function(){if(this._currentIndex>=this._endIndex)return void 0;var e=!1,t=this._string.charAt(this._currentIndex++);if("0"==t)e=!1;else{if("1"!=t)return void 0;e=!0}return this._skipOptionalSpacesOrDelimiter(),e},n.prototype.parseSegment=function(){var e=this._string[this._currentIndex],i=this._pathSegTypeFromChar(e);if(i==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if(i=this._nextCommandHelper(e,this._previousCommand),i==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=i,i){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(t);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(t,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(t,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(t,n.x,n.y,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(t,n.x,n.y,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(t,n.x,n.y,n.x1,n.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(t,n.x,n.y,n.x1,n.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(t,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(t,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);default:throw"Unknown path seg type."}};var r=new i,a=new n(e);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var s=a.parseSegment();if(!s)return[];r.appendSegment(s)}return r.pathSegList},Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}))}(),function(){"use strict";svgedit.browser||(svgedit.browser={});var e=svgedit.NS,t=function(){return!!document.createElementNS&&!!document.createElementNS(e.SVG,"svg").createSVGRect}();if(svgedit.browser.supportsSvg=function(){return t},!svgedit.browser.supportsSvg())return void(window.location="browser-not-supported.html");var i=navigator.userAgent,n=document.createElementNS(e.SVG,"svg"),r=!!window.opera,a=i.indexOf("AppleWebKit")>=0,s=i.indexOf("Gecko/")>=0,o=i.indexOf("MSIE")>=0,l=i.indexOf("Chrome/")>=0,u=i.indexOf("Windows")>=0,c=i.indexOf("Macintosh")>=0,d="ontouchstart"in window,h=function(){return!!n.querySelector}(),p=function(){return!!document.evaluate}(),f=function(){var t=document.createElementNS(e.SVG,"path");t.setAttribute("d","M0,0 10,10");var i=t.pathSegList,n=t.createSVGPathSegLinetoAbs(5,5);try{return i.replaceItem(n,0),!0}catch(r){}return!1}(),g=function(){var t=document.createElementNS(e.SVG,"path");t.setAttribute("d","M0,0 10,10");var i=t.pathSegList,n=t.createSVGPathSegLinetoAbs(5,5);try{return i.insertItemBefore(n,0),!0}catch(r){}return!1}(),m=function(){var t=document.createElementNS(e.SVG,"svg"),i=document.createElementNS(e.SVG,"svg");document.documentElement.appendChild(t),i.setAttribute("x",5),t.appendChild(i);var n=document.createElementNS(e.SVG,"text");n.textContent="a",i.appendChild(n);var r=n.getStartPositionOfChar(0).x;return document.documentElement.removeChild(t),0===r}(),v=function(){var t=document.createElementNS(e.SVG,"svg");document.documentElement.appendChild(t);var i=document.createElementNS(e.SVG,"path");i.setAttribute("d","M0,0 C0,0 10,10 10,0"),t.appendChild(i);var n=i.getBBox();return document.documentElement.removeChild(t),n.height>4&&n.height<5}(),y=function(){var t=document.createElementNS(e.SVG,"svg");document.documentElement.appendChild(t);var i=document.createElementNS(e.SVG,"path");i.setAttribute("d","M0,0 10,0");var n=document.createElementNS(e.SVG,"path");n.setAttribute("d","M5,0 15,0");var r=document.createElementNS(e.SVG,"g");r.appendChild(i),r.appendChild(n),t.appendChild(r);var a=r.getBBox();return document.documentElement.removeChild(t),15==a.width}(),b=function(){return r}(),_=function(){var t=document.createElementNS(e.SVG,"rect");t.setAttribute("x",.1);var i=t.cloneNode(!1),n=-1==i.getAttribute("x").indexOf(",");return n||$.alert('NOTE: This version of Opera is known to contain bugs in SVG-edit.\nPlease upgrade to the <a href="http://opera.com">latest version</a> in which the problems have been fixed.'),n}(),x=function(){var t=document.createElementNS(e.SVG,"rect");return t.setAttribute("style","vector-effect:non-scaling-stroke"),"non-scaling-stroke"===t.style.vectorEffect}(),S=function(){var t=document.createElementNS(e.SVG,"rect"),i=t.transform.baseVal,r=n.createSVGTransform();return i.appendItem(r),i.getItem(0)==r}();svgedit.browser.isOpera=function(){return r},svgedit.browser.isWebkit=function(){return a},svgedit.browser.isGecko=function(){return s},svgedit.browser.isIE=function(){return o},svgedit.browser.isChrome=function(){return l},svgedit.browser.isWindows=function(){return u},svgedit.browser.isMac=function(){return c},svgedit.browser.isTouch=function(){return d},svgedit.browser.supportsSelectors=function(){return h},svgedit.browser.supportsXpath=function(){return p},svgedit.browser.supportsPathReplaceItem=function(){return f},svgedit.browser.supportsPathInsertItemBefore=function(){return g},svgedit.browser.supportsPathBBox=function(){return v},svgedit.browser.supportsHVLineContainerBBox=function(){return y},svgedit.browser.supportsGoodTextCharPos=function(){return m},svgedit.browser.supportsEditableText=function(){return b},svgedit.browser.supportsGoodDecimals=function(){return _},svgedit.browser.supportsNonScalingStroke=function(){return x},svgedit.browser.supportsNativeTransformLists=function(){return S}}(),function(){"use strict";function e(e){var t=e.matrix,i="";switch(e.type){case 1:i="matrix("+[t.a,t.b,t.c,t.d,t.e,t.f].join(",")+")";break;case 2:i="translate("+t.e+","+t.f+")";break;case 3:i=t.a==t.d?"scale("+t.a+")":"scale("+t.a+","+t.d+")";break;case 4:var n=0,r=0;if(0!=e.angle){var a=1-t.a;r=(a*t.f+t.b*t.e)/(a*a+t.b*t.b),n=(t.e-t.b*r)/a}i="rotate("+e.angle+" "+n+","+r+")"}return i}svgedit.transformlist||(svgedit.transformlist={});var t=document.createElementNS(svgedit.NS.SVG,"svg"),i={};svgedit.transformlist.SVGTransformList=function(n){this._elem=n||null,this._xforms=[],this._update=function(){var i,n="";t.createSVGMatrix();for(i=0;i<this.numberOfItems;++i){var r=this._list.getItem(i);n+=e(r)+" "}this._elem.setAttribute("transform",n)},this._list=this,this._init=function(){var e=this._elem.getAttribute("transform");if(e)for(var i=/\s*((scale|matrix|rotate|translate)\s*\(.*?\))\s*,?\s*/,n=!0;n;)if(n=e.match(i),e=e.replace(i,""),n&&n[1]){var r=n[1],a=r.split(/\s*\(/),s=a[0],o=a[1].match(/\s*(.*?)\s*\)/);o[1]=o[1].replace(/(\d)-/g,"$1 -");var l=o[1].split(/[, ]+/),u="abcdef".split(""),c=t.createSVGMatrix();$.each(l,function(e,t){l[e]=parseFloat(t),"matrix"==s&&(c[u[e]]=l[e])});var d=t.createSVGTransform(),h="set"+s.charAt(0).toUpperCase()+s.slice(1),p="matrix"==s?[c]:l;"scale"==s&&1==p.length?p.push(p[0]):"translate"==s&&1==p.length?p.push(0):"rotate"==s&&1==p.length&&p.push(0,0),d[h].apply(d,p),this._list.appendItem(d)}},this._removeFromOtherLists=function(e){if(e){var t,n=!1;for(t in i){var r,a,s=i[t];for(r=0,a=s._xforms.length;a>r;++r)if(s._xforms[r]==e){n=!0,s.removeItem(r);break}if(n)break}}},this.numberOfItems=0,this.clear=function(){this.numberOfItems=0,this._xforms=[]},this.initialize=function(e){this.numberOfItems=1,this._removeFromOtherLists(e),this._xforms=[e]},this.getItem=function(e){if(e<this.numberOfItems&&e>=0)return this._xforms[e];throw{code:1}},this.insertItemBefore=function(e,t){var i=null;if(t>=0)if(t<this.numberOfItems){this._removeFromOtherLists(e);var n,r=new Array(this.numberOfItems+1);for(n=0;t>n;++n)r[n]=this._xforms[n];r[n]=e;var a;for(a=n+1;n<this.numberOfItems;++a,++n)r[a]=this._xforms[n];this.numberOfItems++,this._xforms=r,i=e,this._list._update()}else i=this._list.appendItem(e);return i},this.replaceItem=function(e,t){var i=null;return t<this.numberOfItems&&t>=0&&(this._removeFromOtherLists(e),this._xforms[t]=e,i=e,this._list._update()),i},this.removeItem=function(e){if(e<this.numberOfItems&&e>=0){var t,i,n=this._xforms[e],r=new Array(this.numberOfItems-1);for(t=0;e>t;++t)r[t]=this._xforms[t];for(i=t;i<this.numberOfItems-1;++i,++t)r[i]=this._xforms[t+1];return this.numberOfItems--,this._xforms=r,this._list._update(),n}throw{code:1}},this.appendItem=function(e){return this._removeFromOtherLists(e),this._xforms.push(e),this.numberOfItems++,this._list._update(),e}},svgedit.transformlist.resetListMap=function(){i={}},svgedit.transformlist.removeElementFromListMap=function(e){e.id&&i[e.id]&&delete i[e.id]},svgedit.transformlist.getTransformList=function(e){if(!svgedit.browser.supportsNativeTransformLists()){var t=e.id||"temp",n=i[t];return n&&"temp"!==t||(i[t]=new svgedit.transformlist.SVGTransformList(e),i[t]._init(),n=i[t]),n}return e.transform?e.transform.baseVal:e.gradientTransform?e.gradientTransform.baseVal:e.patternTransform?e.patternTransform.baseVal:null}}(),function(){"use strict";svgedit.math||(svgedit.math={});var e=1e-14,t=document.createElementNS(svgedit.NS.SVG,"svg");svgedit.math.transformPoint=function(e,t,i){return{x:i.a*e+i.c*t+i.e,y:i.b*e+i.d*t+i.f}},svgedit.math.isIdentity=function(e){return 1===e.a&&0===e.b&&0===e.c&&1===e.d&&0===e.e&&0===e.f},svgedit.math.matrixMultiply=function(t){for(var i=arguments,n=i.length,r=i[n-1];n-->1;){var a=i[n-1];r=a.multiply(r)}return Math.abs(r.a)<e&&(r.a=0),Math.abs(r.b)<e&&(r.b=0),Math.abs(r.c)<e&&(r.c=0),Math.abs(r.d)<e&&(r.d=0),Math.abs(r.e)<e&&(r.e=0),Math.abs(r.f)<e&&(r.f=0),r},svgedit.math.hasMatrixTransform=function(e){if(!e)return!1;for(var t=e.numberOfItems;t--;){var i=e.getItem(t);if(1==i.type&&!svgedit.math.isIdentity(i.matrix))return!0}return!1},svgedit.math.transformBox=function(e,t,i,n,r){var a=svgedit.math.transformPoint,s=a(e,t,r),o=a(e+i,t,r),l=a(e,t+n,r),u=a(e+i,t+n,r),c=Math.min(s.x,o.x,l.x,u.x),d=Math.max(s.x,o.x,l.x,u.x),h=Math.min(s.y,o.y,l.y,u.y),p=Math.max(s.y,o.y,l.y,u.y);return{tl:s,tr:o,bl:l,br:u,aabox:{x:c,y:h,width:d-c,height:p-h}}},svgedit.math.transformListToTransform=function(e,i,n){if(null==e)return t.createSVGTransformFromMatrix(t.createSVGMatrix());if(i=i||0,n=n||e.numberOfItems-1,i=parseInt(i,10),n=parseInt(n,10),i>n){var r=n;n=i,i=r}var a,s=t.createSVGMatrix();for(a=i;n>=a;++a){var o=a>=0&&a<e.numberOfItems?e.getItem(a).matrix:t.createSVGMatrix();s=svgedit.math.matrixMultiply(s,o)}return t.createSVGTransformFromMatrix(s)},svgedit.math.getMatrix=function(e){var t=svgedit.transformlist.getTransformList(e);return svgedit.math.transformListToTransform(t).matrix},svgedit.math.snapToAngle=function(e,t,i,n){var r=Math.PI/4,a=i-e,s=n-t,o=Math.atan2(s,a),l=Math.sqrt(a*a+s*s),u=Math.round(o/r)*r;return{x:e+l*Math.cos(u),y:t+l*Math.sin(u),a:u}},svgedit.math.rectsIntersect=function(e,t){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}}(),function(){"use strict";svgedit.units||(svgedit.units={});var e,t=svgedit.NS,i=["x","x1","cx","rx","width"],n=["y","y1","cy","ry","height"],r=["r","radius"].concat(i,n),a={};svgedit.units.init=function(i){e=i;var n=document.createElementNS(t.SVG,"svg");document.body.appendChild(n);var r=document.createElementNS(t.SVG,"rect");r.setAttribute("width","1em"),r.setAttribute("height","1ex"),r.setAttribute("x","1in"),n.appendChild(r);var s=r.getBBox();document.body.removeChild(n);var o=s.x;a={em:s.width,ex:s.height,"in":o,cm:o/2.54,mm:o/25.4,pt:o/72,pc:o/6,px:1,"%":0}},svgedit.units.getTypeMap=function(){return a},svgedit.units.shortFloat=function(t){var i=e.getRoundDigits();return isNaN(t)?$.isArray(t)?svgedit.units.shortFloat(t[0])+","+svgedit.units.shortFloat(t[1]):parseFloat(t).toFixed(i)-0:+(+t).toFixed(i)},svgedit.units.convertUnit=function(t,i){return i=i||e.getBaseUnit(),svgedit.units.shortFloat(t/a[i])},svgedit.units.setUnitAttr=function(e,t,i){e.setAttribute(t,i)};var s={line:["x1","x2","y1","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],foreignObject:["x","y","width","height"],rect:["x","y","width","height"],image:["x","y","width","height"],use:["x","y","width","height"],text:["x","y"]};svgedit.units.convertAttrs=function(t){var i=t.tagName,n=e.getBaseUnit(),r=s[i];if(r){var o,l=r.length;for(o=0;l>o;o++){var u=r[o],c=t.getAttribute(u);c&&(isNaN(c)||t.setAttribute(u,c/a[n]+n))}}},svgedit.units.convertToNum=function(t,r){if(!isNaN(r))return r-0;var s;if("%"===r.substr(-1)){s=r.substr(0,r.length-1)/100;var o=e.getWidth(),l=e.getHeight();return i.indexOf(t)>=0?s*o:n.indexOf(t)>=0?s*l:s*Math.sqrt(o*o+l*l)/Math.sqrt(2)}var u=r.substr(-2);return s=r.substr(0,r.length-2),s*a[u]},svgedit.units.isValidUnit=function(t,i,n){var s=!1;if(r.indexOf(t)>=0)isNaN(i)?(i=i.toLowerCase(),$.each(a,function(e){if(!s){var t=new RegExp("^-?[\\d\\.]+"+e+"$");t.test(i)&&(s=!0)}})):s=!0;else if("id"==t){var o=!1;try{var l=e.getElement(i);o=null==l||l===n}catch(u){}return o}return s=!0}}(),function(e){"use strict";function t(e){if(svgedit.browser.supportsHVLineContainerBBox())try{return e.getBBox()}catch(t){}var i,n,r=$.data(e,"ref"),a=null;r?(n=$(r).children().clone().attr("visibility","hidden"),$(u).append(n),a=n.filter("line, path")):a=$(e).find("line, path");var s=!1;if(a.length)if(a.each(function(){var e=this.getBBox();e.width&&e.height||(s=!0)}),s){var o=r?n:$(e).children();i=getStrokedBBox(o)}else i=e.getBBox();else i=e.getBBox();return r&&n.remove(),i}svgedit.utilities||(svgedit.utilities={});var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=svgedit.NS,r="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",a=r.split(","),s=null,o=null,l=null,u=null;svgedit.utilities.init=function(e){s=e,o=e.getDOMDocument(),l=e.getDOMContainer(),u=e.getSVGRoot()},svgedit.utilities.toXml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#x27;")},svgedit.utilities.fromXml=function(e){return $("<p/>").html(e).text()},svgedit.utilities.encode64=function(e){if(e=svgedit.utilities.encodeUTF8(e),window.btoa)return window.btoa(e);var t=[];t.length=4*Math.floor((e.length+2)/3);var n,r,a,s,o,l,u,c=0,d=0;do n=e.charCodeAt(c++),r=e.charCodeAt(c++),a=e.charCodeAt(c++),s=n>>2,o=(3&n)<<4|r>>4,l=(15&r)<<2|a>>6,u=63&a,isNaN(r)?l=u=64:isNaN(a)&&(u=64),t[d++]=i.charAt(s),t[d++]=i.charAt(o),t[d++]=i.charAt(l),t[d++]=i.charAt(u);while(c<e.length);return t.join("")},svgedit.utilities.decode64=function(e){if(window.atob)return svgedit.utilities.decodeUTF8(window.atob(e));var t,n,r,a,s,o="",l="",u="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=i.indexOf(e.charAt(c++)),a=i.indexOf(e.charAt(c++)),s=i.indexOf(e.charAt(c++)),u=i.indexOf(e.charAt(c++)),t=r<<2|a>>4,n=(15&a)<<4|s>>2,l=(3&s)<<6|u,o+=String.fromCharCode(t),64!=s&&(o+=String.fromCharCode(n)),64!=u&&(o+=String.fromCharCode(l)),t=n=l="",r=a=s=u="";while(c<e.length);return svgedit.utilities.decodeUTF8(o)},svgedit.utilities.decodeUTF8=function(e){return decodeURIComponent(escape(e))},svgedit.utilities.encodeUTF8=function(e){return unescape(encodeURIComponent(e))},svgedit.utilities.convertToXMLReferences=function(e){var t,i="";for(t=0;t<e.length;t++){var n=e.charCodeAt(t);128>n?i+=e[t]:n>127&&(i+="&#"+n+";")}return i},svgedit.utilities.text2xml=function(e){e.indexOf("<svg:svg")>=0&&(e=e.replace(/<(\/?)svg:/g,"<$1").replace("xmlns:svg","xmlns"));var t,i;try{i=window.DOMParser?new DOMParser:new ActiveXObject("Microsoft.XMLDOM"),i.async=!1}catch(n){throw new Error("XML Parser could not be instantiated")}try{t=i.loadXML?i.loadXML(e)?i:!1:i.parseFromString(e,"text/xml")}catch(r){throw new Error("Error parsing XML string")}return t},svgedit.utilities.bboxToObj=function(e){return{x:e.x,y:e.y,width:e.width,height:e.height}},svgedit.utilities.walkTree=function(e,t){if(e&&1==e.nodeType){t(e);for(var i=e.childNodes.length;i--;)svgedit.utilities.walkTree(e.childNodes.item(i),t)}},svgedit.utilities.walkTreePost=function(e,t){if(e&&1==e.nodeType){for(var i=e.childNodes.length;i--;)svgedit.utilities.walkTree(e.childNodes.item(i),t);t(e)}},svgedit.utilities.getUrlFromAttr=function(e){if(e){if(0===e.indexOf('url("'))return e.substring(5,e.indexOf('"',6));if(0===e.indexOf("url('"))return e.substring(5,e.indexOf("'",6));if(0===e.indexOf("url("))return e.substring(4,e.indexOf(")"))}return null},svgedit.utilities.getHref=function(e){return e.getAttributeNS(n.XLINK,"href")},svgedit.utilities.setHref=function(e,t){e.setAttributeNS(n.XLINK,"xlink:href",t)},svgedit.utilities.findDefs=function(){var e=s.getSVGContent(),t=e.getElementsByTagNameNS(n.SVG,"defs");return t.length>0?t=t[0]:(t=e.ownerDocument.createElementNS(n.SVG,"defs"),e.firstChild?e.insertBefore(t,e.firstChild.nextSibling):e.appendChild(t)),t},svgedit.utilities.getPathBBox=function(t){var i,n=t.pathSegList,r=n.numberOfItems,a=[[],[]],s=n.getItem(0),o=[s.x,s.y];for(i=0;r>i;i++){var l=n.getItem(i);if(l.x!==e)if(a[0].push(o[0]),a[1].push(o[1]),l.x1){var u,c=[l.x1,l.y1],d=[l.x2,l.y2],h=[l.x,l.y];for(u=0;2>u;u++){var p=function(e){return Math.pow(1-e,3)*o[u]+3*Math.pow(1-e,2)*e*c[u]+3*(1-e)*Math.pow(e,2)*d[u]+Math.pow(e,3)*h[u]},f=6*o[u]-12*c[u]+6*d[u],g=-3*o[u]+9*c[u]-9*d[u]+3*h[u],m=3*c[u]-3*o[u];if(0!=g){var v=Math.pow(f,2)-4*m*g;if(!(0>v)){var y=(-f+Math.sqrt(v))/(2*g);y>0&&1>y&&a[u].push(p(y));var b=(-f-Math.sqrt(v))/(2*g);b>0&&1>b&&a[u].push(p(b))}}else{if(0==f)continue;var _=-m/f;_>0&&1>_&&a[u].push(p(_))}}o=h}else a[0].push(l.x),a[1].push(l.y)}var x=Math.min.apply(null,a[0]),S=Math.max.apply(null,a[0])-x,w=Math.min.apply(null,a[1]),C=Math.max.apply(null,a[1])-w;return{x:x,y:w,width:S,height:C}},svgedit.utilities.getBBox=function(e){var i=e||s.geSelectedElements()[0];if(1!=e.nodeType)return null;var n=null,r=i.nodeName;switch(r){case"text":""===i.textContent?(i.textContent="a",n=i.getBBox(),i.textContent=""):i.getBBox&&(n=i.getBBox());break;case"path":svgedit.browser.supportsPathBBox()?i.getBBox&&(n=i.getBBox()):n=svgedit.utilities.getPathBBox(i);break;case"g":case"a":n=t(i);break;default:if("use"===r&&(n=t(i,!0)),"use"===r||"foreignObject"===r&&svgedit.browser.isWebkit()){n||(n=i.getBBox());var o={};o.width=n.width,o.height=n.height,o.x=n.x+parseFloat(i.getAttribute("x")||0),o.y=n.y+parseFloat(i.getAttribute("y")||0),n=o}else if(~a.indexOf(r))if(i)n=i.getBBox();else{var l=$(i).closest("foreignObject");l.length&&l[0].getBBox&&(n=l[0].getBBox())}}return n&&(n=svgedit.utilities.bboxToObj(n)),n},svgedit.utilities.getRotationAngle=function(e,t){var i=e||s.getSelectedElements()[0],n=svgedit.transformlist.getTransformList(i);if(!n)return 0;var r,a=n.numberOfItems;for(r=0;a>r;++r){var o=n.getItem(r);if(4==o.type)return t?o.angle*Math.PI/180:o.angle}return 0},svgedit.utilities.getRefElem=function(e){return svgedit.utilities.getElem(svgedit.utilities.getUrlFromAttr(e).substr(1))},svgedit.browser.supportsSelectors()?svgedit.utilities.getElem=function(e){return u.querySelector("#"+e)}:svgedit.browser.supportsXpath()?svgedit.utilities.getElem=function(e){return o.evaluate('svg:svg[@id="svgroot"]//svg:*[@id="'+e+'"]',l,function(){return svgedit.NS.SVG},9,null).singleNodeValue}:svgedit.utilities.getElem=function(e){return $(u).find("[id="+e+"]")[0]},svgedit.utilities.assignAttributes=function(e,t,i,r){var a;for(a in t){var s="xml:"===a.substr(0,4)?n.XML:"xlink:"===a.substr(0,6)?n.XLINK:null;s?e.setAttributeNS(s,a,t[a]):r?svgedit.units.setUnitAttr(e,a,t[a]):e.setAttribute(a,t[a])}},svgedit.utilities.cleanupElement=function(e){var t,i={"fill-opacity":1,"stop-opacity":1,opacity:1,stroke:"none","stroke-dasharray":"none","stroke-linejoin":"miter","stroke-linecap":"butt","stroke-opacity":1,"stroke-width":1,rx:0,ry:0};for(t in i){var n=i[t];e.getAttribute(t)==n&&e.removeAttribute(t)}},svgedit.utilities.snapToGrid=function(e){var t=s.getSnappingStep(),i=s.getBaseUnit();return"px"!==i&&(t*=svgedit.units.getTypeMap()[i]),e=Math.round(e/t)*t},svgedit.utilities.preg_quote=function(e,t){return String(e).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},svgedit.utilities.executeAfterLoads=function(e,t,i){return function(){function n(){i.apply(null,r)}var r=arguments;window[e]?n():t.reduceRight(function(e,t){return function(){$.getScript(t,e)}},n)()}},svgedit.utilities.buildCanvgCallback=function(e){return svgedit.utilities.executeAfterLoads("canvg",["canvg/rgbcolor.js","canvg/canvg.js"],e)},svgedit.utilities.buildJSPDFCallback=function(t){return svgedit.utilities.executeAfterLoads("RGBColor",["canvg/rgbcolor.js"],function(){var i=[];RGBColor&&RGBColor.ok!==e||i.push("canvg/rgbcolor.js"),svgedit.utilities.executeAfterLoads("jsPDF",i.concat("jspdf/underscore-min.js","jspdf/jspdf.min.js","jspdf/jspdf.plugin.svgToPdf.js"),t)()})}}(),function(){"use strict";svgedit.sanitize||(svgedit.sanitize={});var e=svgedit.NS,t=svgedit.getReverseNS(),i={a:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","mask","opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","xlink:href","xlink:title"],circle:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","r","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],clipPath:["class","clipPathUnits","id"],defs:[],style:["type"],desc:[],ellipse:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],feGaussianBlur:["class","color-interpolation-filters","id","requiredFeatures","stdDeviation"],filter:["class","color-interpolation-filters","filterRes","filterUnits","height","id","primitiveUnits","requiredFeatures","width","x","xlink:href","y"],foreignObject:["class","font-size","height","id","opacity","requiredFeatures","style","transform","width","x","y"],g:["class","clip-path","clip-rule","id","display","fill","fill-opacity","fill-rule","filter","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","font-family","font-size","font-style","font-weight","text-anchor"],image:["class","clip-path","clip-rule","filter","height","id","mask","opacity","requiredFeatures","style","systemLanguage","transform","width","x","xlink:href","xlink:title","y"],line:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","x1","x2","y1","y2"],linearGradient:["class","id","gradientTransform","gradientUnits","requiredFeatures","spreadMethod","systemLanguage","x1","x2","xlink:href","y1","y2"],marker:["id","class","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","systemLanguage","viewBox"],mask:["class","height","id","maskContentUnits","maskUnits","width","x","y"],metadata:["class","id"],path:["class","clip-path","clip-rule","d","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],pattern:["class","height","id","patternContentUnits","patternTransform","patternUnits","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:href","y"],polygon:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","id","class","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],polyline:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],radialGradient:["class","cx","cy","fx","fy","gradientTransform","gradientUnits","id","r","requiredFeatures","spreadMethod","systemLanguage","xlink:href"],rect:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","width","x","y"],stop:["class","id","offset","requiredFeatures","stop-color","stop-opacity","style","systemLanguage"],svg:["class","clip-path","clip-rule","filter","id","height","mask","preserveAspectRatio","requiredFeatures","style","systemLanguage","viewBox","width","x","xmlns","xmlns:se","xmlns:xlink","y"],"switch":["class","id","requiredFeatures","systemLanguage"],symbol:["class","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","opacity","preserveAspectRatio","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","viewBox"],text:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","transform","x","xml:space","y"],textPath:["class","id","method","requiredFeatures","spacing","startOffset","style","systemLanguage","transform","xlink:href"],title:[],tspan:["class","clip-path","clip-rule","dx","dy","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","rotate","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","textLength","transform","x","xml:space","y"],use:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","transform","width","x","xlink:href","y"],annotation:["encoding"],"annotation-xml":["encoding"],maction:["actiontype","other","selection"],math:["class","id","display","xmlns"],menclose:["notation"],merror:[],mfrac:["linethickness"],mi:["mathvariant"],mmultiscripts:[],mn:[],mo:["fence","lspace","maxsize","minsize","rspace","stretchy"],mover:[],mpadded:["lspace","width","height","depth","voffset"],
mphantom:[],mprescripts:[],mroot:[],mrow:["xlink:href","xlink:type","xmlns:xlink"],mspace:["depth","height","width"],msqrt:[],mstyle:["displaystyle","mathbackground","mathcolor","mathvariant","scriptlevel"],msub:[],msubsup:[],msup:[],mtable:["align","columnalign","columnlines","columnspacing","displaystyle","equalcolumns","equalrows","frame","rowalign","rowlines","rowspacing","width"],mtd:["columnalign","columnspan","rowalign","rowspan"],mtext:[],mtr:["columnalign","rowalign"],munder:[],munderover:[],none:[],semantics:[]},n={};$.each(i,function(t,i){var r={};$.each(i,function(t,i){if(i.indexOf(":")>=0){var n=i.split(":");r[n[1]]=e[n[0].toUpperCase()]}else r[i]="xmlns"==i?e.XMLNS:null}),n[t]=r}),svgedit.sanitize.sanitizeSvg=function(r){if(3==r.nodeType&&(r.nodeValue=r.nodeValue.replace(/^\s+|\s+$/g,""),0===r.nodeValue.length&&r.parentNode.removeChild(r)),1==r.nodeType){var a=r.ownerDocument,s=r.parentNode;if(a&&s){var o,l=i[r.nodeName],u=n[r.nodeName];if("undefined"!=typeof l){var c=[];for(o=r.attributes.length;o--;){var d=r.attributes.item(o),h=d.nodeName,p=d.localName,f=d.namespaceURI;if(u.hasOwnProperty(p)&&f==u[p]&&f!=e.XMLNS||f==e.XMLNS&&t[d.value]||(0===h.indexOf("se:")&&c.push([h,d.value]),r.removeAttributeNS(f,p)),svgedit.browser.isGecko())switch(h){case"transform":case"gradientTransform":case"patternTransform":var g=d.value.replace(/(\d)-/g,"$1 -");r.setAttribute(h,g)}if("style"==h){for(var m=d.value.split(";"),v=m.length;v--;){var y=m[v].split(":"),b=$.trim(y[0]),_=$.trim(y[1]);l.indexOf(b)>=0&&r.setAttribute(b,_)}r.removeAttribute("style")}}$.each(c,function(t,i){r.setAttributeNS(e.SE,i[0],i[1])});var x=svgedit.utilities.getHref(r);if(x&&["filter","linearGradient","pattern","radialGradient","textPath","use"].indexOf(r.nodeName)>=0&&"#"!=x[0]&&(svgedit.utilities.setHref(r,""),r.removeAttributeNS(e.XLINK,"href")),"use"==r.nodeName&&!svgedit.utilities.getHref(r))return void s.removeChild(r);for($.each(["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],function(e,t){var i=r.getAttribute(t);i&&(i=svgedit.utilities.getUrlFromAttr(i),i&&"#"!==i[0]&&(r.setAttribute(t,""),r.removeAttribute(t)))}),o=r.childNodes.length;o--;)svgedit.sanitize.sanitizeSvg(r.childNodes.item(o))}else{for(var S=[];r.hasChildNodes();)S.push(s.insertBefore(r.firstChild,r));for(s.removeChild(r),o=S.length;o--;)svgedit.sanitize.sanitizeSvg(S[o])}}}}}(),function(){"use strict";svgedit.history||(svgedit.history={}),svgedit.history.HistoryEventTypes={BEFORE_APPLY:"before_apply",AFTER_APPLY:"after_apply",BEFORE_UNAPPLY:"before_unapply",AFTER_UNAPPLY:"after_unapply"};svgedit.history.MoveElementCommand=function(e,t,i,n){this.elem=e,this.text=n?"Move "+e.tagName+" to "+n:"Move "+e.tagName,this.oldNextSibling=t,this.oldParent=i,this.newNextSibling=e.nextSibling,this.newParent=e.parentNode},svgedit.history.MoveElementCommand.type=function(){return"svgedit.history.MoveElementCommand"},svgedit.history.MoveElementCommand.prototype.type=svgedit.history.MoveElementCommand.type,svgedit.history.MoveElementCommand.prototype.getText=function(){return this.text},svgedit.history.MoveElementCommand.prototype.apply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this),this.elem=this.newParent.insertBefore(this.elem,this.newNextSibling),e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.MoveElementCommand.prototype.unapply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this),this.elem=this.oldParent.insertBefore(this.elem,this.oldNextSibling),e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.MoveElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.InsertElementCommand=function(e,t){this.elem=e,this.text=t||"Create "+e.tagName,this.parent=e.parentNode,this.nextSibling=this.elem.nextSibling},svgedit.history.InsertElementCommand.type=function(){return"svgedit.history.InsertElementCommand"},svgedit.history.InsertElementCommand.prototype.type=svgedit.history.InsertElementCommand.type,svgedit.history.InsertElementCommand.prototype.getText=function(){return this.text},svgedit.history.InsertElementCommand.prototype.apply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this),this.elem=this.parent.insertBefore(this.elem,this.nextSibling),e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.InsertElementCommand.prototype.unapply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this),this.parent=this.elem.parentNode,this.elem=this.elem.parentNode.removeChild(this.elem),e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.InsertElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.RemoveElementCommand=function(e,t,i,n){this.elem=e,this.text=n||"Delete "+e.tagName,this.nextSibling=t,this.parent=i,svgedit.transformlist.removeElementFromListMap(e)},svgedit.history.RemoveElementCommand.type=function(){return"svgedit.history.RemoveElementCommand"},svgedit.history.RemoveElementCommand.prototype.type=svgedit.history.RemoveElementCommand.type,svgedit.history.RemoveElementCommand.prototype.getText=function(){return this.text},svgedit.history.RemoveElementCommand.prototype.apply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this),svgedit.transformlist.removeElementFromListMap(this.elem),this.parent=this.elem.parentNode,this.elem=this.parent.removeChild(this.elem),e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.RemoveElementCommand.prototype.unapply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this),svgedit.transformlist.removeElementFromListMap(this.elem),null==this.nextSibling&&window.console&&console.log("Error: reference element was lost"),this.parent.insertBefore(this.elem,this.nextSibling),e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.RemoveElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.ChangeElementCommand=function(e,t,i){this.elem=e,this.text=i?"Change "+e.tagName+" "+i:"Change "+e.tagName,this.newValues={},this.oldValues=t;var n;for(n in t)"#text"==n?this.newValues[n]=e.textContent:"#href"==n?this.newValues[n]=svgedit.utilities.getHref(e):this.newValues[n]=e.getAttribute(n)},svgedit.history.ChangeElementCommand.type=function(){return"svgedit.history.ChangeElementCommand"},svgedit.history.ChangeElementCommand.prototype.type=svgedit.history.ChangeElementCommand.type,svgedit.history.ChangeElementCommand.prototype.getText=function(){return this.text},svgedit.history.ChangeElementCommand.prototype.apply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);var t,i=!1;for(t in this.newValues)this.newValues[t]?"#text"==t?this.elem.textContent=this.newValues[t]:"#href"==t?svgedit.utilities.setHref(this.elem,this.newValues[t]):this.elem.setAttribute(t,this.newValues[t]):"#text"==t?this.elem.textContent="":(this.elem.setAttribute(t,""),this.elem.removeAttribute(t)),"transform"==t&&(i=!0);if(!i){var n=svgedit.utilities.getRotationAngle(this.elem);if(n){var r=elem.getBBox(),a=r.x+r.width/2,s=r.y+r.height/2,o=["rotate(",n," ",a,",",s,")"].join("");o!=elem.getAttribute("transform")&&elem.setAttribute("transform",o)}}return e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this),!0},svgedit.history.ChangeElementCommand.prototype.unapply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this);var t,i=!1;for(t in this.oldValues)this.oldValues[t]?"#text"==t?this.elem.textContent=this.oldValues[t]:"#href"==t?svgedit.utilities.setHref(this.elem,this.oldValues[t]):this.elem.setAttribute(t,this.oldValues[t]):"#text"==t?this.elem.textContent="":this.elem.removeAttribute(t),"transform"==t&&(i=!0);if(!i){var n=svgedit.utilities.getRotationAngle(this.elem);if(n){var r=elem.getBBox(),a=r.x+r.width/2,s=r.y+r.height/2,o=["rotate(",n," ",a,",",s,")"].join("");o!=elem.getAttribute("transform")&&elem.setAttribute("transform",o)}}return svgedit.transformlist.removeElementFromListMap(this.elem),e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this),!0},svgedit.history.ChangeElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.BatchCommand=function(e){this.text=e||"Batch Command",this.stack=[]},svgedit.history.BatchCommand.type=function(){return"svgedit.history.BatchCommand"},svgedit.history.BatchCommand.prototype.type=svgedit.history.BatchCommand.type,svgedit.history.BatchCommand.prototype.getText=function(){return this.text},svgedit.history.BatchCommand.prototype.apply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);var t,i=this.stack.length;for(t=0;i>t;++t)this.stack[t].apply(e);e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.BatchCommand.prototype.unapply=function(e){e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this);var t;for(t=this.stack.length-1;t>=0;t--)this.stack[t].unapply(e);e&&e.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.BatchCommand.prototype.elements=function(){for(var e=[],t=this.stack.length;t--;)for(var i=this.stack[t].elements(),n=i.length;n--;)-1==e.indexOf(i[n])&&e.push(i[n]);return e},svgedit.history.BatchCommand.prototype.addSubCommand=function(e){this.stack.push(e)},svgedit.history.BatchCommand.prototype.isEmpty=function(){return 0===this.stack.length},svgedit.history.UndoManager=function(e){this.handler_=e||null,this.undoStackPointer=0,this.undoStack=[],this.undoChangeStackPointer=-1,this.undoableChangeStack=[]},svgedit.history.UndoManager.prototype.resetUndoStack=function(){this.undoStack=[],this.undoStackPointer=0},svgedit.history.UndoManager.prototype.getUndoStackSize=function(){return this.undoStackPointer},svgedit.history.UndoManager.prototype.getRedoStackSize=function(){return this.undoStack.length-this.undoStackPointer},svgedit.history.UndoManager.prototype.getNextUndoCommandText=function(){return this.undoStackPointer>0?this.undoStack[this.undoStackPointer-1].getText():""},svgedit.history.UndoManager.prototype.getNextRedoCommandText=function(){return this.undoStackPointer<this.undoStack.length?this.undoStack[this.undoStackPointer].getText():""},svgedit.history.UndoManager.prototype.undo=function(){if(this.undoStackPointer>0){var e=this.undoStack[--this.undoStackPointer];e.unapply(this.handler_)}},svgedit.history.UndoManager.prototype.redo=function(){if(this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0){var e=this.undoStack[this.undoStackPointer++];e.apply(this.handler_)}},svgedit.history.UndoManager.prototype.addCommandToHistory=function(e){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&(this.undoStack=this.undoStack.splice(0,this.undoStackPointer)),this.undoStack.push(e),this.undoStackPointer=this.undoStack.length},svgedit.history.UndoManager.prototype.beginUndoableChange=function(e,t){for(var i=++this.undoChangeStackPointer,n=t.length,r=new Array(n),a=new Array(n);n--;){var s=t[n];null!=s&&(a[n]=s,r[n]=s.getAttribute(e))}this.undoableChangeStack[i]={attrName:e,oldValues:r,elements:a}},svgedit.history.UndoManager.prototype.finishUndoableChange=function(){for(var e=this.undoChangeStackPointer--,t=this.undoableChangeStack[e],i=t.elements.length,n=t.attrName,r=new svgedit.history.BatchCommand("Change "+n);i--;){var a=t.elements[i];if(null!=a){var s={};s[n]=t.oldValues[i],s[n]!=a.getAttribute(n)&&r.addSubCommand(new svgedit.history.ChangeElementCommand(a,s,n))}}return this.undoableChangeStack[e]=null,r}}();var svgedit=svgedit||{};!function(){"use strict";svgedit.coords||(svgedit.coords={});var e=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],t=null;svgedit.coords.init=function(e){t=e},svgedit.coords.remapElement=function(i,n,r){var a,s,o=function(e,t){return svgedit.math.transformPoint(e,t,r)},l=function(e){return r.a*e},u=function(e){return r.d*e},c=t.getGridSnapping()&&"svg"===i.parentNode.parentNode.localName,d=function(){var e;if(c)for(e in n)n[e]=svgedit.utilities.snapToGrid(n[e]);svgedit.utilities.assignAttributes(i,n,1e3,!0)},h=svgedit.utilities.getBBox(i);for(a=0;2>a;a++){s=0===a?"fill":"stroke";var p=i.getAttribute(s);if(p&&0===p.indexOf("url(")&&(r.a<0||r.d<0)){var f=svgedit.utilities.getRefElem(p),g=f.cloneNode(!0);if(r.a<0){var m=g.getAttribute("x1"),v=g.getAttribute("x2");g.setAttribute("x1",-(m-1)),g.setAttribute("x2",-(v-1))}if(r.d<0){var y=g.getAttribute("y1"),b=g.getAttribute("y2");g.setAttribute("y1",-(y-1)),g.setAttribute("y2",-(b-1))}g.id=t.getDrawing().getNextId(),svgedit.utilities.findDefs().appendChild(g),i.setAttribute(s,"url(#"+g.id+")")}}var _,x,S=i.tagName;if("g"===S||"text"===S||"tspan"==S||"use"===S)if(1!=r.a||0!=r.b||0!=r.c||1!=r.d||0==r.e&&0==r.f)_=svgedit.transformlist.getTransformList(i),x=svgroot.createSVGTransform(),x.setMatrix(svgedit.math.matrixMultiply(svgedit.math.transformListToTransform(_).matrix,r)),_.clear(),_.appendItem(x);else{var w=svgedit.math.transformListToTransform(i).matrix,C=svgedit.math.matrixMultiply(w.inverse(),r,w);n.x=parseFloat(n.x)+C.e,n.y=parseFloat(n.y)+C.f}var k,A,P,T,E;switch(S){case"foreignObject":case"rect":case"image":"image"===S&&(r.a<0||r.d<0)?(_=svgedit.transformlist.getTransformList(i),x=svgroot.createSVGTransform(),x.setMatrix(svgedit.math.matrixMultiply(svgedit.math.transformListToTransform(_).matrix,r)),_.clear(),_.appendItem(x)):(P=o(n.x,n.y),n.width=l(n.width),n.height=u(n.height),n.x=P.x+Math.min(0,n.width),n.y=P.y+Math.min(0,n.height),n.width=Math.abs(n.width),n.height=Math.abs(n.height)),d();break;case"ellipse":k=o(n.cx,n.cy),n.cx=k.x,n.cy=k.y,n.rx=l(n.rx),n.ry=u(n.ry),n.rx=Math.abs(n.rx),n.ry=Math.abs(n.ry),d();break;case"circle":k=o(n.cx,n.cy),n.cx=k.x,n.cy=k.y;var G=svgedit.math.transformBox(h.x,h.y,h.width,h.height,r),N=G.tr.x-G.tl.x,L=G.bl.y-G.tl.y;n.r=Math.min(N/2,L/2),n.r&&(n.r=Math.abs(n.r)),d();break;case"line":P=o(n.x1,n.y1),T=o(n.x2,n.y2),n.x1=P.x,n.y1=P.y,n.x2=T.x,n.y2=T.y;case"text":case"tspan":case"use":d();break;case"g":var I=$(i).data("gsvg");I&&svgedit.utilities.assignAttributes(I,n,1e3,!0);break;case"polyline":case"polygon":for(E=n.points.length,a=0;E>a;++a)A=n.points[a],A=o(A.x,A.y),n.points[a].x=A.x,n.points[a].y=A.y;E=n.points.length;var M="";for(a=0;E>a;++a)A=n.points[a],M+=A.x+","+A.y+" ";i.setAttribute("points",M);break;case"path":var V,O=i.pathSegList;for(E=O.numberOfItems,n.d=[],a=0;E>a;++a)V=O.getItem(a),n.d[a]={type:V.pathSegType,x:V.x,y:V.y,x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,r1:V.r1,r2:V.r2,angle:V.angle,largeArcFlag:V.largeArcFlag,sweepFlag:V.sweepFlag};E=n.d.length;var j=n.d[0],R=o(j.x,j.y);for(n.d[0].x=R.x,n.d[0].y=R.y,a=1;E>a;++a)if(V=n.d[a],s=V.type,s%2==0){var B=void 0!=V.x?V.x:R.x,D=void 0!=V.y?V.y:R.y;A=o(B,D),P=o(V.x1,V.y1),T=o(V.x2,V.y2),V.x=A.x,V.y=A.y,V.x1=P.x,V.y1=P.y,V.x2=T.x,V.y2=T.y,V.r1=l(V.r1),V.r2=u(V.r2)}else V.x=l(V.x),V.y=u(V.y),V.x1=l(V.x1),V.y1=u(V.y1),V.x2=l(V.x2),V.y2=u(V.y2),V.r1=l(V.r1),V.r2=u(V.r2);var F="";for(E=n.d.length,a=0;E>a;++a)switch(V=n.d[a],s=V.type,F+=e[s],s){case 13:case 12:F+=V.x+" ";break;case 15:case 14:F+=V.y+" ";break;case 3:case 5:case 19:case 2:case 4:case 18:F+=V.x+","+V.y+" ";break;case 7:case 6:F+=V.x1+","+V.y1+" "+V.x2+","+V.y2+" "+V.x+","+V.y+" ";break;case 9:case 8:F+=V.x1+","+V.y1+" "+V.x+","+V.y+" ";break;case 11:case 10:F+=V.r1+","+V.r2+" "+V.angle+" "+ +V.largeArcFlag+" "+ +V.sweepFlag+" "+V.x+","+V.y+" ";break;case 17:case 16:F+=V.x2+","+V.y2+" "+V.x+","+V.y+" "}i.setAttribute("d",F)}}}();var svgedit=svgedit||{};!function(){svgedit.recalculate||(svgedit.recalculate={});var e,t=svgedit.NS;svgedit.recalculate.init=function(t){e=t},svgedit.recalculate.updateClipPath=function(t,i,n){var r=getRefElem(t).firstChild,a=svgedit.transformlist.getTransformList(r),s=e.getSVGRoot().createSVGTransform();s.setTranslate(i,n),a.appendItem(s),svgedit.recalculate.recalculateDimensions(r)},svgedit.recalculate.recalculateDimensions=function(i){if(null==i)return null;if("svg"==i.nodeName&&navigator.userAgent.indexOf("Firefox/20")>=0)return null;var n,r=e.getSVGRoot(),a=svgedit.transformlist.getTransformList(i);if(a&&a.numberOfItems>0){for(n=a.numberOfItems;n--;){var s=a.getItem(n);0===s.type?a.removeItem(n):1===s.type?svgedit.math.isIdentity(s.matrix)&&a.removeItem(n):4===s.type&&0===s.angle&&a.removeItem(n)}if(1===a.numberOfItems&&svgedit.utilities.getRotationAngle(i))return null}if(!a||0==a.numberOfItems)return i.setAttribute("transform",""),i.removeAttribute("transform"),null;if(a){n=a.numberOfItems;for(var o=[];n--;){var s=a.getItem(n);1===s.type?o.push([s.matrix,n]):o.length&&(o=[])}if(2===o.length){var l=r.createSVGTransformFromMatrix(svgedit.math.matrixMultiply(o[1][0],o[0][0]));a.removeItem(o[0][1]),a.removeItem(o[1][1]),a.insertItemBefore(l,o[1][1])}if(n=a.numberOfItems,n>=2&&1===a.getItem(n-2).type&&2===a.getItem(n-1).type){var u=r.createSVGTransform(),c=svgedit.math.matrixMultiply(a.getItem(n-2).matrix,a.getItem(n-1).matrix);u.setMatrix(c),a.removeItem(n-2),a.removeItem(n-2),a.appendItem(u)}}switch(i.tagName){case"line":case"polyline":case"polygon":case"path":break;default:if(1===a.numberOfItems&&1===a.getItem(0).type||2===a.numberOfItems&&1===a.getItem(0).type&&4===a.getItem(0).type)return null}var d=$(i).data("gsvg"),h=new svgedit.history.BatchCommand("Transform"),p={},f=null,g=[];switch(i.tagName){case"line":g=["x1","y1","x2","y2"];break;case"circle":g=["cx","cy","r"];break;case"ellipse":g=["cx","cy","rx","ry"];break;case"foreignObject":case"rect":case"image":g=["width","height","x","y"];break;case"use":case"text":case"tspan":g=["x","y"];break;case"polygon":case"polyline":f={},f.points=i.getAttribute("points");var m=i.points,v=m.numberOfItems;p.points=new Array(v);var y;for(y=0;v>y;++y){var b=m.getItem(y);p.points[y]={x:b.x,y:b.y}}break;case"path":f={},f.d=i.getAttribute("d"),p.d=i.getAttribute("d")}if(g.length?(p=$(i).attr(g),$.each(p,function(e,t){p[e]=svgedit.units.convertToNum(e,t)})):d&&(p={x:$(d).attr("x")||0,y:$(d).attr("y")||0}),null==f&&(f=$.extend(!0,{},p),$.each(f,function(e,t){f[e]=svgedit.units.convertToNum(e,t)})),f.transform=e.getStartTransform()||"","g"==i.tagName&&!d||"a"==i.tagName){var _=svgedit.utilities.getBBox(i),x={x:_.x+_.width/2,y:_.y+_.height/2},S=svgedit.math.transformPoint(_.x+_.width/2,_.y+_.height/2,svgedit.math.transformListToTransform(a).matrix),c=r.createSVGMatrix(),w=svgedit.utilities.getRotationAngle(i);if(w){var C=w*Math.PI/180;if(Math.abs(C)>1e-10)var k=Math.sin(C)/(1-Math.cos(C));else var k=2/C;var y;for(y=0;y<a.numberOfItems;++y){var s=a.getItem(y);if(4==s.type){var A=s.matrix;x.y=(k*A.e+A.f)/2,x.x=(A.e-k*A.f)/2,a.removeItem(y);break}}}var P=0,T=0,E=0,G=a.numberOfItems;if(G)var N=a.getItem(0).matrix;if(G>=3&&3==a.getItem(G-2).type&&2==a.getItem(G-3).type&&2==a.getItem(G-1).type){E=3;for(var L=a.getItem(G-3).matrix,I=a.getItem(G-2).matrix,M=a.getItem(G-1).matrix,V=i.childNodes,O=V.length;O--;){var j=V.item(O);if(P=0,T=0,1==j.nodeType){var R=svgedit.transformlist.getTransformList(j);if(!R)continue;var c=svgedit.math.transformListToTransform(R).matrix,B=svgedit.utilities.getRotationAngle(j),D=e.getStartTransform(),F=[];if(e.setStartTransform(j.getAttribute("transform")),B||svgedit.math.hasMatrixTransform(R)){var H=r.createSVGTransform();H.setMatrix(svgedit.math.matrixMultiply(L,I,M,c)),R.clear(),R.appendItem(H),F.push(H)}else{var U=svgedit.math.matrixMultiply(c.inverse(),M,c),z=r.createSVGMatrix();z.e=-U.e,z.f=-U.f;var q=svgedit.math.matrixMultiply(z.inverse(),c.inverse(),L,I,M,c,U.inverse()),W=r.createSVGTransform(),X=r.createSVGTransform(),Y=r.createSVGTransform();W.setTranslate(U.e,U.f),X.setScale(q.a,q.d),Y.setTranslate(z.e,z.f),R.appendItem(Y),R.appendItem(X),R.appendItem(W),F.push(Y),F.push(X),F.push(W)}h.addSubCommand(svgedit.recalculate.recalculateDimensions(j)),e.setStartTransform(D)}}a.removeItem(G-1),a.removeItem(G-2),a.removeItem(G-3)}else if(G>=3&&1==a.getItem(G-1).type){E=3,c=svgedit.math.transformListToTransform(a).matrix;var H=r.createSVGTransform();H.setMatrix(c),a.clear(),a.appendItem(H)}else if((1==G||G>1&&3!=a.getItem(1).type)&&2==a.getItem(0).type){E=2;var Q=svgedit.math.transformListToTransform(a).matrix;a.removeItem(0);var K=svgedit.math.transformListToTransform(a).matrix.inverse(),Z=svgedit.math.matrixMultiply(K,Q);if(P=Z.e,T=Z.f,0!=P||0!=T){for(var V=i.childNodes,O=V.length,J=[];O--;){var j=V.item(O);if(1==j.nodeType){if(j.getAttribute("clip-path")){var ee=j.getAttribute("clip-path");-1===J.indexOf(ee)&&(svgedit.recalculate.updateClipPath(ee,P,T),J.push(ee))}var D=e.getStartTransform();e.setStartTransform(j.getAttribute("transform"));var R=svgedit.transformlist.getTransformList(j);if(R){var te=r.createSVGTransform();te.setTranslate(P,T),R.numberOfItems?R.insertItemBefore(te,0):R.appendItem(te),h.addSubCommand(svgedit.recalculate.recalculateDimensions(j));for(var ie=i.getElementsByTagNameNS(t.SVG,"use"),ne="#"+j.id,re=ie.length;re--;){var ae=ie.item(re);if(ne==svgedit.utilities.getHref(ae)){var se=r.createSVGTransform();se.setTranslate(-P,-T),svgedit.transformlist.getTransformList(ae).insertItemBefore(se,0),h.addSubCommand(svgedit.recalculate.recalculateDimensions(ae))}}e.setStartTransform(D)}}}J=[],e.setStartTransform(D)}}else{if(1!=G||1!=a.getItem(0).type||w){if(w){var oe=r.createSVGTransform();oe.setRotate(w,S.x,S.y),a.numberOfItems?a.insertItemBefore(oe,0):a.appendItem(oe)}return 0==a.numberOfItems&&i.removeAttribute("transform"),null}E=1;for(var c=a.getItem(0).matrix,V=i.childNodes,O=V.length;O--;){var j=V.item(O);if(1==j.nodeType){var D=e.getStartTransform();e.setStartTransform(j.getAttribute("transform"));var R=svgedit.transformlist.getTransformList(j);if(!R)continue;var le=svgedit.math.matrixMultiply(c,svgedit.math.transformListToTransform(R).matrix),ue=r.createSVGTransform();ue.setMatrix(le),R.clear(),R.appendItem(ue,0),h.addSubCommand(svgedit.recalculate.recalculateDimensions(j)),e.setStartTransform(D);var ce=j.getAttribute("stroke-width");if("none"!==j.getAttribute("stroke")&&!isNaN(ce)){var de=(Math.abs(le.a)+Math.abs(le.d))/2;j.setAttribute("stroke-width",ce*de)}}}a.clear()}if(2==E){if(w){S={x:x.x+N.e,y:x.y+N.f};var oe=r.createSVGTransform();oe.setRotate(w,S.x,S.y),a.numberOfItems?a.insertItemBefore(oe,0):a.appendItem(oe)}}else if(3==E){var c=svgedit.math.transformListToTransform(a).matrix,he=r.createSVGTransform();he.setRotate(w,x.x,x.y);var pe=he.matrix,fe=r.createSVGTransform();fe.setRotate(w,S.x,S.y);var ge=fe.matrix.inverse(),me=c.inverse(),ve=svgedit.math.matrixMultiply(me,ge,pe,c);if(P=ve.e,T=ve.f,0!=P||0!=T)for(var V=i.childNodes,O=V.length;O--;){var j=V.item(O);if(1==j.nodeType){var D=e.getStartTransform();e.setStartTransform(j.getAttribute("transform"));var R=svgedit.transformlist.getTransformList(j),te=r.createSVGTransform();te.setTranslate(P,T),R.numberOfItems?R.insertItemBefore(te,0):R.appendItem(te),h.addSubCommand(svgedit.recalculate.recalculateDimensions(j)),e.setStartTransform(D)}}w&&(a.numberOfItems?a.insertItemBefore(fe,0):a.appendItem(fe))}}else{var _=svgedit.utilities.getBBox(i);if(!_&&"path"!=i.tagName)return null;var c=r.createSVGMatrix(),B=svgedit.utilities.getRotationAngle(i);if(B){var x={x:_.x+_.width/2,y:_.y+_.height/2},S=svgedit.math.transformPoint(_.x+_.width/2,_.y+_.height/2,svgedit.math.transformListToTransform(a).matrix),C=B*Math.PI/180;if(Math.abs(C)>1e-10)var k=Math.sin(C)/(1-Math.cos(C));else var k=2/C;for(var y=0;y<a.numberOfItems;++y){var s=a.getItem(y);if(4==s.type){var A=s.matrix;x.y=(k*A.e+A.f)/2,x.x=(A.e-k*A.f)/2,a.removeItem(y);break}}}var E=0,G=a.numberOfItems;if(!svgedit.browser.isWebkit()){var ye=i.getAttribute("fill");if(ye&&0===ye.indexOf("url(")){var be=getRefElem(ye),_e="pattern";be.tagName!==_e&&(_e="gradient");var xe=be.getAttribute(_e+"Units");if("userSpaceOnUse"===xe){c=svgedit.math.transformListToTransform(a).matrix;var Se=svgedit.transformlist.getTransformList(be),we=svgedit.math.transformListToTransform(Se).matrix;c=svgedit.math.matrixMultiply(c,we);var Ce="matrix("+[c.a,c.b,c.c,c.d,c.e,c.f].join(",")+")";be.setAttribute(_e+"Transform",Ce)}}}if(G>=3&&3==a.getItem(G-2).type&&2==a.getItem(G-3).type&&2==a.getItem(G-1).type)E=3,c=svgedit.math.transformListToTransform(a,G-3,G-1).matrix,a.removeItem(G-1),a.removeItem(G-2),a.removeItem(G-3);else if(4==G&&1==a.getItem(G-1).type){E=3,c=svgedit.math.transformListToTransform(a).matrix;var H=r.createSVGTransform();H.setMatrix(c),a.clear(),a.appendItem(H),c=r.createSVGMatrix()}else if((1==G||G>1&&3!=a.getItem(1).type)&&2==a.getItem(0).type){E=2;var ke=a.getItem(0).matrix,Ae=svgedit.math.transformListToTransform(a,1).matrix,Pe=Ae.inverse();c=svgedit.math.matrixMultiply(Pe,ke,Ae),a.removeItem(0)}else{if(1!=G||1!=a.getItem(0).type||B){if(E=4,B){var oe=r.createSVGTransform();oe.setRotate(B,S.x,S.y),a.numberOfItems?a.insertItemBefore(oe,0):a.appendItem(oe)}return 0==a.numberOfItems&&i.removeAttribute("transform"),null}switch(c=svgedit.math.transformListToTransform(a).matrix,i.tagName){case"line":p=$(i).attr(["x1","y1","x2","y2"]);case"polyline":case"polygon":if(p.points=i.getAttribute("points"),p.points){var m=i.points,v=m.numberOfItems;p.points=new Array(v);for(var y=0;v>y;++y){var b=m.getItem(y);p.points[y]={x:b.x,y:b.y}}}case"path":p.d=i.getAttribute("d"),E=1,a.clear()}}if((1==E||2==E||3==E)&&svgedit.coords.remapElement(i,p,c),2==E){if(B){svgedit.math.hasMatrixTransform(a)||(S={x:x.x+c.e,y:x.y+c.f});var oe=r.createSVGTransform();oe.setRotate(B,S.x,S.y),a.numberOfItems?a.insertItemBefore(oe,0):a.appendItem(oe)}if("text"==i.tagName)for(var V=i.childNodes,O=V.length;O--;){var j=V.item(O);if("tspan"==j.tagName){var Te={x:$(j).attr("x")||0,y:$(j).attr("y")||0};svgedit.coords.remapElement(j,Te,c)}}}else if(3==E&&B){var c=svgedit.math.transformListToTransform(a).matrix,he=r.createSVGTransform();he.setRotate(B,x.x,x.y);var pe=he.matrix,fe=r.createSVGTransform();fe.setRotate(B,S.x,S.y);var ge=fe.matrix.inverse(),me=c.inverse(),ve=svgedit.math.matrixMultiply(me,ge,pe,c);svgedit.coords.remapElement(i,p,ve),B&&(a.numberOfItems?a.insertItemBefore(fe,0):a.appendItem(fe))}}return 0==a.numberOfItems&&i.removeAttribute("transform"),h.addSubCommand(new svgedit.history.ChangeElementCommand(i,f)),h}}(),function(){"use strict";svgedit.select||(svgedit.select={});var e,t,i,n=svgedit.browser.isTouch()?10:4;svgedit.select.Selector=function(t,i){this.id=t,this.selectedElement=i,this.locked=!0,this.selectorGroup=e.createSVGElement({element:"g",attr:{id:"selectorGroup"+this.id}}),this.selectorRect=this.selectorGroup.appendChild(e.createSVGElement({element:"path",attr:{id:"selectedBox"+this.id,fill:"none",stroke:"#22C","stroke-width":"1","stroke-dasharray":"5,5",style:"pointer-events:none"}})),this.gripCoords={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null},this.reset(this.selectedElement)},svgedit.select.Selector.prototype.reset=function(e){this.locked=!0,this.selectedElement=e,this.resize(),this.selectorGroup.setAttribute("display","inline")},svgedit.select.Selector.prototype.updateGripCursors=function(e){var t,n=[],r=Math.round(e/45);0>r&&(r+=8);for(t in i.selectorGrips)n.push(t);for(;r>0;)n.push(n.shift()),r--;var a=0;for(t in i.selectorGrips)i.selectorGrips[t].setAttribute("style","cursor:"+n[a]+"-resize"),a++},svgedit.select.Selector.prototype.showGrips=function(e){var t=e?"inline":"none";i.selectorGripsGroup.setAttribute("display",t);var n=this.selectedElement;this.hasGrips=e,n&&e&&(this.selectorGroup.appendChild(i.selectorGripsGroup),this.updateGripCursors(svgedit.utilities.getRotationAngle(n)))},svgedit.select.Selector.prototype.resize=function(){var t=this.selectorRect,r=i,a=r.selectorGrips,s=this.selectedElement,o=s.getAttribute("stroke-width"),l=e.currentZoom(),u=1/l;"none"===s.getAttribute("stroke")||isNaN(o)||(u+=o/2);var c=s.tagName;"text"===c&&(u+=2/l);var d=svgedit.transformlist.getTransformList(s),h=svgedit.math.transformListToTransform(d).matrix;h.e*=l,h.f*=l;var p=svgedit.utilities.getBBox(s);if("g"===c&&!$.data(s,"gsvg")){var f=e.getStrokedBBox(s.childNodes);f&&(p=f)}var g=p.x,m=p.y,v=p.width,y=p.height;p={x:g,y:m,width:v,height:y},u*=l;var b=svgedit.math.transformBox(g*l,m*l,v*l,y*l,h),_=b.aabox,x=_.x-u,S=_.y-u,w=_.width+2*u,C=_.height+2*u,k=x+w/2,A=S+C/2,P=svgedit.utilities.getRotationAngle(s);if(P){var T=e.svgRoot().createSVGTransform();T.setRotate(-P,k,A);var E=T.matrix;b.tl=svgedit.math.transformPoint(b.tl.x,b.tl.y,E),b.tr=svgedit.math.transformPoint(b.tr.x,b.tr.y,E),b.bl=svgedit.math.transformPoint(b.bl.x,b.bl.y,E),b.br=svgedit.math.transformPoint(b.br.x,b.br.y,E);var G=b.tl,N=G.x,L=G.y,I=G.x,M=G.y,V=Math.min,O=Math.max;N=V(N,V(b.tr.x,V(b.bl.x,b.br.x)))-u,L=V(L,V(b.tr.y,V(b.bl.y,b.br.y)))-u,I=O(I,O(b.tr.x,O(b.bl.x,b.br.x)))+u,M=O(M,O(b.tr.y,O(b.bl.y,b.br.y)))+u,x=N,S=L,w=I-N,C=M-L}var j="M"+x+","+S+" L"+(x+w)+","+S+" "+(x+w)+","+(S+C)+" "+x+","+(S+C)+"z";t.setAttribute("d",j);var R=P?"rotate("+[P,k,A].join(",")+")":"";this.selectorGroup.setAttribute("transform",R),this.gripCoords={nw:[x,S],ne:[x+w,S],sw:[x,S+C],se:[x+w,S+C],n:[x+w/2,S],w:[x,S+C/2],e:[x+w,S+C/2],s:[x+w/2,S+C]};var B;for(B in this.gripCoords){var D=this.gripCoords[B];a[B].setAttribute("cx",D[0]),a[B].setAttribute("cy",D[1])}r.rotateGripConnector.setAttribute("x1",x+w/2),r.rotateGripConnector.setAttribute("y1",S),r.rotateGripConnector.setAttribute("x2",x+w/2),r.rotateGripConnector.setAttribute("y2",S-5*n),r.rotateGrip.setAttribute("cx",x+w/2),r.rotateGrip.setAttribute("cy",S-5*n)},svgedit.select.SelectorManager=function(){this.selectorParentGroup=null,this.rubberBandBox=null,this.selectors=[],this.selectorMap={},this.selectorGrips={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null},this.selectorGripsGroup=null,this.rotateGripConnector=null,this.rotateGrip=null,this.initGroup()},svgedit.select.SelectorManager.prototype.initGroup=function(){this.selectorParentGroup&&this.selectorParentGroup.parentNode&&this.selectorParentGroup.parentNode.removeChild(this.selectorParentGroup),this.selectorParentGroup=e.createSVGElement({element:"g",attr:{id:"selectorParentGroup"}}),this.selectorGripsGroup=e.createSVGElement({element:"g",attr:{display:"none"}}),this.selectorParentGroup.appendChild(this.selectorGripsGroup),e.svgRoot().appendChild(this.selectorParentGroup),this.selectorMap={},this.selectors=[],this.rubberBandBox=null;var i;for(i in this.selectorGrips){var r=e.createSVGElement({element:"circle",attr:{id:"selectorGrip_resize_"+i,fill:"#22C",r:n,style:"cursor:"+i+"-resize","stroke-width":2,"pointer-events":"all"}});$.data(r,"dir",i),$.data(r,"type","resize"),this.selectorGrips[i]=this.selectorGripsGroup.appendChild(r)}if(this.rotateGripConnector=this.selectorGripsGroup.appendChild(e.createSVGElement({element:"line",attr:{id:"selectorGrip_rotateconnector",stroke:"#22C","stroke-width":"1"}})),this.rotateGrip=this.selectorGripsGroup.appendChild(e.createSVGElement({element:"circle",attr:{id:"selectorGrip_rotate",fill:"lime",r:n,stroke:"#22C","stroke-width":2,style:"cursor:url("+t.imgPath+"rotate.png) 12 12, auto;"}})),$.data(this.rotateGrip,"type","rotate"),!$("#canvasBackground").length){var a=t.dimensions,s=e.createSVGElement({element:"svg",attr:{id:"canvasBackground",width:a[0],height:a[1],x:0,y:0,overflow:svgedit.browser.isWebkit()?"none":"visible",style:"pointer-events:none"}}),o=e.createSVGElement({element:"rect",attr:{width:"100%",height:"100%",x:0,y:0,"stroke-width":1,stroke:"#000",fill:"#FFF",style:"pointer-events:none"}});s.appendChild(o),e.svgRoot().insertBefore(s,e.svgContent())}},svgedit.select.SelectorManager.prototype.requestSelector=function(e){if(null==e)return null;var t,i=this.selectors.length;if("object"==typeof this.selectorMap[e.id])return this.selectorMap[e.id].locked=!0,this.selectorMap[e.id];
for(t=0;i>t;++t)if(this.selectors[t]&&!this.selectors[t].locked)return this.selectors[t].locked=!0,this.selectors[t].reset(e),this.selectorMap[e.id]=this.selectors[t],this.selectors[t];return this.selectors[i]=new svgedit.select.Selector(i,e),this.selectorParentGroup.appendChild(this.selectors[i].selectorGroup),this.selectorMap[e.id]=this.selectors[i],this.selectors[i]},svgedit.select.SelectorManager.prototype.releaseSelector=function(e){if(null!=e){var t,i=this.selectors.length,n=this.selectorMap[e.id];for(n.locked||console.log("WARNING! selector was released but was already unlocked"),t=0;i>t;++t)if(this.selectors[t]&&this.selectors[t]==n){delete this.selectorMap[e.id],n.locked=!1,n.selectedElement=null,n.showGrips(!1);try{n.selectorGroup.setAttribute("display","none")}catch(r){}break}}},svgedit.select.SelectorManager.prototype.getRubberBandBox=function(){return this.rubberBandBox||(this.rubberBandBox=this.selectorParentGroup.appendChild(e.createSVGElement({element:"rect",attr:{id:"selectorRubberBand",fill:"#22C","fill-opacity":.15,stroke:"#22C","stroke-width":.5,display:"none",style:"pointer-events:none"}}))),this.rubberBandBox},svgedit.select.init=function(n,r){t=n,e=r,i=new svgedit.select.SelectorManager},svgedit.select.getSelectorManager=function(){return i}}(),function(){"use strict";svgedit.draw||(svgedit.draw={});var e=svgedit.NS,t="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use".split(","),i={LET_DOCUMENT_DECIDE:0,ALWAYS_RANDOMIZE:1,NEVER_RANDOMIZE:2},n=i.LET_DOCUMENT_DECIDE;svgedit.draw.Layer=function(e,t){this.name_=e,this.group_=t},svgedit.draw.Layer.prototype.getName=function(){return this.name_},svgedit.draw.Layer.prototype.getGroup=function(){return this.group_},svgedit.draw.randomizeIds=function(e,t){n=e===!1?i.NEVER_RANDOMIZE:i.ALWAYS_RANDOMIZE,n!=i.ALWAYS_RANDOMIZE||t.getNonce()?n==i.NEVER_RANDOMIZE&&t.getNonce()&&t.clearNonce():t.setNonce(Math.floor(100001*Math.random()))},svgedit.draw.Drawing=function(t,r){if(!t||!t.tagName||!t.namespaceURI||"svg"!=t.tagName||t.namespaceURI!=e.SVG)throw"Error: svgedit.draw.Drawing instance initialized without a <svg> element";this.svgElem_=t,this.obj_num=0,this.idPrefix=r||"svg_",this.releasedNums=[],this.all_layers=[],this.current_layer=null,this.nonce_="";var a=this.svgElem_.getAttributeNS(e.SE,"nonce");a&&n!=i.NEVER_RANDOMIZE?this.nonce_=a:n==i.ALWAYS_RANDOMIZE&&this.setNonce(Math.floor(100001*Math.random()))},svgedit.draw.Drawing.prototype.getElem_=function(e){return this.svgElem_.querySelector?this.svgElem_.querySelector("#"+e):$(this.svgElem_).find("[id="+e+"]")[0]},svgedit.draw.Drawing.prototype.getSvgElem=function(){return this.svgElem_},svgedit.draw.Drawing.prototype.getNonce=function(){return this.nonce_},svgedit.draw.Drawing.prototype.setNonce=function(t){this.svgElem_.setAttributeNS(e.XMLNS,"xmlns:se",e.SE),this.svgElem_.setAttributeNS(e.SE,"se:nonce",t),this.nonce_=t},svgedit.draw.Drawing.prototype.clearNonce=function(){this.nonce_=""},svgedit.draw.Drawing.prototype.getId=function(){return this.nonce_?this.idPrefix+this.nonce_+"_"+this.obj_num:this.idPrefix+this.obj_num},svgedit.draw.Drawing.prototype.getNextId=function(){var e=this.obj_num,t=!1;this.releasedNums.length>0?(this.obj_num=this.releasedNums.pop(),t=!0):this.obj_num++;for(var i=this.getId();this.getElem_(i);)t&&(this.obj_num=e,t=!1),this.obj_num++,i=this.getId();return t&&(this.obj_num=e),i},svgedit.draw.Drawing.prototype.releaseId=function(e){var t=this.idPrefix+(this.nonce_?this.nonce_+"_":"");if("string"!=typeof e||0!==e.indexOf(t))return!1;var i=parseInt(e.substr(t.length),10);return"number"!=typeof i||0>=i||-1!=this.releasedNums.indexOf(i)?!1:(this.releasedNums.push(i),!0)},svgedit.draw.Drawing.prototype.getNumLayers=function(){return this.all_layers.length},svgedit.draw.Drawing.prototype.hasLayer=function(e){var t;for(t=0;t<this.getNumLayers();t++)if(this.all_layers[t][0]==e)return!0;return!1},svgedit.draw.Drawing.prototype.getLayerName=function(e){return e>=0&&e<this.getNumLayers()?this.all_layers[e][0]:""},svgedit.draw.Drawing.prototype.getCurrentLayer=function(){return this.current_layer},svgedit.draw.Drawing.prototype.getCurrentLayerName=function(){var e;for(e=0;e<this.getNumLayers();++e)if(this.all_layers[e][1]==this.current_layer)return this.getLayerName(e);return""},svgedit.draw.Drawing.prototype.setCurrentLayer=function(e){var t;for(t=0;t<this.getNumLayers();++t)if(e==this.getLayerName(t))return this.current_layer!=this.all_layers[t][1]&&(this.current_layer.setAttribute("style","pointer-events:none"),this.current_layer=this.all_layers[t][1],this.current_layer.setAttribute("style","pointer-events:all")),!0;return!1},svgedit.draw.Drawing.prototype.deleteCurrentLayer=function(){if(this.current_layer&&this.getNumLayers()>1){var e=this.current_layer.parentNode,t=(this.current_layer.nextSibling,e.removeChild(this.current_layer));return this.identifyLayers(),t}return null},svgedit.draw.Drawing.prototype.identifyLayers=function(){this.all_layers=[];var i,n=this.svgElem_.childNodes.length,r=[],a=[],s=null,o=!1;for(i=0;n>i;++i){var l=this.svgElem_.childNodes.item(i);if(l&&1==l.nodeType)if("g"==l.tagName){o=!0;var u=$("title",l).text();!u&&svgedit.browser.isOpera()&&l.querySelectorAll&&(u=$(l.querySelectorAll("title")).text()),u?(a.push(u),this.all_layers.push([u,l]),s=l,svgedit.utilities.walkTree(l,function(e){e.setAttribute("style","pointer-events:inherit")}),s.setAttribute("style","pointer-events:none")):r.push(l)}else if(~t.indexOf(l.nodeName)){svgedit.utilities.getBBox(l);r.push(l)}}var c=this.svgElem_.ownerDocument;if(r.length>0||!o){for(i=1;a.indexOf("Layer "+i)>=0;)i++;var d="Layer "+i;s=c.createElementNS(e.SVG,"g");var h=c.createElementNS(e.SVG,"title");h.textContent=d,s.appendChild(h);var p;for(p=0;p<r.length;++p)s.appendChild(r[p]);this.svgElem_.appendChild(s),this.all_layers.push([d,s])}svgedit.utilities.walkTree(s,function(e){e.setAttribute("style","pointer-events:inherit")}),this.current_layer=s,this.current_layer.setAttribute("style","pointer-events:all")},svgedit.draw.Drawing.prototype.createLayer=function(t){var i=this.svgElem_.ownerDocument,n=i.createElementNS(e.SVG,"g"),r=i.createElementNS(e.SVG,"title");return r.textContent=t,n.appendChild(r),this.svgElem_.appendChild(n),this.identifyLayers(),n},svgedit.draw.Drawing.prototype.getLayerVisibility=function(e){var t,i=null;for(t=0;t<this.getNumLayers();++t)if(this.getLayerName(t)==e){i=this.all_layers[t][1];break}return i?"none"!==i.getAttribute("display"):!1},svgedit.draw.Drawing.prototype.setLayerVisibility=function(e,t){if("boolean"!=typeof t)return null;var i,n=null;for(i=0;i<this.getNumLayers();++i)if(this.getLayerName(i)==e){n=this.all_layers[i][1];break}if(!n)return null;var r=n.getAttribute("display");return r||(r="inline"),n.setAttribute("display",t?"inline":"none"),n},svgedit.draw.Drawing.prototype.getLayerOpacity=function(e){var t;for(t=0;t<this.getNumLayers();++t)if(this.getLayerName(t)==e){var i=this.all_layers[t][1],n=i.getAttribute("opacity");return n||(n="1.0"),parseFloat(n)}return null},svgedit.draw.Drawing.prototype.setLayerOpacity=function(e,t){if(!("number"!=typeof t||0>t||t>1)){var i;for(i=0;i<this.getNumLayers();++i)if(this.getLayerName(i)==e){var n=this.all_layers[i][1];n.setAttribute("opacity",t);break}}}}(),function(){"use strict";svgedit.path||(svgedit.path={});var e=svgedit.NS,t={pathNodeTooltip:"Drag node to move it. Double-click node to change segment type",pathCtrlPtTooltip:"Drag control point to adjust curve properties"},i={2:["x","y"],4:["x","y"],6:["x","y","x1","y1","x2","y2"],8:["x","y","x1","y1"],10:["x","y","r1","r2","angle","largeArcFlag","sweepFlag"],12:["x"],14:["y"],16:["x","y","x2","y2"],18:["x","y"]},n=[],r=!0,a={};svgedit.path.setLinkControlPoints=function(e){r=e},svgedit.path.path=null;var s=null;svgedit.path.init=function(e){s=e,n=[0,"ClosePath"];var t=["Moveto","Lineto","CurvetoCubic","CurvetoQuadratic","Arc","LinetoHorizontal","LinetoVertical","CurvetoCubicSmooth","CurvetoQuadraticSmooth"];$.each(t,function(e,t){n.push(t+"Abs"),n.push(t+"Rel")})},svgedit.path.insertItemBefore=function(e,t,i){var n=e.pathSegList;if(svgedit.browser.supportsPathInsertItemBefore())return void n.insertItemBefore(t,i);var r,a=n.numberOfItems,s=[];for(r=0;a>r;r++){var o=n.getItem(r);s.push(o)}for(n.clear(),r=0;a>r;r++)r==i&&n.appendItem(t),n.appendItem(s[r])},svgedit.path.ptObjToArr=function(e,t){var n,r=i[e],a=r.length,s=[];for(n=0;a>n;n++)s[n]=t[r[n]];return s},svgedit.path.getGripPt=function(e,t){var i={x:t?t.x:e.item.x,y:t?t.y:e.item.y},n=e.path;if(n.matrix){var r=svgedit.math.transformPoint(i.x,i.y,n.matrix);i=r}return i.x*=s.getCurrentZoom(),i.y*=s.getCurrentZoom(),i},svgedit.path.getPointFromGrip=function(e,t){var i={x:e.x,y:e.y};return t.matrix&&(e=svgedit.math.transformPoint(i.x,i.y,t.imatrix),i.x=e.x,i.y=e.y),i.x/=s.getCurrentZoom(),i.y/=s.getCurrentZoom(),i},svgedit.path.addPointGrip=function(i,n,r){var a=svgedit.path.getGripContainer(),s=svgedit.utilities.getElem("pathpointgrip_"+i);if(!s){s=document.createElementNS(e.SVG,"circle"),svgedit.utilities.assignAttributes(s,{id:"pathpointgrip_"+i,display:"none",r:4,fill:"#0FF",stroke:"#00F","stroke-width":2,cursor:"move",style:"pointer-events:all","xlink:title":t.pathNodeTooltip}),s=a.appendChild(s);var o=$("#pathpointgrip_"+i);o.dblclick(function(){svgedit.path.path&&svgedit.path.path.setSegType()})}return n&&r&&svgedit.utilities.assignAttributes(s,{cx:n,cy:r,display:"inline"}),s},svgedit.path.getGripContainer=function(){var t=svgedit.utilities.getElem("pathpointgrip_container");if(!t){var i=svgedit.utilities.getElem("selectorParentGroup");t=i.appendChild(document.createElementNS(e.SVG,"g")),t.id="pathpointgrip_container"}return t},svgedit.path.addCtrlGrip=function(i){var n=svgedit.utilities.getElem("ctrlpointgrip_"+i);return n?n:(n=document.createElementNS(e.SVG,"circle"),svgedit.utilities.assignAttributes(n,{id:"ctrlpointgrip_"+i,display:"none",r:4,fill:"#0FF",stroke:"#55F","stroke-width":1,cursor:"move",style:"pointer-events:all","xlink:title":t.pathCtrlPtTooltip}),svgedit.path.getGripContainer().appendChild(n),n)},svgedit.path.getCtrlLine=function(t){var i=svgedit.utilities.getElem("ctrlLine_"+t);return i?i:(i=document.createElementNS(e.SVG,"line"),svgedit.utilities.assignAttributes(i,{id:"ctrlLine_"+t,stroke:"#555","stroke-width":1,style:"pointer-events:none"}),svgedit.path.getGripContainer().appendChild(i),i)},svgedit.path.getPointGrip=function(e,t){var i=e.index,n=svgedit.path.addPointGrip(i);if(t){var r=svgedit.path.getGripPt(e);svgedit.utilities.assignAttributes(n,{cx:r.x,cy:r.y,display:"inline"})}return n},svgedit.path.getControlPoints=function(e){var t=e.item,i=e.index;if(!("x1"in t&&"x2"in t))return null;var n,r={},a=(svgedit.path.getGripContainer(),svgedit.path.path.segs[i-1].item),s=[a,t];for(n=1;3>n;n++){var o=i+"c"+n,l=r["c"+n+"_line"]=svgedit.path.getCtrlLine(o),u=svgedit.path.getGripPt(e,{x:t["x"+n],y:t["y"+n]}),c=svgedit.path.getGripPt(e,{x:s[n-1].x,y:s[n-1].y});svgedit.utilities.assignAttributes(l,{x1:u.x,y1:u.y,x2:c.x,y2:c.y,display:"inline"}),r["c"+n+"_line"]=l;var d=r["c"+n]=svgedit.path.addCtrlGrip(o);svgedit.utilities.assignAttributes(d,{cx:u.x,cy:u.y,display:"inline"}),r["c"+n]=d}return r},svgedit.path.replacePathSeg=function(e,t,i,r){var a=r||svgedit.path.path.elem,s="createSVGPathSeg"+n[e],o=a[s].apply(a,i);if(svgedit.browser.supportsPathReplaceItem())a.pathSegList.replaceItem(o,t);else{var l,u=a.pathSegList,c=u.numberOfItems,d=[];for(l=0;c>l;l++){var h=u.getItem(l);d.push(h)}for(u.clear(),l=0;c>l;l++)l==t?u.appendItem(o):u.appendItem(d[l])}},svgedit.path.getSegSelector=function(t,i){var n=t.index,r=svgedit.utilities.getElem("segline_"+n);if(!r){var a=svgedit.path.getGripContainer();r=document.createElementNS(e.SVG,"path"),svgedit.utilities.assignAttributes(r,{id:"segline_"+n,display:"none",fill:"none",stroke:"#0FF","stroke-width":2,style:"pointer-events:none",d:"M0,0 0,0"}),a.appendChild(r)}if(i){var s=t.prev;if(!s)return r.setAttribute("display","none"),r;var o=svgedit.path.getGripPt(s);svgedit.path.replacePathSeg(2,0,[o.x,o.y],r);var l,u=svgedit.path.ptObjToArr(t.type,t.item,!0);for(l=0;l<u.length;l+=2)o=svgedit.path.getGripPt(t,{x:u[l],y:u[l+1]}),u[l]=o.x,u[l+1]=o.y;svgedit.path.replacePathSeg(t.type,1,u,r)}return r},svgedit.path.smoothControlPoints=function(e,t,i){var n=e.x-i.x,r=e.y-i.y,a=t.x-i.x,o=t.y-i.y;if(!(0==n&&0==r||0==a&&0==o)){var l=Math.atan2(r,n),u=Math.atan2(o,a),c=Math.sqrt(n*n+r*r),d=Math.sqrt(a*a+o*o),h=s.getSVGRoot().createSVGPoint(),p=s.getSVGRoot().createSVGPoint();0>l&&(l+=2*Math.PI),0>u&&(u+=2*Math.PI);var f,g,m=Math.abs(l-u),v=Math.abs(Math.PI-m)/2;return l-u>0?(f=m<Math.PI?l+v:l-v,g=m<Math.PI?u-v:u+v):(f=m<Math.PI?l-v:l+v,g=m<Math.PI?u+v:u-v),h.x=c*Math.cos(f)+i.x,h.y=c*Math.sin(f)+i.y,p.x=d*Math.cos(g)+i.x,p.y=d*Math.sin(g)+i.y,[h,p]}return void 0},svgedit.path.Segment=function(e,t){this.selected=!1,this.index=e,this.item=t,this.type=t.pathSegType,this.ctrlpts=[],this.ptgrip=null,this.segsel=null},svgedit.path.Segment.prototype.showCtrlPts=function(e){var t;for(t in this.ctrlpts)this.ctrlpts.hasOwnProperty(t)&&this.ctrlpts[t].setAttribute("display",e?"inline":"none")},svgedit.path.Segment.prototype.selectCtrls=function(e){$("#ctrlpointgrip_"+this.index+"c1, #ctrlpointgrip_"+this.index+"c2").attr("fill",e?"#0FF":"#EEE")},svgedit.path.Segment.prototype.show=function(e){this.ptgrip&&(this.ptgrip.setAttribute("display",e?"inline":"none"),this.segsel.setAttribute("display",e?"inline":"none"),this.showCtrlPts(e))},svgedit.path.Segment.prototype.select=function(e){this.ptgrip&&(this.ptgrip.setAttribute("stroke",e?"#0FF":"#00F"),this.segsel.setAttribute("display",e?"inline":"none"),this.ctrlpts&&this.selectCtrls(e),this.selected=e)},svgedit.path.Segment.prototype.addGrip=function(){this.ptgrip=svgedit.path.getPointGrip(this,!0),this.ctrlpts=svgedit.path.getControlPoints(this,!0),this.segsel=svgedit.path.getSegSelector(this,!0)},svgedit.path.Segment.prototype.update=function(e){if(this.ptgrip){var t=svgedit.path.getGripPt(this);svgedit.utilities.assignAttributes(this.ptgrip,{cx:t.x,cy:t.y}),svgedit.path.getSegSelector(this,!0),this.ctrlpts&&(e&&(this.item=svgedit.path.path.elem.pathSegList.getItem(this.index),this.type=this.item.pathSegType),svgedit.path.getControlPoints(this))}},svgedit.path.Segment.prototype.move=function(e,t){var i,n=this.item,r=$.extend({},n);if(i=this.ctrlpts?[r.x+=e,r.y+=t,r.x1,r.y1,r.x2+=e,r.y2+=t]:[r.x+=e,r.y+=t],svgedit.path.replacePathSeg(this.type,this.index,i),this.next&&this.next.ctrlpts){var a=this.next.item,s=[a.x,a.y,a.x1+=e,a.y1+=t,a.x2,a.y2];svgedit.path.replacePathSeg(this.next.type,this.next.index,s)}if(this.mate){n=this.mate.item;var o=[n.x+=e,n.y+=t];svgedit.path.replacePathSeg(this.mate.type,this.mate.index,o)}this.update(!0),this.next&&this.next.update(!0)},svgedit.path.Segment.prototype.setLinked=function(e){var t,i,n;if(2==e){if(i=1,t=this.next,!t)return;n=this.item}else{if(i=2,t=this.prev,!t)return;n=t.item}var r=t.item,a=$.extend({},r);a["x"+i]=n.x+(n.x-this.item["x"+e]),a["y"+i]=n.y+(n.y-this.item["y"+e]);var s=[a.x,a.y,a.x1,a.y1,a.x2,a.y2];svgedit.path.replacePathSeg(t.type,t.index,s),t.update(!0)},svgedit.path.Segment.prototype.moveCtrl=function(e,t,i){var n=this.item,r=$.extend({},n);r["x"+e]+=t,r["y"+e]+=i;var a=[r.x,r.y,r.x1,r.y1,r.x2,r.y2];svgedit.path.replacePathSeg(this.type,this.index,a),this.update(!0)},svgedit.path.Segment.prototype.setType=function(e,t){svgedit.path.replacePathSeg(e,this.index,t),this.type=e,this.item=svgedit.path.path.elem.pathSegList.getItem(this.index),this.showCtrlPts(6===e),this.ctrlpts=svgedit.path.getControlPoints(this),this.update(!0)},svgedit.path.Path=function(e){if(!e||"path"!==e.tagName)throw"svgedit.path.Path constructed without a <path> element";this.elem=e,this.segs=[],this.selected_pts=[],svgedit.path.path=this,this.init()},svgedit.path.Path.prototype.init=function(){$(svgedit.path.getGripContainer()).find("*").each(function(){$(this).attr("display","none")});var e=this.elem.pathSegList,t=e.numberOfItems;this.segs=[],this.selected_pts=[],this.first_seg=null;var i;for(i=0;t>i;i++){var n=e.getItem(i),r=new svgedit.path.Segment(i,n);r.path=this,this.segs.push(r)}var a=this.segs,s=null;for(i=0;t>i;i++){var o,l=a[i],u=i+1>=t?null:a[i+1],c=0>i-1?null:a[i-1];2===l.type?(c&&1!==c.type&&(o=a[s],o.next=a[s+1],o.next.prev=o,o.addGrip()),s=i):u&&1===u.type?(l.next=a[s+1],l.next.prev=l,l.mate=a[s],l.addGrip(),null==this.first_seg&&(this.first_seg=l)):u?1!==l.type&&(l.addGrip(),u&&2!==u.type&&(l.next=u,l.next.prev=l)):1!==l.type&&(o=a[s],o.next=a[s+1],o.next.prev=o,o.addGrip(),l.addGrip(),this.first_seg||(this.first_seg=a[s]))}return this},svgedit.path.Path.prototype.eachSeg=function(e){var t,i=this.segs.length;for(t=0;i>t;t++){var n=e.call(this.segs[t],t);if(n===!1)break}},svgedit.path.Path.prototype.addSeg=function(e){var t=this.segs[e];if(t.prev){var i,n,r,a=t.prev;switch(t.item.pathSegType){case 4:n=(t.item.x+a.item.x)/2,r=(t.item.y+a.item.y)/2,i=this.elem.createSVGPathSegLinetoAbs(n,r);break;case 6:var s=(a.item.x+t.item.x1)/2,o=(t.item.x1+t.item.x2)/2,l=(t.item.x2+t.item.x)/2,u=(s+o)/2,c=(o+l)/2;n=(u+c)/2;var d=(a.item.y+t.item.y1)/2,h=(t.item.y1+t.item.y2)/2,p=(t.item.y2+t.item.y)/2,f=(d+h)/2,g=(h+p)/2;r=(f+g)/2,i=this.elem.createSVGPathSegCurvetoCubicAbs(n,r,s,d,u,f);var m=[t.item.x,t.item.y,c,g,l,p];svgedit.path.replacePathSeg(t.type,e,m)}svgedit.path.insertItemBefore(this.elem,i,e)}},svgedit.path.Path.prototype.deleteSeg=function(e){var t=this.segs[e],i=this.elem.pathSegList;t.show(!1);var n,r=t.next;if(t.mate)n=[r.item.x,r.item.y],svgedit.path.replacePathSeg(2,r.index,n),svgedit.path.replacePathSeg(4,t.index,n),i.removeItem(t.mate.index);else if(t.prev)i.removeItem(e);else{t.item;n=[r.item.x,r.item.y],svgedit.path.replacePathSeg(2,t.next.index,n),i.removeItem(e)}},svgedit.path.Path.prototype.subpathIsClosed=function(e){var t=!1;return svgedit.path.path.eachSeg(function(i){return e>=i?!0:2===this.type?!1:1===this.type?(t=!0,!1):void 0}),t},svgedit.path.Path.prototype.removePtFromSelection=function(e){var t=this.selected_pts.indexOf(e);-1!=t&&(this.segs[e].select(!1),this.selected_pts.splice(t,1))},svgedit.path.Path.prototype.clearSelection=function(){this.eachSeg(function(){this.select(!1)}),this.selected_pts=[]},svgedit.path.Path.prototype.storeD=function(){this.last_d=this.elem.getAttribute("d")},svgedit.path.Path.prototype.show=function(e){return this.eachSeg(function(){this.show(e)}),e&&this.selectPt(this.first_seg.index),this},svgedit.path.Path.prototype.movePts=function(e,t){for(var i=this.selected_pts.length;i--;){var n=this.segs[this.selected_pts[i]];n.move(e,t)}},svgedit.path.Path.prototype.moveCtrl=function(e,t){var i=this.segs[this.selected_pts[0]];i.moveCtrl(this.dragctrl,e,t),r&&i.setLinked(this.dragctrl)},svgedit.path.Path.prototype.setSegType=function(e){this.storeD();for(var t,i=this.selected_pts.length;i--;){var n=this.selected_pts[i],r=this.segs[n],a=r.prev;if(a){if(!e){t="Toggle Path Segment Type";var s=r.type;e=6==s?4:6}e=Number(e);var o,l=r.item.x,u=r.item.y,c=a.item.x,d=a.item.y;switch(e){case 6:if(r.olditem){var h=r.olditem;o=[l,u,h.x1,h.y1,h.x2,h.y2]}else{var p=l-c,f=u-d,g=c+p/3,m=d+f/3,v=l-p/3,y=u-f/3;o=[l,u,g,m,v,y]}break;case 4:o=[l,u],r.olditem=r.item}r.setType(e,o)}}svgedit.path.path.endChanges(t)},svgedit.path.Path.prototype.selectPt=function(e,t){this.clearSelection(),null==e&&this.eachSeg(function(t){this.prev&&(e=t)}),this.addPtsToSelection(e),t&&(this.dragctrl=t,r&&this.segs[e].setLinked(t))},svgedit.path.Path.prototype.update=function(){var e=this.elem;return svgedit.utilities.getRotationAngle(e)?(this.matrix=svgedit.math.getMatrix(e),this.imatrix=this.matrix.inverse()):(this.matrix=null,this.imatrix=null),this.eachSeg(function(t){this.item=e.pathSegList.getItem(t),this.update()}),this},svgedit.path.getPath_=function(e){var t=a[e.id];return t||(t=a[e.id]=new svgedit.path.Path(e)),t},svgedit.path.removePath_=function(e){e in a&&delete a[e]};var o,l,u,c,d,h=function(e,t){var i=e-u,n=t-c,r=Math.sqrt(i*i+n*n),a=Math.atan2(n,i)+d;return i=r*Math.cos(a)+u,n=r*Math.sin(a)+c,i-=o,n-=l,r=Math.sqrt(i*i+n*n),a=Math.atan2(n,i)-d,{x:r*Math.cos(a)+o,y:r*Math.sin(a)+l}};svgedit.path.recalcRotatedPath=function(){var e=svgedit.path.path.elem;if(d=svgedit.utilities.getRotationAngle(e,!0)){var t=svgedit.utilities.getBBox(e),i=svgedit.path.path.oldbbox;u=i.x+i.width/2,c=i.y+i.height/2,o=t.x+t.width/2,l=t.y+t.height/2;var n=o-u,r=l-c,a=Math.sqrt(n*n+r*r),s=Math.atan2(r,n)+d;o=a*Math.cos(s)+u,l=a*Math.sin(s)+c;for(var p=e.pathSegList,f=p.numberOfItems;f;){f-=1;var g=p.getItem(f),m=g.pathSegType;if(1!=m){var v=h(g.x,g.y),y=[v.x,v.y];if(null!=g.x1&&null!=g.x2){var b=h(g.x1,g.y1),_=h(g.x2,g.y2);y.splice(y.length,0,b.x,b.y,_.x,_.y)}svgedit.path.replacePathSeg(m,f,y)}}t=svgedit.utilities.getBBox(e);var x=svgroot.createSVGTransform(),S=svgedit.transformlist.getTransformList(e);x.setRotate(180*d/Math.PI,o,l),S.replaceItem(x,0)}},svgedit.path.clearData=function(){a={}}}(),function(){window.console||(window.console={},window.console.log=function(e){},window.console.dir=function(e){}),window.opera&&(window.console.log=function(e){opera.postError(e)},window.console.dir=function(e){})}(),$.SvgCanvas=function(e,t){function i(){Le();var e=[],t={feGaussianBlur:W.exportNoBlur,foreignObject:W.exportNoforeignObject,"[stroke-dasharray]":W.exportNoDashArray},i=$(c);return"font"in $("<canvas>")[0].getContext("2d")||(t.text=W.exportNoText),$.each(t,function(t,n){i.find(t).length&&e.push(n)}),e}function n(e,t){var i,n=svgedit.utilities.getBBox(e);for(i=0;2>i;i++){var r=0===i?"fill":"stroke",a=e.getAttribute(r);if(a&&0===a.indexOf("url(")){var s=svgedit.utilities.getRefElem(a);if("linearGradient"===s.tagName){var o=s.getAttribute("x1")||0,l=s.getAttribute("y1")||0,u=s.getAttribute("x2")||1,c=s.getAttribute("y2")||0;o=n.width*o+n.x,l=n.height*l+n.y,u=n.width*u+n.x,c=n.height*c+n.y;var d=svgedit.math.transformPoint(o,l,t),h=svgedit.math.transformPoint(u,c,t),p={};p.x1=(d.x-n.x)/n.width,p.y1=(d.y-n.y)/n.height,p.x2=(h.x-n.x)/n.width,p.y2=(h.y-n.y)/n.height;var f=s.cloneNode(!0);$(f).attr(p),f.id=_e(),svgedit.utilities.findDefs().appendChild(f),e.setAttribute(r,"url(#"+f.id+")")}}}}var r=svgedit.NS,a={show_outside_canvas:!0,selectNew:!0,dimensions:[640,480]};t&&$.extend(a,t);var s=a.dimensions,o=this,l=e.ownerDocument,u=l.importNode(svgedit.utilities.text2xml('<svg id="svgroot" xmlns="'+r.SVG+'" xlinkns="'+r.XLINK+'" width="'+s[0]+'" height="'+s[1]+'" x="'+s[0]+'" y="'+s[1]+'" overflow="visible"><defs><filter id="canvashadow" filterUnits="objectBoundingBox"><feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur"/><feOffset in="blur" dx="5" dy="5" result="offsetBlur"/><feMerge><feMergeNode in="offsetBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs></svg>').documentElement,!0);e.appendChild(u);var c=l.createElementNS(r.SVG,"svg"),d=o.clearSvgContentElement=function(){for(;c.firstChild;)c.removeChild(c.firstChild);$(c).attr({id:"svgcontent",width:s[0],height:s[1],x:s[0],y:s[1],overflow:a.show_outside_canvas?"visible":"hidden",xmlns:r.SVG,"xmlns:se":r.SE,"xmlns:xlink":r.XLINK}).appendTo(u);var e=l.createComment(" Created with SVG-edit - http://svg-edit.googlecode.com/ ");c.appendChild(e)};d();var h="svg_";o.setIdPrefix=function(e){h=e},o.current_drawing_=new svgedit.draw.Drawing(c,h);var p=o.getCurrentDrawing=function(){return o.current_drawing_},f=1,g=null,m={shape:{fill:("none"==a.initFill.color?"":"#")+a.initFill.color,fill_paint:null,fill_opacity:a.initFill.opacity,stroke:"#"+a.initStroke.color,stroke_paint:null,stroke_opacity:a.initStroke.opacity,stroke_width:a.initStroke.width,stroke_dasharray:"none",stroke_linejoin:"miter",stroke_linecap:"butt",opacity:a.initOpacity}};m.text=$.extend(!0,{},m.shape),$.extend(m.text,{fill:"#000000",stroke_width:0,font_size:24,font_family:"serif"});var v=m.shape,b=[],_=this.addSvgElementFromJson=function(e){var t=svgedit.utilities.getElem(e.attr.id),i=p().getCurrentLayer();return t&&e.element!=t.tagName&&(i.removeChild(t),t=null),t||(t=l.createElementNS(r.SVG,e.element),i&&(g||i).appendChild(t)),e.curStyles&&svgedit.utilities.assignAttributes(t,{fill:v.fill,stroke:v.stroke,"stroke-width":v.stroke_width,"stroke-dasharray":v.stroke_dasharray,"stroke-linejoin":v.stroke_linejoin,"stroke-linecap":v.stroke_linecap,"stroke-opacity":v.stroke_opacity,"fill-opacity":v.fill_opacity,opacity:v.opacity/2,style:"pointer-events:inherit"},100),svgedit.utilities.assignAttributes(t,e.attr,100),svgedit.utilities.cleanupElement(t),t},S=(o.getTransformList=svgedit.transformlist.getTransformList,svgedit.math.transformPoint),w=o.matrixMultiply=svgedit.math.matrixMultiply,C=o.hasMatrixTransform=svgedit.math.hasMatrixTransform,k=o.transformListToTransform=svgedit.math.transformListToTransform;svgedit.math.snapToAngle,svgedit.math.getMatrix;svgedit.units.init({getBaseUnit:function(){return a.baseUnit},getElement:svgedit.utilities.getElem,getHeight:function(){return c.getAttribute("height")/f},getWidth:function(){return c.getAttribute("width")/f},getRoundDigits:function(){return ie.round_digits}});o.convertToNum=svgedit.units.convertToNum;svgedit.utilities.init({getDOMDocument:function(){return l},getDOMContainer:function(){return e},getSVGRoot:function(){return u},getSelectedElements:function(){return b},getSVGContent:function(){return c},getBaseUnit:function(){return a.baseUnit},getSnappingStep:function(){return a.snappingStep}});var A=o.findDefs=svgedit.utilities.findDefs,P=o.getUrlFromAttr=svgedit.utilities.getUrlFromAttr,T=o.getHref=svgedit.utilities.getHref,E=o.setHref=svgedit.utilities.setHref,G=svgedit.utilities.getPathBBox,N=(o.getBBox=svgedit.utilities.getBBox,o.getRotationAngle=svgedit.utilities.getRotationAngle,o.getElem=svgedit.utilities.getElem),L=(o.getRefElem=svgedit.utilities.getRefElem,o.assignAttributes=svgedit.utilities.assignAttributes),I=this.cleanupElement=svgedit.utilities.cleanupElement;svgedit.coords.init({getDrawing:function(){return p()},getGridSnapping:function(){return a.gridSnapping}});var M=this.remapElement=svgedit.coords.remapElement;svgedit.recalculate.init({getSVGRoot:function(){return u},getStartTransform:function(){return re},setStartTransform:function(e){re=e}});var V,O=this.recalculateDimensions=svgedit.recalculate.recalculateDimensions,j=svgedit.getReverseNS(),R=o.sanitizeSvg=svgedit.sanitize.sanitizeSvg,B=svgedit.history.MoveElementCommand,D=svgedit.history.InsertElementCommand,F=svgedit.history.RemoveElementCommand,H=svgedit.history.ChangeElementCommand,U=svgedit.history.BatchCommand;o.undoMgr=new svgedit.history.UndoManager({handleHistoryEvent:function(e,t){var i=svgedit.history.HistoryEventTypes;if(e==i.BEFORE_UNAPPLY||e==i.BEFORE_APPLY)o.clearSelection();else if(e==i.AFTER_APPLY||e==i.AFTER_UNAPPLY){var n=t.elements();o.pathActions.clear(),V("changed",n);var r=t.type(),a=e==i.AFTER_APPLY;if(r==B.type()){var s=a?t.newParent:t.oldParent;s==c&&o.identifyLayers()}else if(r==D.type()||r==F.type())t.parent==c&&o.identifyLayers(),r==D.type()?a&&Z(t.elem):a||Z(t.elem),"use"===t.elem.tagName&&Be(t.elem);else if(r==H.type()){"title"==t.elem.tagName&&t.elem.parentNode.parentNode==c&&o.identifyLayers();var l=a?t.newValues:t.oldValues;l.stdDeviation&&o.setBlurOffsets(t.elem.parentNode,l.stdDeviation)}}}});var z=function(e){o.undoMgr.addCommandToHistory(e)};svgedit.select.init(a,{createSVGElement:function(e){return o.addSvgElementFromJson(e)},svgRoot:function(){return u},svgContent:function(){return c},currentZoom:function(){return f},getStrokedBBox:function(e){return o.getStrokedBBox([e])}});var q=this.selectorManager=svgedit.select.getSelectorManager();svgedit.path.init({getCurrentZoom:function(){return f},getSVGRoot:function(){return u}});var W={exportNoBlur:"Blurred elements will appear as un-blurred",exportNoforeignObject:"foreignObject elements will not appear",exportNoDashArray:"Strokes will appear filled",exportNoText:"Text may not appear as expected"},X="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",Y=["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],Q=$.data,K=document.createElementNS(r.SVG,"animate");$(K).attr({attributeName:"opacity",begin:"indefinite",dur:1,fill:"freeze"}).appendTo(u);var Z=function(e){var t,i,n,r=$(e).attr(Y);for(t in r){var a=r[t];if(a&&0===a.indexOf("url(")){var s=svgedit.utilities.getUrlFromAttr(a).substr(1),o=N(s);o||(svgedit.utilities.findDefs().appendChild(ge[s]),delete ge[s])}}var l=e.getElementsByTagName("*");if(l.length)for(i=0,n=l.length;n>i;i++)Z(l[i])},J={},ee=a.imgPath+"logo.png",te=[],ie={round_digits:5},ne=!1,re=null,ae="select",se="none",oe={},le=m.text,ue=v,ce=null,de=null,he=[],pe={},fe=null,ge={};o.clipBoard=[];var me=this.runExtensions=function(e,t,i){var n=i?[]:!1;return $.each(pe,function(r,a){a&&e in a&&(i?n.push(a[e](t)):n=a[e](t))}),n};this.addExtension=function(e,t){var i;e in pe?console.log('Cannot add extension "'+e+'", an extension by that name already exists.'):(i=$.isFunction(t)?t($.extend(o.getPrivateMethods(),{svgroot:u,svgcontent:c,nonce:p().getNonce(),selectorManager:q})):t,pe[e]=i,V("extension_added",i))};var ve=this.round=function(e){return parseInt(e*f,10)/f},ye=this.getIntersectionList=function(e){if(null==de)return null;var t,i=g||p().getCurrentLayer();t=e?c.createSVGRect(e.x,e.y,e.width,e.height):de.getBBox();var n=null;if("function"==typeof u.getIntersectionList&&(t.x+=parseInt(c.getAttribute("x"),10),t.y+=parseInt(c.getAttribute("y"),10),n=u.getIntersectionList(t,i)),null==n||"function"!=typeof n.item){n=[],he.length||(he=Ce(i));for(var r=he.length;r--;)t.width&&svgedit.math.rectsIntersect(t,he[r].bbox)&&n.push(he[r].elem)}return n};getStrokedBBox=this.getStrokedBBox=function(e){if(e||(e=we()),!e.length)return!1;var t,i=function(e){var t=svgedit.utilities.getBBox(e);if(!t)return null;var i=svgedit.utilities.getRotationAngle(e);if(i&&i%90||svgedit.math.hasMatrixTransform(svgedit.transformlist.getTransformList(e))){var n=!1,a=["ellipse","path","line","polyline","polygon"];if(a.indexOf(e.tagName)>=0)t=n=o.convertToPath(e,!0);else if("rect"==e.tagName){var s=e.getAttribute("rx"),l=e.getAttribute("ry");(s||l)&&(t=n=o.convertToPath(e,!0))}if(!n){var u=e.cloneNode(!0),c=document.createElementNS(r.SVG,"g"),d=e.parentNode;d.appendChild(c),c.appendChild(u),t=svgedit.utilities.bboxToObj(c.getBBox()),d.removeChild(c)}}return t};if($.each(e,function(){t||this.parentNode&&(t=i(this))}),null==t)return null;var n=t.x+t.width,a=t.y+t.height,s=t.x,l=t.y,u=function(e){var t=e.getAttribute("stroke-width"),i=0;return"none"==e.getAttribute("stroke")||isNaN(t)||(i+=t/2),i},c=[];return $.each(e,function(e,t){var n=i(t);if(n){var r=u(t);s=Math.min(s,n.x-r),l=Math.min(l,n.y-r),c.push(n)}}),t.x=s,t.y=l,$.each(e,function(e,t){var i=c[e];if(i&&1==t.nodeType){var r=u(t);n=Math.max(n,i.x+i.width+r),a=Math.max(a,i.y+i.height+r)}}),t.width=n-s,t.height=a-l,t};var be,_e,xe,Se,we=this.getVisibleElements=function(e){e||(e=$(c).children());var t=[];return $(e).children().each(function(e,i){i.getBBox&&t.push(i)}),t.reverse()},Ce=this.getVisibleElementsAndBBoxes=function(e){e||(e=$(c).children());var t=[];return $(e).children().each(function(e,i){i.getBBox&&t.push({elem:i,bbox:getStrokedBBox([i])})}),t.reverse()},ke=this.groupSvgElem=function(e){var t=document.createElementNS(r.SVG,"g");e.parentNode.replaceChild(t,e),$(t).append(e).data("gsvg",e)[0].id=_e()},Ae=function(e){var t=document.createElementNS(e.namespaceURI,e.nodeName);if($.each(e.attributes,function(e,i){"-moz-math-font-style"!=i.localName&&t.setAttributeNS(i.namespaceURI,i.nodeName,i.value)}),t.removeAttribute("id"),t.id=_e(),svgedit.browser.isWebkit()&&"path"==e.nodeName){var i=Se.convertPath(e);t.setAttribute("d",i)}if($.each(e.childNodes,function(e,i){switch(i.nodeType){case 1:t.appendChild(Ae(i));break;case 3:t.textContent=i.nodeValue}}),$(e).data("gsvg"))$(t).data("gsvg",t.firstChild);else if($(e).data("symbol")){
var n=$(e).data("symbol");$(t).data("ref",n).data("symbol",n)}else"image"==t.tagName&&Oe(t);return t};!function(e){var t={};be=e.getId=function(){return p().getId()},_e=e.getNextId=function(){return p().getNextId()},V=e.call=function(e,i){return t[e]?t[e](this,i):void 0},e.bind=function(e,i){var n=t[e];return t[e]=i,n}}(o),this.prepareSvg=function(e){this.sanitizeSvg(e.documentElement);var t,i,n,a=e.getElementsByTagNameNS(r.SVG,"path");for(t=0,n=a.length;n>t;++t)i=a[t],i.setAttribute("d",Se.convertPath(i)),Se.fixEnd(i)};var Pe=function(e){if(!svgedit.browser.isGecko())return e;var t=e.cloneNode(!0);return e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),q.releaseSelector(e),b[0]=t,q.requestSelector(t).showGrips(!0),t};this.setRotationAngle=function(e,t){e=parseFloat(e);var i=b[0],n=i.getAttribute("transform"),r=svgedit.utilities.getBBox(i),a=r.x+r.width/2,s=r.y+r.height/2,o=svgedit.transformlist.getTransformList(i);if(o.numberOfItems>0){var l=o.getItem(0);4==l.type&&o.removeItem(0)}if(0!=e){var c=svgedit.math.transformPoint(a,s,svgedit.math.transformListToTransform(o).matrix),d=u.createSVGTransform();d.setRotate(e,c.x,c.y),o.numberOfItems?o.insertItemBefore(d,0):o.appendItem(d)}else 0==o.numberOfItems&&i.removeAttribute("transform");if(!t){var h=i.getAttribute("transform");i.setAttribute("transform",n),Qe("transform",h,b),V("changed",b)}var p=(svgedit.utilities.getElem("pathpointgrip_container"),q.requestSelector(b[0]));p.resize(),p.updateGripCursors(e)};var Te=this.recalculateAllSelectedDimensions=function(){for(var e="none"==se?"position":"size",t=new svgedit.history.BatchCommand(e),i=b.length;i--;){var n=b[i],r=svgedit.recalculate.recalculateDimensions(n);r&&t.addSubCommand(r)}t.isEmpty()||(z(t),V("changed",b))},Ee=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],Ge=function(e){console.log([e.a,e.b,e.c,e.d,e.e,e.f])},Ne=null,Le=this.clearSelection=function(e){if(null!=b[0]){var t,i,n=b.length;for(t=0;n>t&&(i=b[t],null!=i);++t)q.releaseSelector(i),b[t]=null}e||V("selected",b)},Ie=this.addToSelection=function(e,t){if(0!=e.length){for(var i=0;i<b.length&&null!=b[i];)++i;for(var n=e.length;n--;){var r=e[n];if(r&&svgedit.utilities.getBBox(r)&&("a"===r.tagName&&1===r.childNodes.length&&(r=r.firstChild),-1==b.indexOf(r))){b[i]=r,i++;var a=q.requestSelector(r);b.length>1&&a.showGrips(!1)}}for(V("selected",b),t||1==b.length?q.requestSelector(b[0]).showGrips(!0):q.requestSelector(b[0]).showGrips(!1),b.sort(function(e,t){return e&&t&&e.compareDocumentPosition?3-(6&t.compareDocumentPosition(e)):null==e?1:void 0});null==b[0];)b.shift(0)}},Me=this.selectOnly=function(e,t){Le(!0),Ie(e,t)};this.removeFromSelection=function(e){if(null!=b[0]&&0!=e.length){var t,i=0,n=[],r=b.length;for(n.length=r,t=0;r>t;++t){var a=b[t];a&&(-1==e.indexOf(a)?(n[i]=a,i++):q.releaseSelector(a))}b=n}};this.selectAllInCurrentLayer=function(){var e=p().getCurrentLayer();e&&(ae="select",Me($(g||e).children()))};var Ve=this.getMouseTarget=function(t){if(null==t)return null;var i=t.target;if(i.correspondingUseElement&&(i=i.correspondingUseElement),[r.MATH,r.HTML].indexOf(i.namespaceURI)>=0&&"svgcanvas"!=i.id)for(;"foreignObject"!=i.nodeName;)if(i=i.parentNode,!i)return u;var n=p().getCurrentLayer();if([u,e,c,n].indexOf(i)>=0)return u;var a=$(i);if(a.closest("#selectorParentGroup").length)return q.selectorParentGroup;for(;i.parentNode!==(g||n);)i=i.parentNode;return i};!function(){var t,i,n=null,r=null,s=null,l=null,c=null,d={},h={minx:null,miny:null,maxx:null,maxy:null},m=0,S={x:0,y:0},w={x:0,y:0},C={x:0,y:0},k={x:0,y:0},A={x:0,y:0},P={x:0,y:0},T=.8,G=10,N=function(e){var t={x:0,y:0},i=S,n=w,r=C,a=k,s=1/6,o=e*e,l=o*e,u=[[-1,3,-3,1],[3,-6,3,0],[-3,0,3,0],[1,4,1,0]];return t.x=s*((i.x*u[0][0]+n.x*u[0][1]+r.x*u[0][2]+a.x*u[0][3])*l+(i.x*u[1][0]+n.x*u[1][1]+r.x*u[1][2]+a.x*u[1][3])*o+(i.x*u[2][0]+n.x*u[2][1]+r.x*u[2][2]+a.x*u[2][3])*e+(i.x*u[3][0]+n.x*u[3][1]+r.x*u[3][2]+a.x*u[3][3])),t.y=s*((i.y*u[0][0]+n.y*u[0][1]+r.y*u[0][2]+a.y*u[0][3])*l+(i.y*u[1][0]+n.y*u[1][1]+r.y*u[1][2]+a.y*u[1][3])*o+(i.y*u[2][0]+n.y*u[2][1]+r.y*u[2][2]+a.y*u[2][3])*e+(i.y*u[3][0]+n.y*u[3][1]+r.y*u[3][2]+a.y*u[3][3])),{x:t.x,y:t.y}},L=function(e){if(!o.spaceKey&&1!==e.button){var t=2===e.button;e.altKey&&svgCanvas.cloneSelectedElements(0,0),Ne=$("#svgcontent g")[0].getScreenCTM().inverse();var i=svgedit.math.transformPoint(e.pageX,e.pageY,Ne),p=i.x*f,g=i.y*f;e.preventDefault(),t&&(ae="select",fe=i);var m=p/f,y=g/f,x=Ve(e);"a"===x.tagName&&1===x.childNodes.length&&(x=x.firstChild);var S=m;l=r=m;var w=y;if(c=s=y,a.gridSnapping&&(m=svgedit.utilities.snapToGrid(m),y=svgedit.utilities.snapToGrid(y),r=svgedit.utilities.snapToGrid(r),s=svgedit.utilities.snapToGrid(s)),x==q.selectorParentGroup&&null!=b[0]){var k=e.target,A=Q(k,"type");"rotate"==A?ae="rotate":"resize"==A&&(ae="resize",se=Q(k,"dir")),x=b[0]}re=x.getAttribute("transform");var P,T,G=svgedit.transformlist.getTransformList(x);switch(ae){case"select":if(ne=!0,se="none",t&&(ne=!1),x!=u){if(-1==b.indexOf(x)&&(e.shiftKey||Le(!0),Ie([x]),ce=x,Se.clear()),!t)for(P=0;P<b.length;++P)if(null!=b[P]){var N=svgedit.transformlist.getTransformList(b[P]);N.numberOfItems?N.insertItemBefore(u.createSVGTransform(),0):N.appendItem(u.createSVGTransform())}}else t||(Le(),ae="multiselect",null==de&&(de=q.getRubberBandBox()),l*=f,c*=f,svgedit.utilities.assignAttributes(de,{x:l,y:c,width:0,height:0,display:"inline"},100));break;case"zoom":ne=!0,null==de&&(de=q.getRubberBandBox()),svgedit.utilities.assignAttributes(de,{x:S*f,y:S*f,width:0,height:0,display:"inline"},100);break;case"resize":ne=!0,r=m,s=y,d=svgedit.utilities.getBBox($("#selectedBox0")[0]);var L={};$.each(d,function(e,t){L[e]=t/f}),d=L;var I=svgedit.utilities.getRotationAngle(x)?1:0;if(svgedit.math.hasMatrixTransform(G))G.insertItemBefore(u.createSVGTransform(),I),G.insertItemBefore(u.createSVGTransform(),I),G.insertItemBefore(u.createSVGTransform(),I);else if(G.appendItem(u.createSVGTransform()),G.appendItem(u.createSVGTransform()),G.appendItem(u.createSVGTransform()),svgedit.browser.supportsNonScalingStroke()){var M=svgedit.browser.isWebkit();if(M)var V=function(e){var t=e.getAttributeNS(null,"stroke");e.removeAttributeNS(null,"stroke"),setTimeout(function(){e.setAttributeNS(null,"stroke",t)},0)};x.style.vectorEffect="non-scaling-stroke",M&&V(x);var O=x.getElementsByTagName("*"),j=O.length;for(P=0;j>P;P++)O[P].style.vectorEffect="non-scaling-stroke",M&&V(O[P])}break;case"fhellipse":case"fhrect":case"fhpath":C.x=S,C.y=w,ne=!0,n=S+","+w+" ",T=0==v.stroke_width?1:v.stroke_width,_({element:"polyline",curStyles:!0,attr:{points:n,id:_e(),fill:"none",opacity:v.opacity/2,"stroke-linecap":"round",style:"pointer-events:none"}}),h.minx=S,h.maxx=S,h.miny=w,h.maxy=w;break;case"image":ne=!0;var R=_({element:"image",attr:{x:m,y:y,width:0,height:0,id:_e(),opacity:v.opacity/2,style:"pointer-events:inherit"}});E(R,ee),Oe(R);break;case"square":case"rect":ne=!0,r=m,s=y,_({element:"rect",curStyles:!0,attr:{x:m,y:y,width:0,height:0,id:_e(),opacity:v.opacity/2}});break;case"line":ne=!0,T=0==v.stroke_width?1:v.stroke_width,_({element:"line",curStyles:!0,attr:{x1:m,y1:y,x2:m,y2:y,id:_e(),stroke:v.stroke,"stroke-width":T,"stroke-dasharray":v.stroke_dasharray,"stroke-linejoin":v.stroke_linejoin,"stroke-linecap":v.stroke_linecap,"stroke-opacity":v.stroke_opacity,fill:"none",opacity:v.opacity/2,style:"pointer-events:none"}});break;case"circle":ne=!0,_({element:"circle",curStyles:!0,attr:{cx:m,cy:y,r:0,id:_e(),opacity:v.opacity/2}});break;case"ellipse":ne=!0,_({element:"ellipse",curStyles:!0,attr:{cx:m,cy:y,rx:0,ry:0,id:_e(),opacity:v.opacity/2}});break;case"text":ne=!0;_({element:"text",curStyles:!0,attr:{x:m,y:y,id:_e(),fill:le.fill,"stroke-width":le.stroke_width,"font-size":le.font_size,"font-family":le.font_family,"text-anchor":"middle","xml:space":"preserve",opacity:v.opacity}});break;case"path":case"pathedit":r*=f,s*=f,Se.mouseDown(e,x,r,s),ne=!0;break;case"textedit":r*=f,s*=f,xe.mouseDown(e,x,r,s),ne=!0;break;case"rotate":ne=!0,o.undoMgr.beginUndoableChange("transform",b)}var B=me("mouseDown",{event:e,start_x:r,start_y:s,selectedElements:b},!0);$.each(B,function(e,t){t&&t.started&&(ne=!0)})}},M=function(e){if(ne&&1!==e.button&&!o.spaceKey){var p,g,v,_,E,L,I,M,O,j,R=b[0],B=svgedit.math.transformPoint(e.pageX,e.pageY,Ne),D=B.x*f,F=B.y*f,H=svgedit.utilities.getElem(be()),U=D/f;x=U;var z=F/f;y=z,a.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),y=svgedit.utilities.snapToGrid(y)),e.preventDefault();var W;switch(ae){case"select":if(null!==b[0]&&(L=x-r,I=y-s,a.gridSnapping&&(L=svgedit.utilities.snapToGrid(L),I=svgedit.utilities.snapToGrid(I)),e.shiftKey&&(g=svgedit.math.snapToAngle(r,s,x,y),x=g.x,y=g.y),0!=L||0!=I)){for(M=b.length,p=0;M>p&&(R=b[p],null!=R);++p){var X=u.createSVGTransform();W=svgedit.transformlist.getTransformList(R),X.setTranslate(L,I),W.numberOfItems?W.replaceItem(X,0):W.appendItem(X),q.requestSelector(R).resize()}V("transition",b)}break;case"multiselect":U*=f,z*=f,svgedit.utilities.assignAttributes(de,{x:Math.min(l,U),y:Math.min(c,z),width:Math.abs(U-l),height:Math.abs(z-c)},100);var Y=b.slice(),Q=[],K=ye();for(M=K.length,p=0;M>p;++p){var Z=K[p];-1==b.indexOf(Z)&&Q.push(Z);var J=Y.indexOf(Z);-1!=J&&Y.splice(J,1)}Y.length>0&&o.removeFromSelection(Y),Q.length>0&&o.addToSelection(Q);break;case"resize":W=svgedit.transformlist.getTransformList(R);var ee=svgedit.math.hasMatrixTransform(W);j=ee?d:svgedit.utilities.getBBox(R);var te=j.x,ie=j.y,re=j.width,oe=j.height;if(L=x-r,I=y-s,a.gridSnapping&&(L=svgedit.utilities.snapToGrid(L),I=svgedit.utilities.snapToGrid(I),oe=svgedit.utilities.snapToGrid(oe),re=svgedit.utilities.snapToGrid(re)),O=svgedit.utilities.getRotationAngle(R)){var le=Math.sqrt(L*L+I*I),ue=Math.atan2(I,L)-O*Math.PI/180;L=le*Math.cos(ue),I=le*Math.sin(ue)}-1==se.indexOf("n")&&-1==se.indexOf("s")&&(I=0),-1==se.indexOf("e")&&-1==se.indexOf("w")&&(L=0);var ce=0,he=0,pe=oe?(oe+I)/oe:1,fe=re?(re+L)/re:1;se.indexOf("n")>=0&&(pe=oe?(oe-I)/oe:1,he=oe),se.indexOf("w")>=0&&(fe=re?(re-L)/re:1,ce=re);var ge=u.createSVGTransform(),ve=u.createSVGTransform(),_e=u.createSVGTransform();if(a.gridSnapping&&(te=svgedit.utilities.snapToGrid(te),ce=svgedit.utilities.snapToGrid(ce),ie=svgedit.utilities.snapToGrid(ie),he=svgedit.utilities.snapToGrid(he)),ge.setTranslate(-(te+ce),-(ie+he)),e.shiftKey&&(1==fe?fe=pe:pe=fe),ve.setScale(fe,pe),_e.setTranslate(te+ce,ie+he),ee){var we=O?1:0;W.replaceItem(ge,2+we),W.replaceItem(ve,1+we),W.replaceItem(_e,Number(we))}else{var Ce=W.numberOfItems;W.replaceItem(_e,Ce-3),W.replaceItem(ve,Ce-2),W.replaceItem(ge,Ce-1)}q.requestSelector(R).resize(),V("transition",b);break;case"zoom":U*=f,z*=f,svgedit.utilities.assignAttributes(de,{x:Math.min(l*f,U),y:Math.min(c*f,z),width:Math.abs(U-l*f),height:Math.abs(z-c*f)},100);break;case"text":svgedit.utilities.assignAttributes(H,{x:x,y:y},1e3);break;case"line":a.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),y=svgedit.utilities.snapToGrid(y));var ke=x,Ae=y;e.shiftKey&&(g=svgedit.math.snapToAngle(r,s,ke,Ae),ke=g.x,Ae=g.y),H.setAttributeNS(null,"x2",ke),H.setAttributeNS(null,"y2",Ae);break;case"foreignObject":case"square":case"rect":case"image":var Pe,Te,Ee="square"==ae||e.shiftKey,Ge=Math.abs(x-r),Le=Math.abs(y-s);Ee?(Ge=Le=Math.max(Ge,Le),Pe=r<x?r:r-Ge,Te=s<y?s:s-Le):(Pe=Math.min(r,x),Te=Math.min(s,y)),a.gridSnapping&&(Ge=svgedit.utilities.snapToGrid(Ge),Le=svgedit.utilities.snapToGrid(Le),Pe=svgedit.utilities.snapToGrid(Pe),Te=svgedit.utilities.snapToGrid(Te)),svgedit.utilities.assignAttributes(H,{width:Ge,height:Le,x:Pe,y:Te},1e3);break;case"circle":v=$(H).attr(["cx","cy"]),_=v.cx,E=v.cy;var Ie=Math.sqrt((x-_)*(x-_)+(y-E)*(y-E));a.gridSnapping&&(Ie=svgedit.utilities.snapToGrid(Ie)),H.setAttributeNS(null,"r",Ie);break;case"ellipse":v=$(H).attr(["cx","cy"]),_=v.cx,E=v.cy,a.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),_=svgedit.utilities.snapToGrid(_),y=svgedit.utilities.snapToGrid(y),E=svgedit.utilities.snapToGrid(E)),H.setAttributeNS(null,"rx",Math.abs(x-_));var Me=Math.abs(e.shiftKey?x-_:y-E);H.setAttributeNS(null,"ry",Me);break;case"fhellipse":case"fhrect":h.minx=Math.min(U,h.minx),h.maxx=Math.max(U,h.maxx),h.miny=Math.min(z,h.miny),h.maxy=Math.max(z,h.maxy);case"fhpath":if(k.x=U,k.y=z,S.x&&S.y)for(p=0;G-1>p;p++)t=p/G,i=(p+1)/G,A=N(i),P=A,A=N(t),m+=Math.sqrt((P.x-A.x)*(P.x-A.x)+(P.y-A.y)*(P.y-A.y)),m>T&&(n+=+A.x+","+A.y+" ",H.setAttributeNS(null,"points",n),m-=T);S={x:w.x,y:w.y},w={x:C.x,y:C.y},C={x:k.x,y:k.y};break;case"path":case"pathedit":if(x*=f,y*=f,a.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),y=svgedit.utilities.snapToGrid(y),r=svgedit.utilities.snapToGrid(r),s=svgedit.utilities.snapToGrid(s)),e.shiftKey){var Ve,Oe,je=svgedit.path.path;je?(Ve=je.dragging?je.dragging[0]:r,Oe=je.dragging?je.dragging[1]:s):(Ve=r,Oe=s),g=svgedit.math.snapToAngle(Ve,Oe,x,y),x=g.x,y=g.y}de&&"none"!==de.getAttribute("display")&&(U*=f,z*=f,svgedit.utilities.assignAttributes(de,{x:Math.min(l*f,U),y:Math.min(c*f,z),width:Math.abs(U-l*f),height:Math.abs(z-c*f)},100)),Se.mouseMove(x,y);break;case"textedit":x*=f,y*=f,xe.mouseMove(D,F);break;case"rotate":j=svgedit.utilities.getBBox(R),_=j.x+j.width/2,E=j.y+j.height/2;var Re=svgedit.math.getMatrix(R),Be=svgedit.math.transformPoint(_,E,Re);if(_=Be.x,E=Be.y,O=(Math.atan2(E-y,_-x)*(180/Math.PI)-90)%360,a.gridSnapping&&(O=svgedit.utilities.snapToGrid(O)),e.shiftKey){var De=45;O=Math.round(O/De)*De}o.setRotationAngle(-180>O?360+O:O,!0),V("transition",b)}me("mouseMove",{event:e,mouse_x:D,mouse_y:F,selected:R})}},O=function(e){if(2!==e.button){var t=ce;if(ce=null,ne){var i=svgedit.math.transformPoint(e.pageX,e.pageY,Ne),n=i.x*f,r=i.y*f,s=n/f,u=r/f,d=svgedit.utilities.getElem(be()),g=!1,y=s,x=u,A=!1;ne=!1;var P,T;switch(ae){case"resize":case"multiselect":null!=de&&(de.setAttribute("display","none"),he=[]),ae="select";case"select":if(null!=b[0]){if(null==b[1]){var E=b[0];switch(E.tagName){case"g":case"use":case"image":case"foreignObject":break;default:ue.fill=E.getAttribute("fill"),ue.fill_opacity=E.getAttribute("fill-opacity"),ue.stroke=E.getAttribute("stroke"),ue.stroke_opacity=E.getAttribute("stroke-opacity"),ue.stroke_width=E.getAttribute("stroke-width"),ue.stroke_dasharray=E.getAttribute("stroke-dasharray"),ue.stroke_linejoin=E.getAttribute("stroke-linejoin"),ue.stroke_linecap=E.getAttribute("stroke-linecap")}"text"==E.tagName&&(le.font_size=E.getAttribute("font-size"),le.font_family=E.getAttribute("font-family")),q.requestSelector(E).showGrips(!0)}if(Te(),y!=l||x!=c){var G,N=b.length;for(G=0;N>G&&null!=b[G];++G)b[G].firstChild||q.requestSelector(b[G]).resize()}else T=e.target,"path"===b[0].nodeName&&null==b[1]?Se.select(b[0]):e.shiftKey&&t!=T&&o.removeFromSelection([T]);if(svgedit.browser.supportsNonScalingStroke()){var L=b[0];L&&(L.removeAttribute("style"),svgedit.utilities.walkTree(L,function(e){e.removeAttribute("style")}))}}return;case"zoom":null!=de&&de.setAttribute("display","none");var M=e.shiftKey?.5:2;return void V("zoomed",{x:Math.min(l,y),y:Math.min(c,x),width:Math.abs(y-l),height:Math.abs(x-c),factor:M});case"fhpath":m=0,S={x:0,y:0},w={x:0,y:0},C={x:0,y:0},k={x:0,y:0};var O=d.getAttribute("points"),j=O.indexOf(",");g=j>=0?O.indexOf(",",j+1)>=0:O.indexOf(" ",O.indexOf(" ")+1)>=0,g&&(d=Se.smoothPolylineIntoPath(d));break;case"line":P=$(d).attr(["x1","x2","y1","y2"]),g=P.x1!=P.x2||P.y1!=P.y2;break;case"foreignObject":case"square":case"rect":case"image":P=$(d).attr(["width","height"]),g=0!=P.width||0!=P.height||"image"===ae;break;case"circle":g=0!=d.getAttribute("r");break;case"ellipse":P=$(d).attr(["rx","ry"]),g=null!=P.rx||null!=P.ry;break;case"fhellipse":h.maxx-h.minx>0&&h.maxy-h.miny>0&&(d=_({element:"ellipse",curStyles:!0,attr:{cx:(h.minx+h.maxx)/2,cy:(h.miny+h.maxy)/2,rx:(h.maxx-h.minx)/2,ry:(h.maxy-h.miny)/2,id:be()}}),V("changed",[d]),g=!0);break;case"fhrect":h.maxx-h.minx>0&&h.maxy-h.miny>0&&(d=_({element:"rect",curStyles:!0,attr:{x:h.minx,y:h.miny,width:h.maxx-h.minx,height:h.maxy-h.miny,id:be()}}),V("changed",[d]),g=!0);break;case"text":g=!0,Me([d]),xe.start(d);break;case"path":d=null,ne=!0;var R=Se.mouseUp(e,d,n,r);d=R.element,g=R.keep;break;case"pathedit":g=!0,d=null,Se.mouseUp(e);break;case"textedit":g=!1,d=null,xe.mouseUp(e,n,r);break;case"rotate":g=!0,d=null,ae="select";var B=o.undoMgr.finishUndoableChange();B.isEmpty()||z(B),Te(),V("changed",b)}var D=me("mouseUp",{event:e,mouse_x:n,mouse_y:r},!0);if($.each(D,function(e,t){t&&(g=t.keep||g,d=t.element,ne=t.started||ne)}),g||null==d){if(null!=d){o.addedNew=!0,A&&svgedit.units.convertAttrs(d);var F,H=.2;if(K.beginElement&&d.getAttribute("opacity")!=v.opacity){F=$(K).clone().attr({to:v.opacity,dur:H}).appendTo(d);try{F[0].beginElement()}catch(U){}}else H=0;setTimeout(function(){F&&F.remove(),d.setAttribute("opacity",v.opacity),d.setAttribute("style","pointer-events:inherit"),I(d),"path"===ae?Se.toEditMode(d):a.selectNew&&Me([d],!0),z(new svgedit.history.InsertElementCommand(d)),V("changed",[d])},1e3*H)}}else{for(p().releaseId(be()),d.parentNode.removeChild(d),d=null,T=e.target;"g"==T.parentNode.parentNode.tagName;)T=T.parentNode;"path"==ae&&drawn_path||"selectorParentGroup"==T.parentNode.id||"svgcanvas"==T.id||"svgroot"==T.id||(o.setMode("select"),Me([T],!0))}re=null}}},j=function(e){var t=e.target,i=t.parentNode;if(i!==g){var n=Ve(e),r=n.tagName;if("text"===r&&"textedit"!==ae){var a=svgedit.math.transformPoint(e.pageX,e.pageY,Ne);xe.select(n,a.x,a.y)}"g"!==r&&"a"!==r||!svgedit.utilities.getRotationAngle(n)||(Ke(n),n=b[0],Le(!0)),g&&$e(),"g"!==i.tagName&&"a"!==i.tagName||i===p().getCurrentLayer()||n===q.selectorParentGroup||Ue(n)}},R=function(e){return e.preventDefault(),!1};$(e).mousedown(L).mousemove(M).click(R).dblclick(j).mouseup(O),$(e).bind("mousewheel DOMMouseScroll",function(e){e.preventDefault();var t=e.originalEvent;Ne=$("#svgcontent g")[0].getScreenCTM().inverse();var i=svgedit.math.transformPoint(t.pageX,t.pageY,Ne),n={x:i.x,y:i.y,width:0,height:0},r=t.wheelDelta?t.wheelDelta:t.detail?-t.detail:0;r&&(n.factor=Math.max(.75,Math.min(4/3,r)),V("zoomed",n))})}();var Oe=function(e){$(e).click(function(e){e.preventDefault()})};xe=o.textActions=function(){function e(e){var t=""===p.value;if($(p).focus(),!arguments.length)if(t)e=0;else{if(p.selectionEnd!==p.selectionStart)return;e=p.selectionEnd}var i;i=C[e],t||p.setSelectionRange(e,e),g=svgedit.utilities.getElem("text_cursor"),g||(g=document.createElementNS(r.SVG,"line"),svgedit.utilities.assignAttributes(g,{id:"text_cursor",stroke:"#333","stroke-width":1}),g=svgedit.utilities.getElem("selectorParentGroup").appendChild(g)),v||(v=setInterval(function(){var e="none"===g.getAttribute("display");g.setAttribute("display",e?"inline":"none")},600));var n=l(i.x,y.y),a=l(i.x,y.y+y.height);svgedit.utilities.assignAttributes(g,{x1:n.x,y1:n.y,x2:a.x,y2:a.y,visibility:"visible",display:"inline"}),m&&m.setAttribute("d","")}function t(t,i,n){if(t===i)return void e(i);n||p.setSelectionRange(t,i),m=svgedit.utilities.getElem("text_selectblock"),m||(m=document.createElementNS(r.SVG,"path"),svgedit.utilities.assignAttributes(m,{id:"text_selectblock",fill:"green",opacity:.5,style:"pointer-events:none"}),svgedit.utilities.getElem("selectorParentGroup").appendChild(m));var a=C[t],s=C[i];g.setAttribute("visibility","hidden");var o=l(a.x,y.y),u=l(a.x+(s.x-a.x),y.y),c=l(a.x,y.y+y.height),d=l(a.x+(s.x-a.x),y.y+y.height),h="M"+o.x+","+o.y+" L"+u.x+","+u.y+" "+d.x+","+d.y+" "+c.x+","+c.y+"z";svgedit.utilities.assignAttributes(m,{d:h,display:"inline"})}function i(e,t){var i=u.createSVGPoint();if(i.x=e,i.y=t,1==C.length)return 0;var n=h.getCharNumAtPosition(i);0>n?(n=C.length-2,e<=C[0].x&&(n=0)):n>=C.length-2&&(n=C.length-2);var r=C[n],a=r.x+r.width/2;return e>a&&n++,n}function n(t,n){e(i(t,n))}function a(e,n,r){var a=p.selectionStart,s=i(e,n),o=Math.min(a,s),l=Math.max(a,s);t(o,l,!r)}function s(e,t){var i={x:e,y:t};if(i.x/=f,i.y/=f,_){var n=svgedit.math.transformPoint(i.x,i.y,_.inverse());i.x=n.x,i.y=n.y}return i}function l(e,t){var i={x:e,y:t};if(_){var n=svgedit.math.transformPoint(i.x,i.y,_);i.x=n.x,i.y=n.y}return i.x*=f,i.y*=f,i}function c(e){t(0,h.textContent.length),$(this).unbind(e)}function d(e){if(w&&h){var n=svgedit.math.transformPoint(e.pageX,e.pageY,Ne),r=n.x*f,a=n.y*f,o=s(r,a),l=i(o.x,o.y),u=h.textContent,d=u.substr(0,l).replace(/[a-z0-9]+$/i,"").length,p=u.substr(l).match(/^[a-z0-9]+/i),g=(p?p[0].length:0)+l;t(d,g),$(e.target).click(c),setTimeout(function(){$(e.target).unbind("click",c)},300)}}var h,p,g,m,v,y,_,x,S,w,C=[];return{select:function(e,t,i){h=e,xe.toEditMode(t,i)},start:function(e){h=e,xe.toEditMode()},mouseDown:function(e,t,i,r){var a=s(i,r);p.focus(),n(a.x,a.y),x=i,S=r},mouseMove:function(e,t){var i=s(e,t);a(i.x,i.y)},mouseUp:function(e,t,i){var n=s(t,i);a(n.x,n.y,!0),e.target!==h&&x+2>t&&t>x-2&&S+2>i&&i>S-2&&xe.toSelectMode(!0)},setCursor:e,toEditMode:function(t,i){w=!1,ae="textedit",q.requestSelector(h).showGrips(!1);q.requestSelector(h).selectorRect;if(xe.init(),$(h).css("cursor","text"),arguments.length){var r=s(t,i);n(r.x,r.y)}else e();setTimeout(function(){w=!0},300)},toSelectMode:function(e){ae="select",clearInterval(v),v=null,m&&$(m).attr("display","none"),g&&$(g).attr("visibility","hidden"),$(h).css("cursor","move"),e&&(Le(),$(h).css("cursor","move"),V("selected",[h]),Ie([h],!0)),h&&!h.textContent.length&&o.deleteSelectedElements(),$(p).blur(),h=!1},setInputElem:function(e){p=e},clear:function(){"textedit"==ae&&xe.toSelectMode()},init:function(e){if(h){var i,n;h.parentNode||(h=b[0],q.requestSelector(h).showGrips(!1));var r=h.textContent,a=r.length,s=h.getAttribute("transform");for(y=svgedit.utilities.getBBox(h),_=s?svgedit.math.getMatrix(h):null,C=[],C.length=a,p.focus(),$(h).unbind("dblclick",d).dblclick(d),a||(n={x:y.x+y.width/2,width:0}),i=0;a>i;i++){var l=h.getStartPositionOfChar(i);if(n=h.getEndPositionOfChar(i),!svgedit.browser.supportsGoodTextCharPos()){var u=o.contentW*f;l.x-=u,n.x-=u,l.x/=f,n.x/=f}C[i]={x:l.x,y:y.y,width:n.x-l.x,height:y.height}}C.push({x:n.x,width:0}),t(p.selectionStart,p.selectionEnd,!0)}}}}(),Se=o.pathActions=function(){function t(e){e.setAttribute("d",Se.convertPath(e))}var i,s,l,u=!1;svgedit.path.Path.prototype.endChanges=function(e){svgedit.browser.isWebkit()&&t(this.elem);var i=new svgedit.history.ChangeElementCommand(this.elem,{d:this.last_d},e);z(i),V("changed",[this.elem])},svgedit.path.Path.prototype.addPtsToSelection=function(e){var t,i;for($.isArray(e)||(e=[e]),t=0;t<e.length;t++){var n=e[t];i=this.segs[n],i.ptgrip&&-1==this.selected_pts.indexOf(n)&&n>=0&&this.selected_pts.push(n)}this.selected_pts.sort(),t=this.selected_pts.length;var r=[];for(r.length=t;t--;){var a=this.selected_pts[t];i=this.segs[a],i.select(!0),r[t]=i.ptgrip}Se.canDeleteNodes=!0,Se.closed_subpath=this.subpathIsClosed(this.selected_pts[0]),V("selected",r)},i=null;var c=null,d=!1,h=function(e){var t,i=e.points,n=i.numberOfItems;if(n>=4){var r=i.getItem(0),a=null,s=[];for(s.push(["M",r.x,",",r.y," C"].join("")),t=1;n-4>=t;t+=3){var o=i.getItem(t),l=i.getItem(t+1),u=i.getItem(t+2);if(a){var c=svgedit.path.smoothControlPoints(a,o,r);if(c&&2==c.length){var d=s[s.length-1].split(",");d[2]=c[0].x,d[3]=c[0].y,s[s.length-1]=d.join(","),o=c[1]}}s.push([o.x,o.y,l.x,l.y,u.x,u.y].join(",")),r=u,a=l}for(s.push("L");n>t;){var h=i.getItem(t);s.push([h.x,h.y].join(",")),t++}s=s.join(" "),e=_({element:"path",curStyles:!0,attr:{id:be(),d:s,fill:"none"}})}return e};return{mouseDown:function(t,i,n,o){var l;if("path"!==ae){if(svgedit.path.path){svgedit.path.path.storeD(),l=t.target.id;var d;if("pathpointgrip_"==l.substr(0,14)){d=svgedit.path.path.cur_pt=parseInt(l.substr(14)),svgedit.path.path.dragging=[n,o];var h=svgedit.path.path.segs[d];t.shiftKey?h.selected?svgedit.path.path.removePtFromSelection(d):svgedit.path.path.addPtsToSelection(d):((svgedit.path.path.selected_pts.length<=1||!h.selected)&&svgedit.path.path.clearSelection(),svgedit.path.path.addPtsToSelection(d))}else if(0==l.indexOf("ctrlpointgrip_")){svgedit.path.path.dragging=[n,o];var p=l.split("_")[1].split("c");d=Number(p[0]);var g=Number(p[1]);svgedit.path.path.selectPt(d,g)}svgedit.path.path.dragging||(null==de&&(de=q.getRubberBandBox()),svgedit.utilities.assignAttributes(de,{x:n*f,y:o*f,width:0,height:0,display:"inline"},100))}}else{mouse_x=n,mouse_y=o;var m=mouse_x/f,y=mouse_y/f,b=svgedit.utilities.getElem("path_stretch_line");s=[m,y],a.gridSnapping&&(m=svgedit.utilities.snapToGrid(m),y=svgedit.utilities.snapToGrid(y),mouse_x=svgedit.utilities.snapToGrid(mouse_x),mouse_y=svgedit.utilities.snapToGrid(mouse_y)),b||(b=document.createElementNS(r.SVG,"path"),svgedit.utilities.assignAttributes(b,{id:"path_stretch_line",stroke:"#22C","stroke-width":"0.5",fill:"none"}),b=svgedit.utilities.getElem("selectorParentGroup").appendChild(b)),b.setAttribute("display","inline");var x,S=null;if(c){for(var w=c.pathSegList,C=w.numberOfItems,k=6/f,A=!1;C;){C--;var P=w.getItem(C),T=P.x,E=P.y;if(m>=T-k&&T+k>=m&&y>=E-k&&E+k>=y){A=!0;break}}l=be(),svgedit.path.removePath_(l);var G,N,L=svgedit.utilities.getElem(l),I=w.numberOfItems;if(A){if(1>=C&&I>=2){var M=w.getItem(0).x,V=w.getItem(0).y;N=b.pathSegList.getItem(1),G=4===N.pathSegType?c.createSVGPathSegLinetoAbs(M,V):c.createSVGPathSegCurvetoCubicAbs(M,V,N.x1/f,N.y1/f,M,V);var O=c.createSVGPathSegClosePath();w.appendItem(G),w.appendItem(O)}else if(3>I)return S=!1;if($(b).remove(),element=L,c=null,ne=!1,u){svgedit.path.path.matrix&&svgedit.coords.remapElement(L,{},svgedit.path.path.matrix.inverse());var j=L.getAttribute("d"),R=$(svgedit.path.path.elem).attr("d");return $(svgedit.path.path.elem).attr("d",R+j),$(L).remove(),svgedit.path.path.matrix&&svgedit.path.recalcRotatedPath(),svgedit.path.path.init(),Se.toEditMode(svgedit.path.path.elem),svgedit.path.path.selectPt(),!1}}else{if(!$.contains(e,Ve(t)))return console.log("Clicked outside canvas"),!1;var B=c.pathSegList.numberOfItems,D=c.pathSegList.getItem(B-1),F=D.x,H=D.y;if(t.shiftKey){var U=svgedit.math.snapToAngle(F,H,m,y);m=U.x,y=U.y}N=b.pathSegList.getItem(1),G=4===N.pathSegType?c.createSVGPathSegLinetoAbs(ve(m),ve(y)):c.createSVGPathSegCurvetoCubicAbs(ve(m),ve(y),N.x1/f,N.y1/f,N.x2/f,N.y2/f),c.pathSegList.appendItem(G),m*=f,y*=f,b.setAttribute("d",["M",m,y,m,y].join(" ")),x=B,u&&(x+=svgedit.path.path.segs.length),svgedit.path.addPointGrip(x,m,y)}}else d_attr="M"+m+","+y+" ",c=_({element:"path",curStyles:!0,attr:{d:d_attr,id:_e(),opacity:v.opacity/2}}),b.setAttribute("d",["M",mouse_x,mouse_y,mouse_x,mouse_y].join(" ")),x=u?svgedit.path.path.segs.length:0,svgedit.path.addPointGrip(x,mouse_x,mouse_y)}},mouseMove:function(e,t){if(d=!0,"path"!==ae)if(svgedit.path.path.dragging){var i=svgedit.path.getPointFromGrip({x:svgedit.path.path.dragging[0],y:svgedit.path.path.dragging[1]},svgedit.path.path),n=svgedit.path.getPointFromGrip({x:e,y:t},svgedit.path.path),r=n.x-i.x,a=n.y-i.y;svgedit.path.path.dragging=[e,t],svgedit.path.path.dragctrl?svgedit.path.path.moveCtrl(r,a):svgedit.path.path.movePts(r,a)}else svgedit.path.path.selected_pts=[],svgedit.path.path.eachSeg(function(e){var t=this;if(t.next||t.prev){var i=(t.item,de.getBBox()),n=svgedit.path.getGripPt(t),r={x:n.x,y:n.y,width:0,height:0},a=svgedit.math.rectsIntersect(i,r);this.select(a),a&&svgedit.path.path.selected_pts.push(t.index)}});else{if(!c)return;var o=c.pathSegList,u=o.numberOfItems-1;if(s){var h=svgedit.path.addCtrlGrip("1c1"),p=svgedit.path.addCtrlGrip("0c2");h.setAttribute("cx",e),h.setAttribute("cy",t),h.setAttribute("display","inline");var g=s[0],m=s[1],v=(o.getItem(u),e/f),y=t/f,b=g+(g-v),_=m+(m-y);p.setAttribute("cx",b*f),p.setAttribute("cy",_*f),p.setAttribute("display","inline");var x=svgedit.path.getCtrlLine(1);if(svgedit.utilities.assignAttributes(x,{x1:e,y1:t,x2:b*f,y2:_*f,display:"inline"}),0===u)l=[e,t];else{var S=o.getItem(u-1),w=S.x,C=S.y;6===S.pathSegType?(w+=w-S.x2,C+=C-S.y2):l&&(w=l[0]/f,C=l[1]/f),svgedit.path.replacePathSeg(6,u,[g,m,w,C,b,_],c)}}else{var k=svgedit.utilities.getElem("path_stretch_line");if(k){var A=o.getItem(u);if(6===A.pathSegType){var P=A.x+(A.x-A.x2),T=A.y+(A.y-A.y2);svgedit.path.replacePathSeg(6,1,[e,t,P*f,T*f,e,t],k)}else l?svgedit.path.replacePathSeg(6,1,[e,t,l[0],l[1],e,t],k):svgedit.path.replacePathSeg(4,1,[e,t],k)}}}},mouseUp:function(e,t,i,n){if("path"===ae)return s=null,c||(t=svgedit.utilities.getElem(be()),ne=!1,l=null),{keep:!0,element:t};if(svgedit.path.path.dragging){var r=svgedit.path.path.cur_pt;svgedit.path.path.dragging=!1,svgedit.path.path.dragctrl=!1,svgedit.path.path.update(),d&&svgedit.path.path.endChanges("Move path point(s)"),e.shiftKey||d||svgedit.path.path.selectPt(r)}else de&&"none"!=de.getAttribute("display")?(de.setAttribute("display","none"),de.getAttribute("width")<=2&&de.getAttribute("height")<=2&&Se.toSelectMode(e.target)):Se.toSelectMode(e.target);d=!1},toEditMode:function(e){svgedit.path.path=svgedit.path.getPath_(e),ae="pathedit",Le(),svgedit.path.path.show(!0).update(),svgedit.path.path.oldbbox=svgedit.utilities.getBBox(svgedit.path.path.elem),u=!1},toSelectMode:function(e){var t=e==svgedit.path.path.elem;ae="select",svgedit.path.path.show(!1),i=!1,Le(),svgedit.path.path.matrix&&svgedit.path.recalcRotatedPath(),t&&(V("selected",[e]),Ie([e],!0))},addSubPath:function(e){e?(ae="path",u=!0):(Se.clear(!0),Se.toEditMode(svgedit.path.path.elem))},select:function(e){i===e?(Se.toEditMode(e),ae="pathedit"):i=e},reorient:function(){var e=b[0];if(e){var t=svgedit.utilities.getRotationAngle(e);if(0!=t){var i=new svgedit.history.BatchCommand("Reorient path"),n={d:e.getAttribute("d"),transform:e.getAttribute("transform")};i.addSubCommand(new svgedit.history.ChangeElementCommand(e,n)),Le(),this.resetOrientation(e),z(i),svgedit.path.getPath_(e).show(!1).matrix=null,this.clear(),Ie([e],!0),V("changed",b)}}},clear:function(e){if(i=null,c){var t=svgedit.utilities.getElem(be());$(svgedit.utilities.getElem("path_stretch_line")).remove(),$(t).remove(),$(svgedit.utilities.getElem("pathpointgrip_container")).find("*").attr("display","none"),c=l=null,ne=!1}else"pathedit"==ae&&this.toSelectMode();svgedit.path.path&&svgedit.path.path.init().show(!1)},resetOrientation:function(e){if(null==e||"path"!=e.nodeName)return!1;var t=svgedit.transformlist.getTransformList(e),i=svgedit.math.transformListToTransform(t).matrix;t.clear(),e.removeAttribute("transform");var r,a=e.pathSegList,s=a.numberOfItems;for(r=0;s>r;++r){var o=a.getItem(r),l=o.pathSegType;if(1!=l){var u=[];$.each(["",1,2],function(e,t){var n=o["x"+t],r=o["y"+t];if(void 0!==n&&void 0!==r){var a=svgedit.math.transformPoint(n,r,i);u.splice(u.length,0,a.x,a.y)}}),svgedit.path.replacePathSeg(l,r,u,e)}}n(e,i)},zoomChange:function(){"pathedit"==ae&&svgedit.path.path.update()},getNodePoint:function(){var e=svgedit.path.path.selected_pts.length?svgedit.path.path.selected_pts[0]:1,t=svgedit.path.path.segs[e];return{x:t.item.x,y:t.item.y,type:t.type}},linkControlPoints:function(e){svgedit.path.setLinkControlPoints(e)},clonePathNode:function(){svgedit.path.path.storeD();for(var e=svgedit.path.path.selected_pts,t=(svgedit.path.path.segs,e.length),i=[];t--;){var n=e[t];svgedit.path.path.addSeg(n),i.push(n+t),i.push(n+t+1)}svgedit.path.path.init().addPtsToSelection(i),svgedit.path.path.endChanges("Clone path node(s)")},opencloseSubPath:function(){var e=svgedit.path.path.selected_pts;if(1===e.length){var t=svgedit.path.path.elem,i=t.pathSegList,n=(i.numberOfItems,e[0]),r=null,a=null;if(svgedit.path.path.eachSeg(function(e){return 2===this.type&&n>=e&&(a=this.item),n>=e?!0:2===this.type?(r=e,!1):1===this.type?(r=!1,!1):void 0}),null==r&&(r=svgedit.path.path.segs.length-1),r!==!1){var s=t.createSVGPathSegLinetoAbs(a.x,a.y),o=t.createSVGPathSegClosePath();return r==svgedit.path.path.segs.length-1?(i.appendItem(s),i.appendItem(o)):(svgedit.path.insertItemBefore(t,o,r),svgedit.path.insertItemBefore(t,s,r)),void svgedit.path.path.init().selectPt(r+1)}var l=svgedit.path.path.segs[n];if(l.mate)return i.removeItem(n),i.removeItem(n),void svgedit.path.path.init().selectPt(n-1);var u,c,d;for(u=0;u<i.numberOfItems;u++){var h=i.getItem(u);
if(2===h.pathSegType)c=u;else if(u===n)i.removeItem(c);else if(1===h.pathSegType&&u>n){d=u-1,i.removeItem(u);break}}for(var p=n-c-1;p--;)svgedit.path.insertItemBefore(t,i.getItem(c),d);var f=i.getItem(c);svgedit.path.replacePathSeg(2,c,[f.x,f.y]),u=n,svgedit.path.path.init().selectPt(0)}},deletePathNode:function(){if(Se.canDeleteNodes){svgedit.path.path.storeD();for(var e=svgedit.path.path.selected_pts,t=e.length;t--;){var i=e[t];svgedit.path.path.deleteSeg(i)}var n=function(){var e=svgedit.path.path.elem.pathSegList,t=e.numberOfItems,i=function(t,i){for(;i--;)e.removeItem(t)};if(1>=t)return!0;for(;t--;){var r=e.getItem(t);if(1===r.pathSegType){var a=e.getItem(t-1),s=e.getItem(t-2);if(2===a.pathSegType){i(t-1,2),n();break}if(2===s.pathSegType){i(t-2,3),n();break}}else if(2===r.pathSegType&&t>0){var o=e.getItem(t-1).pathSegType;if(2===o){i(t-1,1),n();break}if(1===o&&e.numberOfItems-1===t){i(t,1),n();break}}}return!1};if(n(),svgedit.path.path.elem.pathSegList.numberOfItems<=1)return Se.toSelectMode(svgedit.path.path.elem),void o.deleteSelectedElements();if(svgedit.path.path.init(),svgedit.path.path.clearSelection(),window.opera){var r=$(svgedit.path.path.elem);r.attr("d",r.attr("d"))}svgedit.path.path.endChanges("Delete path node(s)")}},smoothPolylineIntoPath:h,setSegType:function(e){svgedit.path.path.setSegType(e)},moveNode:function(e,t){var i=svgedit.path.path.selected_pts;if(i.length){svgedit.path.path.storeD();var n=svgedit.path.path.segs[i[0]],r={x:0,y:0};r[e]=t-n.item[e],n.move(r.x,r.y),svgedit.path.path.endChanges("Move path point")}},fixEnd:function(e){var i,n,r=e.pathSegList,a=r.numberOfItems;for(i=0;a>i;++i){var s=r.getItem(i);if(2===s.pathSegType&&(n=s),1===s.pathSegType){var o=r.getItem(i-1);if(o.x!=n.x||o.y!=n.y){var l=e.createSVGPathSegLinetoAbs(n.x,n.y);svgedit.path.insertItemBefore(e,l,i),Se.fixEnd(e);break}}}svgedit.browser.isWebkit()&&t(e)},convertPath:function(e,t){var i,n=e.pathSegList,r=n.numberOfItems,a=0,s=0,o="",l=null;for(i=0;r>i;++i){var u=n.getItem(i),c=u.x||0,d=u.y||0,h=u.x1||0,p=u.y1||0,f=u.x2||0,g=u.y2||0,m=u.pathSegType,v=Ee[m]["to"+(t?"Lower":"Upper")+"Case"](),y=function(e,t,i){t=t?" "+t.join(" "):"",i=i?" "+svgedit.units.shortFloat(i):"",$.each(e,function(t,i){e[t]=svgedit.units.shortFloat(i)}),o+=v+e.join(" ")+t+i};switch(m){case 1:o+="z";break;case 12:c-=a;case 13:t?(a+=c,v="l"):(c+=a,a=c,v="L"),y([[c,s]]);break;case 14:d-=s;case 15:t?(s+=d,v="l"):(d+=s,s=d,v="L"),y([[a,d]]);break;case 2:case 4:case 18:c-=a,d-=s;case 5:case 3:l&&1===n.getItem(i-1).pathSegType&&!t&&(a=l[0],s=l[1]);case 19:t?(a+=c,s+=d):(c+=a,d+=s,a=c,s=d),3===m&&(l=[a,s]),y([[c,d]]);break;case 6:c-=a,h-=a,f-=a,d-=s,p-=s,g-=s;case 7:t?(a+=c,s+=d):(c+=a,h+=a,f+=a,d+=s,p+=s,g+=s,a=c,s=d),y([[h,p],[f,g],[c,d]]);break;case 8:c-=a,h-=a,d-=s,p-=s;case 9:t?(a+=c,s+=d):(c+=a,h+=a,d+=s,p+=s,a=c,s=d),y([[h,p],[c,d]]);break;case 10:c-=a,d-=s;case 11:t?(a+=c,s+=d):(c+=a,d+=s,a=c,s=d),y([[u.r1,u.r2]],[u.angle,u.largeArcFlag?1:0,u.sweepFlag?1:0],[c,d]);break;case 16:c-=a,f-=a,d-=s,g-=s;case 17:t?(a+=c,s+=d):(c+=a,f+=a,d+=s,g+=s,a=c,s=d),y([[f,g],[c,d]])}}return o}}}();var je=this.removeUnusedDefElems=function(){var e=c.getElementsByTagNameNS(r.SVG,"defs");if(!e||!e.length)return 0;var t,i,n=[],a=0,s=["fill","stroke","filter","marker-start","marker-mid","marker-end"],o=s.length,l=c.getElementsByTagNameNS(r.SVG,"*"),u=l.length;for(t=0;u>t;t++){var d=l[t];for(i=0;o>i;i++){var h=svgedit.utilities.getUrlFromAttr(d.getAttribute(s[i]));h&&n.push(h.substr(1))}var p=T(d);p&&0===p.indexOf("#")&&n.push(p.substr(1))}var f=$(e).find("linearGradient, radialGradient, filter, marker, svg, symbol");for(t=f.length;t--;){var g=f[t],m=g.id;n.indexOf(m)<0&&(ge[m]=g,g.parentNode.removeChild(g),a++)}return a};this.svgCanvasToString=function(){for(;je()>0;);Se.clear(!0),$.each(c.childNodes,function(e,t){e&&8===t.nodeType&&t.data.indexOf("Created with")>=0&&c.insertBefore(t,c.firstChild)}),g&&($e(),Me([g]));var e=[];$(c).find("g:data(gsvg)").each(function(){var t,i=this.attributes,n=i.length;for(t=0;n>t;t++)("id"==i[t].nodeName||"style"==i[t].nodeName)&&n--;if(0>=n){var r=this.firstChild;e.push(r),$(this).replaceWith(r)}});var t=this.svgToString(c,0);return e.length&&$(e).each(function(){ke(this)}),t},this.svgToString=function(e,t){var i=[],n=svgedit.utilities.toXml,s=a.baseUnit,o=new RegExp("^-?[\\d\\.]+"+s+"$");if(e){I(e);var l,u,c=e.attributes,d=e.childNodes;for(u=0;t>u;u++)i.push(" ");if(i.push("<"),i.push(e.nodeName),"svgcontent"===e.id){var h=ze(),p="";"px"!==s&&(h.w=svgedit.units.convertUnit(h.w,s)+s,h.h=svgedit.units.convertUnit(h.h,s)+s),i.push(' width="'+h.w+'" height="'+h.h+'"'+p+' xmlns="'+r.SVG+'"');var f={};$(e).find("*").andSelf().each(function(){var e=this.namespaceURI;e&&!f[e]&&j[e]&&"xmlns"!==j[e]&&"xml"!==j[e]&&(f[e]=!0,i.push(" xmlns:"+j[e]+'="'+e+'"')),$.each(this.attributes,function(e,t){var n=t.namespaceURI;n&&!f[n]&&"xmlns"!==j[n]&&"xml"!==j[n]&&(f[n]=!0,i.push(" xmlns:"+j[n]+'="'+n+'"'))})}),u=c.length;for(var g=["width","height","xmlns","x","y","viewBox","id","overflow"];u--;){l=c.item(u);var m=n(l.value);0!==l.nodeName.indexOf("xmlns:")&&""!=m&&-1==g.indexOf(l.localName)&&(!l.namespaceURI||j[l.namespaceURI])&&(i.push(" "),i.push(l.nodeName),i.push('="'),i.push(m),i.push('"'))}}else{if("defs"===e.nodeName&&!e.firstChild)return;var v=["-moz-math-font-style","_moz-math-font-style"];for(u=c.length-1;u>=0;u--){l=c.item(u);var m=n(l.value);if(!(v.indexOf(l.localName)>=0)&&""!=m){if(0===m.indexOf("pointer-events"))continue;if("class"===l.localName&&0===m.indexOf("se_"))continue;if(i.push(" "),"d"===l.localName&&(m=Se.convertPath(e,!0)),isNaN(m)?o.test(m)&&(m=svgedit.units.shortFloat(m)+s):m=svgedit.units.shortFloat(m),ie.apply&&"image"===e.nodeName&&"href"===l.localName&&ie.images&&"embed"===ie.images){var y=J[m];y&&(m=y)}(!l.namespaceURI||l.namespaceURI==r.SVG||j[l.namespaceURI])&&(i.push(l.nodeName),i.push('="'),i.push(m),i.push('"'))}}}if(e.hasChildNodes()){i.push(">"),t++;var b=!1;for(u=0;u<d.length;u++){var _=d.item(u);switch(_.nodeType){case 1:i.push("\n"),i.push(this.svgToString(d.item(u),t));break;case 3:var x=_.nodeValue.replace(/^\s+|\s+$/g,"");""!=x&&(b=!0,i.push(String(n(x))));break;case 4:i.push("\n"),i.push(new Array(t+1).join(" ")),i.push("<![CDATA["),i.push(_.nodeValue),i.push("]]>");break;case 8:i.push("\n"),i.push(new Array(t+1).join(" ")),i.push("<!--"),i.push(_.data),i.push("-->")}}if(t--,!b)for(i.push("\n"),u=0;t>u;u++)i.push(" ");i.push("</"),i.push(e.nodeName),i.push(">")}else i.push("/>")}return i.join("")},this.embedImage=function(e,t){$(new Image).load(function(){var i=document.createElement("canvas");i.width=this.width,i.height=this.height,i.getContext("2d").drawImage(this,0,0);try{var n=";svgedit_url="+encodeURIComponent(e);n=i.toDataURL().replace(";base64",n+";base64"),J[e]=n}catch(r){J[e]=!1}ee=e,t&&t(J[e])}).attr("src",e)},this.setGoodImage=function(e){ee=e},this.open=function(){},this.save=function(e){Le(),e&&$.extend(ie,e),ie.apply=!0;var t=this.svgCanvasToString();V("saved",t)},this.rasterExport=function(e,t,n){var r="image/"+e.toLowerCase(),a=i(),s=this.svgCanvasToString();svgedit.utilities.buildCanvgCallback(function(){var i=e||"PNG";$("#export_canvas").length||$("<canvas>",{id:"export_canvas"}).hide().appendTo("body");var o=$("#export_canvas")[0];o.width=svgCanvas.contentW,o.height=svgCanvas.contentH,canvg(o,s,{renderCallback:function(){var l=("ICO"===i?"BMP":i).toLowerCase(),u=t?o.toDataURL("image/"+l,t):o.toDataURL("image/"+l);V("exported",{datauri:u,svg:s,issues:a,type:e,mimeType:r,quality:t,exportWindowName:n})}})})()},this.exportPDF=function(e,t){var n=this;svgedit.utilities.buildJSPDFCallback(function(){var r=ze(),a=r.w>r.h?"landscape":"portrait",s="pt",o=jsPDF({orientation:a,unit:s,format:[r.w,r.h]}),l=qe();o.setProperties({title:l});var u=i(),c=n.svgCanvasToString();o.addSVG(c,0,0);var d={svg:c,issues:u,exportWindowName:e},h=t||"dataurlstring";d[h]=o.output(h),V("exportedPDF",d)})()},this.getSvgString=function(){return ie.apply=!1,this.svgCanvasToString()},this.randomizeIds=function(e){arguments.length>0&&0==e?svgedit.draw.randomizeIds(!1,p()):svgedit.draw.randomizeIds(!0,p())};var Re=this.uniquifyElems=function(e){var t={},i=["filter","linearGradient","pattern","radialGradient","symbol","textPath","use"];svgedit.utilities.walkTree(e,function(e){if(1==e.nodeType){e.id&&(e.id in t||(t[e.id]={elem:null,attrs:[],hrefs:[]}),t[e.id].elem=e),$.each(Y,function(i,n){var r=e.getAttributeNode(n);if(r){var a=svgedit.utilities.getUrlFromAttr(r.value),s=a?a.substr(1):null;s&&(s in t||(t[s]={elem:null,attrs:[],hrefs:[]}),t[s].attrs.push(r))}});var n=svgedit.utilities.getHref(e);if(n&&i.indexOf(e.nodeName)>=0){var r=n.substr(1);r&&(r in t||(t[r]={elem:null,attrs:[],hrefs:[]}),t[r].hrefs.push(e))}}});var n;for(n in t)if(n){var r=t[n].elem;if(r){var a=_e();r.id=a;for(var s=t[n].attrs,o=s.length;o--;){var l=s[o];l.ownerElement.setAttribute(l.name,"url(#"+a+")")}for(var u=t[n].hrefs,c=u.length;c--;){var d=u[c];svgedit.utilities.setHref(d,"#"+a)}}}},Be=this.setUseData=function(e){var t=$(e);"use"!==e.tagName&&(t=t.find("use")),t.each(function(){var e=T(this).substr(1),t=svgedit.utilities.getElem(e);t&&($(this).data("ref",t),("symbol"==t.tagName||"svg"==t.tagName)&&$(this).data("symbol",t).data("ref",t))})},De=this.convertGradients=function(e){var t=$(e).find("linearGradient, radialGradient");!t.length&&svgedit.browser.isWebkit()&&(t=$(e).find("*").filter(function(){return this.tagName.indexOf("Gradient")>=0})),t.each(function(){var e=this;if("userSpaceOnUse"===$(e).attr("gradientUnits")){var t=$(c).find('[fill="url(#'+e.id+')"],[stroke="url(#'+e.id+')"]');if(!t.length)return;var i=svgedit.utilities.getBBox(t[0]);if(!i)return;if("linearGradient"===e.tagName){var n=$(e).attr(["x1","y1","x2","y2"]),r=e.gradientTransform.baseVal;if(r&&r.numberOfItems>0){var a=svgedit.math.transformListToTransform(r).matrix,s=svgedit.math.transformPoint(n.x1,n.y1,a),o=svgedit.math.transformPoint(n.x2,n.y2,a);n.x1=s.x,n.y1=s.y,n.x2=o.x,n.y2=o.y,e.removeAttribute("gradientTransform")}$(e).attr({x1:(n.x1-i.x)/i.width,y1:(n.y1-i.y)/i.height,x2:(n.x2-i.x)/i.width,y2:(n.y2-i.y)/i.height}),e.removeAttribute("gradientUnits")}}})},Fe=this.convertToGroup=function(e){e||(e=b[0]);var t,i=$(e),n=new svgedit.history.BatchCommand;if(i.data("gsvg")){var a=e.firstChild,s=$(a).attr(["x","y"]);$(e.firstChild.firstChild).unwrap(),$(e).removeData("gsvg");var o=svgedit.transformlist.getTransformList(e),d=u.createSVGTransform();d.setTranslate(s.x,s.y),o.appendItem(d),svgedit.recalculate.recalculateDimensions(e),V("selected",[e])}else if(i.data("symbol")){e=i.data("symbol"),t=i.attr("transform");var h=i.attr(["x","y"]),p=e.getAttribute("viewBox");if(p){var f=p.split(" ");h.x-=+f[0],h.y-=+f[1]}t+=" translate("+(h.x||0)+","+(h.y||0)+")";var g=i.prev();n.addSubCommand(new svgedit.history.RemoveElementCommand(i[0],i[0].nextSibling,i[0].parentNode)),i.remove();var m,v=$(c).find("use:data(symbol)").length,y=l.createElementNS(r.SVG,"g"),_=e.childNodes;for(m=0;m<_.length;m++)y.appendChild(_[m].cloneNode(!0));if(svgedit.browser.isGecko()){var x=$(svgedit.utilities.findDefs()).children("linearGradient,radialGradient,pattern").clone();$(y).append(x)}t&&y.setAttribute("transform",t);var S=e.parentNode;if(Re(y),svgedit.browser.isGecko()&&$(A()).append($(y).find("linearGradient,radialGradient,pattern")),y.id=_e(),g.after(y),S){if(!v){var w=e.nextSibling;S.removeChild(e),n.addSubCommand(new svgedit.history.RemoveElementCommand(e,w,S))}n.addSubCommand(new svgedit.history.InsertElementCommand(y))}Be(y),De(svgedit.browser.isGecko()?svgedit.utilities.findDefs():y),svgedit.utilities.walkTreePost(y,function(e){try{svgedit.recalculate.recalculateDimensions(e)}catch(t){console.log(t)}}),$(y).find(X).each(function(){this.id||(this.id=_e())}),Me([y]);var C=Ke(y,!0);C&&n.addSubCommand(C),z(n)}else console.log("Unexpected element to ungroup:",e)};this.setSvgString=function(e){try{var t=svgedit.utilities.text2xml(e);this.prepareSvg(t);var i=new svgedit.history.BatchCommand("Change Source"),n=c.nextSibling,s=u.removeChild(c);i.addSubCommand(new svgedit.history.RemoveElementCommand(s,n,u)),c=l.adoptNode?l.adoptNode(t.documentElement):l.importNode(t.documentElement,!0),u.appendChild(c);var d=$(c);o.current_drawing_=new svgedit.draw.Drawing(c,h);var g=p().getNonce();g?V("setnonce",g):V("unsetnonce"),d.find("image").each(function(){var e=this;Oe(e);var t=T(this);if(t){if(0===t.indexOf("data:")){var i=t.match(/svgedit_url=(.*?);/);if(i){var n=decodeURIComponent(i[1]);$(new Image).load(function(){e.setAttributeNS(r.XLINK,"xlink:href",n)}).attr("src",n)}}o.embedImage(t)}}),d.find("svg").each(function(){if(!$(this).closest("defs").length){Re(this);var e=this.parentNode;1===e.childNodes.length&&"g"===e.nodeName?($(e).data("gsvg",this),e.id=e.id||_e()):ke(this)}}),svgedit.browser.isGecko()&&d.find("linearGradient, radialGradient, pattern").appendTo(svgedit.utilities.findDefs()),Be(d),De(d[0]),svgedit.utilities.walkTreePost(c,function(e){try{svgedit.recalculate.recalculateDimensions(e)}catch(t){console.log(t)}});var m={id:"svgcontent",overflow:a.show_outside_canvas?"visible":"hidden"},v=!1;if(d.attr("viewBox")){var y=d.attr("viewBox").split(" ");m.width=y[2],m.height=y[3]}else $.each(["width","height"],function(e,t){var i=d.attr(t);i||(i="100%"),"%"===String(i).substr(-1)?v=!0:m[t]=svgedit.units.convertToNum(t,i)});if(He(),d.children().find(X).each(function(){this.id||(this.id=_e())}),v){var b=getStrokedBBox();m.width=b.width+b.x,m.height=b.height+b.y}m.width<=0&&(m.width=100),m.height<=0&&(m.height=100),d.attr(m),this.contentW=m.width,this.contentH=m.height,i.addSubCommand(new svgedit.history.InsertElementCommand(c));var _=d.attr(["width","height"]);i.addSubCommand(new svgedit.history.ChangeElementCommand(u,_)),f=1,svgedit.transformlist.resetListMap(),Le(),svgedit.path.clearData(),u.appendChild(q.selectorParentGroup),z(i),V("changed",[c])}catch(x){return console.log(x),!1}return!0},this.importSvgString=function(e){var t,i;try{var n=svgedit.utilities.encode64(e.length+e).substr(0,32),a=!1;oe[n]&&$(oe[n].symbol).parents("#svgroot").length&&(a=!0);var s,o=new svgedit.history.BatchCommand("Import Image");if(a)s=oe[n].symbol,i=oe[n].xform;else{var u=svgedit.utilities.text2xml(e);this.prepareSvg(u);var d;d=l.adoptNode?l.adoptNode(u.documentElement):l.importNode(u.documentElement,!0),Re(d);var h=svgedit.units.convertToNum("width",d.getAttribute("width")),f=svgedit.units.convertToNum("height",d.getAttribute("height")),m=d.getAttribute("viewBox"),v=m?m.split(" "):[0,0,h,f];for(t=0;4>t;++t)v[t]=+v[t];var y=(+c.getAttribute("width"),+c.getAttribute("height"));i=f>h?"scale("+y/3/v[3]+")":"scale("+y/3/v[2]+")",i="translate(0) "+i+" translate(0)",s=l.createElementNS(r.SVG,"symbol");var b=svgedit.utilities.findDefs();for(svgedit.browser.isGecko()&&$(d).find("linearGradient, radialGradient, pattern").appendTo(b);d.firstChild;){var _=d.firstChild;s.appendChild(_)}var x,S=d.attributes;for(x=0;x<S.length;x++){var w=S[x];s.setAttribute(w.nodeName,w.value)}s.id=_e(),oe[n]={symbol:s,xform:i},svgedit.utilities.findDefs().appendChild(s),o.addSubCommand(new svgedit.history.InsertElementCommand(s))}var C=l.createElementNS(r.SVG,"use");C.id=_e(),E(C,"#"+s.id),(g||p().getCurrentLayer()).appendChild(C),o.addSubCommand(new svgedit.history.InsertElementCommand(C)),Le(),C.setAttribute("transform",i),svgedit.recalculate.recalculateDimensions(C),$(C).data("symbol",s).data("ref",s),Ie([C]),z(o),V("changed",[c])}catch(k){return console.log(k),!1}return!0};var He=o.identifyLayers=function(){$e(),p().identifyLayers()};this.createLayer=function(e){var t=new svgedit.history.BatchCommand("Create Layer"),i=p().createLayer(e);t.addSubCommand(new svgedit.history.InsertElementCommand(i)),z(t),Le(),V("changed",[i])},this.cloneLayer=function(e){var t=new svgedit.history.BatchCommand("Duplicate Layer"),i=l.createElementNS(r.SVG,"g"),n=l.createElementNS(r.SVG,"title");n.textContent=e,i.appendChild(n);var a=p().getCurrentLayer();$(a).after(i);var s,u=a.childNodes;for(s=0;s<u.length;s++){var c=u[s];"title"!=c.localName&&i.appendChild(Ae(c))}Le(),He(),t.addSubCommand(new svgedit.history.InsertElementCommand(i)),z(t),o.setCurrentLayer(e),V("changed",[i])},this.deleteCurrentLayer=function(){var e=p().getCurrentLayer(),t=e.nextSibling,i=e.parentNode;if(e=p().deleteCurrentLayer()){var n=new svgedit.history.BatchCommand("Delete Layer");return n.addSubCommand(new svgedit.history.RemoveElementCommand(e,t,i)),z(n),Le(),V("changed",[i]),!0}return!1},this.setCurrentLayer=function(e){var t=p().setCurrentLayer(svgedit.utilities.toXml(e));return t&&Le(),t},this.renameCurrentLayer=function(e){var t,i=p();if(i.current_layer){var n=i.current_layer;if(!o.setCurrentLayer(e)){var r=new svgedit.history.BatchCommand("Rename Layer");for(t=0;t<i.getNumLayers()&&i.all_layers[t][1]!=n;++t);var a=i.getLayerName(t);i.all_layers[t][0]=svgedit.utilities.toXml(e);var s=n.childNodes.length;for(t=0;s>t;++t){var l=n.childNodes.item(t);if(l&&"title"==l.tagName){for(;l.firstChild;)l.removeChild(l.firstChild);return l.textContent=e,r.addSubCommand(new svgedit.history.ChangeElementCommand(l,{"#text":a})),z(r),V("changed",[n]),!0}}}i.current_layer=n}return!1},this.setCurrentLayerPosition=function(e){var t,i=p();if(i.current_layer&&e>=0&&e<i.getNumLayers()){for(t=0;t<i.getNumLayers()&&i.all_layers[t][1]!=i.current_layer;++t);if(t==i.getNumLayers())return!1;if(t!=e){var n=null,r=i.current_layer.nextSibling;return e>t?e<i.getNumLayers()-1&&(n=i.all_layers[e+1][1]):n=i.all_layers[e][1],c.insertBefore(i.current_layer,n),z(new svgedit.history.MoveElementCommand(i.current_layer,r,c)),He(),o.setCurrentLayer(i.getLayerName(e)),!0}}return!1},this.setLayerVisibility=function(e,t){var i=p(),n=i.getLayerVisibility(e),r=i.setLayerVisibility(e,t);if(!r)return!1;var a=n?"inline":"none";return z(new svgedit.history.ChangeElementCommand(r,{display:a},"Layer Visibility")),r==i.getCurrentLayer()&&(Le(),Se.clear()),!0},this.moveSelectedToLayer=function(e){var t,i=null,n=p();for(t=0;t<n.getNumLayers();++t)if(n.getLayerName(t)==e){i=n.all_layers[t][1];break}if(!i)return!1;var r=new svgedit.history.BatchCommand("Move Elements to Layer"),a=b;for(t=a.length;t--;){var s=a[t];if(s){var o=s.nextSibling,l=s.parentNode;i.appendChild(s),r.addSubCommand(new svgedit.history.MoveElementCommand(s,o,l))}}return z(r),!0},this.mergeLayer=function(e){var t=new svgedit.history.BatchCommand("Merge Layer"),i=p(),n=$(i.current_layer).prev()[0];if(n){var r=i.current_layer.childNodes,a=(r.length,i.current_layer.nextSibling);for(t.addSubCommand(new svgedit.history.RemoveElementCommand(i.current_layer,a,c));i.current_layer.firstChild;){var s=i.current_layer.firstChild;if("title"!=s.localName){var o=s.nextSibling;n.appendChild(s),t.addSubCommand(new svgedit.history.MoveElementCommand(s,o,i.current_layer))}else{var l=s.nextSibling;t.addSubCommand(new svgedit.history.RemoveElementCommand(s,l,i.current_layer)),i.current_layer.removeChild(s)}}return c.removeChild(i.current_layer),e||(Le(),He(),V("changed",[c]),z(t)),i.current_layer=n,t}},this.mergeAllLayers=function(){var e=new svgedit.history.BatchCommand("Merge all Layers"),t=p();for(t.current_layer=t.all_layers[t.getNumLayers()-1][1];$(c).children("g").length>1;)e.addSubCommand(o.mergeLayer(!0));Le(),He(),V("changed",[c]),z(e)};var $e=this.leaveContext=function(){var e,t=te.length;if(t){for(e=0;t>e;e++){var i=te[e],n=Q(i,"orig_opac");1!==n?i.setAttribute("opacity",n):i.removeAttribute("opacity"),i.setAttribute("style","pointer-events: inherit")}te=[],Le(!0),V("contextset",null)}g=null},Ue=this.setContext=function(e){$e(),"string"==typeof e&&(e=svgedit.utilities.getElem(e)),g=e,$(e).parentsUntil("#svgcontent").andSelf().siblings().each(function(){var e=this.getAttribute("opacity")||1;Q(this,"orig_opac",e),this.setAttribute("opacity",.33*e),this.setAttribute("style","pointer-events: none"),te.push(this)}),Le(),V("contextset",g)};this.clear=function(){Se.clear(),Le(),o.clearSvgContentElement(),o.current_drawing_=new svgedit.draw.Drawing(c),o.createLayer("Layer 1"),o.undoMgr.resetUndoStack(),q.initGroup(),de=q.getRubberBandBox(),V("cleared")},this.linkControlPoints=Se.linkControlPoints,this.getContentElem=function(){return c},this.getRootElem=function(){return u},this.getSelectedElems=function(){return b};var ze=this.getResolution=function(){var e=c.getAttribute("width")/f,t=c.getAttribute("height")/f;return{w:e,h:t,zoom:f}};this.getZoom=function(){return f},this.getVersion=function(){return"svgcanvas.js ($Rev$)"},this.setUiStrings=function(e){$.extend(W,e.notification)},this.setConfig=function(e){$.extend(a,e)},this.getTitle=function(e){var t;if(e=e||b[0]){e=$(e).data("gsvg")||$(e).data("symbol")||e;var i=e.childNodes;for(t=0;t<i.length;t++)if("title"==i[t].nodeName)return i[t].textContent;return""}},this.setGroupTitle=function(e){var t=b[0];t=$(t).data("gsvg")||t;var i=$(t).children("title"),n=new svgedit.history.BatchCommand("Set Label");if(e.length)if(i.length){var a=i[0];n.addSubCommand(new svgedit.history.ChangeElementCommand(a,{"#text":a.textContent})),a.textContent=e}else a=l.createElementNS(r.SVG,"title"),a.textContent=e,$(t).prepend(a),n.addSubCommand(new svgedit.history.InsertElementCommand(a));else{var s=i.nextSibling;n.addSubCommand(new svgedit.history.RemoveElementCommand(i[0],s,t)),i.remove()}z(n)};var qe=this.getDocumentTitle=function(){return o.getTitle(c)};this.setDocumentTitle=function(e){var t,i=c.childNodes,n=!1,a="",s=new svgedit.history.BatchCommand("Change Image Title");for(t=0;t<i.length;t++)if("title"==i[t].nodeName){n=i[t],a=n.textContent;break}n||(n=l.createElementNS(r.SVG,"title"),c.insertBefore(n,c.firstChild)),e.length?n.textContent=e:n.parentNode.removeChild(n),s.addSubCommand(new svgedit.history.ChangeElementCommand(n,{"#text":a})),z(s)},this.getEditorNS=function(e){return e&&c.setAttribute("xmlns:se",r.SE),r.SE},this.setResolution=function(e,t){var i,n=ze(),r=n.w,a=n.h;if("fit"==e){var s=getStrokedBBox();if(!s)return!1;i=new svgedit.history.BatchCommand("Fit Canvas to Content");var l=we();Ie(l);var u=[],d=[];$.each(l,function(e,t){u.push(-1*s.x),d.push(-1*s.y)});var h=o.moveSelectedElements(u,d,!0);i.addSubCommand(h),Le(),e=Math.round(s.width),t=Math.round(s.height)}return(e!=r||t!=a)&&(i||(i=new svgedit.history.BatchCommand("Change Image Dimensions")),e=svgedit.units.convertToNum("width",e),t=svgedit.units.convertToNum("height",t),c.setAttribute("width",e),c.setAttribute("height",t),this.contentW=e,this.contentH=t,i.addSubCommand(new svgedit.history.ChangeElementCommand(c,{width:r,height:a})),c.setAttribute("viewBox",[0,0,e/f,t/f].join(" ")),i.addSubCommand(new svgedit.history.ChangeElementCommand(c,{viewBox:["0 0",r,a].join(" ")})),z(i),V("changed",[c])),!0},this.getOffset=function(){return $(c).attr(["x","y"])},this.setBBoxZoom=function(e,t,i){var n,r=.85,a=function(e){if(!e)return!1;var n=Math.round(t/e.width*100*r)/100,a=Math.round(i/e.height*100*r)/100,s=Math.min(n,a);return o.setZoom(s),{zoom:s,bbox:e}};if("object"==typeof e){if(n=e,0==n.width||0==n.height){var s=n.zoom?n.zoom:f*n.factor;return o.setZoom(s),{zoom:f,bbox:n}}return a(n)}switch(e){case"selection":if(!b[0])return;var l=$.map(b,function(e){return e?e:void 0});n=getStrokedBBox(l);break;case"canvas":var u=ze();r=.95,n={width:u.w,height:u.h,x:0,y:0};break;case"content":n=getStrokedBBox();break;case"layer":n=getStrokedBBox(we(p().getCurrentLayer()));break;default:return}return a(n)},this.setZoom=function(e){var t=ze();c.setAttribute("viewBox","0 0 "+t.w/e+" "+t.h/e),f=e,$.each(b,function(e,t){t&&q.requestSelector(t).resize()}),Se.zoomChange(),me("zoomChanged",e)},this.getMode=function(){return ae},this.setMode=function(e){Se.clear(!0),xe.clear(),ue=b[0]&&"text"==b[0].nodeName?le:v,ae=e},this.getColor=function(e){return ue[e]},this.setColor=function(e,t,i){function n(e){"g"!=e.nodeName&&r.push(e)}v[e]=t,ue[e+"_paint"]={type:"solidColor"};for(var r=[],a=b.length;a--;){var s=b[a];s&&("g"==s.tagName?svgedit.utilities.walkTree(s,n):"fill"==e?"polyline"!=s.tagName&&"line"!=s.tagName&&r.push(s):r.push(s))}r.length>0&&(i?Ye(e,t,r):(Qe(e,t,r),V("changed",r)))};var We=this.setGradient=function(e){if(ue[e+"_paint"]&&"solidColor"!=ue[e+"_paint"].type){var t=o[e+"Grad"],i=Xe(t),n=svgedit.utilities.findDefs();if(i)t=i;else{t=n.appendChild(l.importNode(t,!0)),t.id=_e()}o.setColor(e,"url(#"+t.id+")")}},Xe=function(e){for(var t=svgedit.utilities.findDefs(),i=$(t).find("linearGradient, radialGradient"),n=i.length,a=["r","cx","cy","fx","fy"];n--;){var s=i[n];if("linearGradient"==e.tagName){if(e.getAttribute("x1")!=s.getAttribute("x1")||e.getAttribute("y1")!=s.getAttribute("y1")||e.getAttribute("x2")!=s.getAttribute("x2")||e.getAttribute("y2")!=s.getAttribute("y2"))continue}else{var o=$(e).attr(a),l=$(s).attr(a),u=!1;if($.each(a,function(e,t){o[t]!=l[t]&&(u=!0)}),u)continue}var c=e.getElementsByTagNameNS(r.SVG,"stop"),d=s.getElementsByTagNameNS(r.SVG,"stop");if(c.length==d.length){for(var h=c.length;h--;){var p=c[h],f=d[h];if(p.getAttribute("offset")!=f.getAttribute("offset")||p.getAttribute("stop-opacity")!=f.getAttribute("stop-opacity")||p.getAttribute("stop-color")!=f.getAttribute("stop-color"))break}if(-1==h)return s}}return null};this.setPaint=function(e,t){var i=new $.jGraduate.Paint(t);switch(this.setPaintOpacity(e,i.alpha/100,!0),ue[e+"_paint"]=i,i.type){case"solidColor":this.setColor(e,"none"!=i.solidColor?"#"+i.solidColor:"none");break;case"linearGradient":case"radialGradient":o[e+"Grad"]=i[i.type],We(e)}},this.setStrokePaint=function(e){this.setPaint("stroke",e)},this.setFillPaint=function(e){this.setPaint("fill",e)},this.getStrokeWidth=function(){return ue.stroke_width},this.setStrokeWidth=function(e){function t(e){"g"!=e.nodeName&&i.push(e)}if(0==e&&["line","path"].indexOf(ae)>=0)return void o.setStrokeWidth(1);ue.stroke_width=e;for(var i=[],n=b.length;n--;){var r=b[n];r&&("g"==r.tagName?svgedit.utilities.walkTree(r,t):i.push(r))}i.length>0&&(Qe("stroke-width",e,i),V("changed",b))},this.setStrokeAttr=function(e,t){v[e.replace("-","_")]=t;for(var i=[],n=b.length;n--;){var r=b[n];r&&("g"==r.tagName?svgedit.utilities.walkTree(r,function(e){"g"!=e.nodeName&&i.push(e)}):i.push(r))}i.length>0&&(Qe(e,t,i),V("changed",b))},this.getStyle=function(){return v},this.getOpacity=function(){return v.opacity},this.setOpacity=function(e){v.opacity=e,Qe("opacity",e)},this.getFillOpacity=function(){return v.fill_opacity},this.getStrokeOpacity=function(){return v.stroke_opacity},this.setPaintOpacity=function(e,t,i){v[e+"_opacity"]=t,i?Ye(e+"-opacity",t):Qe(e+"-opacity",t)},this.getPaintOpacity=function(e){return"fill"===e?this.getFillOpacity():this.getStrokeOpacity()},this.getBlur=function(e){var t=0;if(e){var i=e.getAttribute("filter");if(i){var n=svgedit.utilities.getElem(e.id+"_blur");n&&(t=n.firstChild.getAttribute("stdDeviation"))}}return t},function(){function e(){var e=o.undoMgr.finishUndoableChange();t.addSubCommand(e),z(t),t=null,i=null}var t=null,i=null,n=!1;o.setBlurNoUndo=function(e){if(!i)return void o.setBlur(e);if(0===e)Ye("filter",""),n=!0;else{var t=b[0];n&&Ye("filter","url(#"+t.id+"_blur)"),svgedit.browser.isWebkit()&&(console.log("e",t),t.removeAttribute("filter"),t.setAttribute("filter","url(#"+t.id+"_blur)")),Ye("stdDeviation",e,[i.firstChild]),o.setBlurOffsets(i,e)}},o.setBlurOffsets=function(e,t){t>3?svgedit.utilities.assignAttributes(e,{x:"-50%",y:"-50%",width:"200%",height:"200%"},100):svgedit.browser.isWebkit()||(e.removeAttribute("x"),e.removeAttribute("y"),e.removeAttribute("width"),e.removeAttribute("height"))},o.setBlur=function(n,r){if(t)return void e();var a=b[0],s=a.id;i=svgedit.utilities.getElem(s+"_blur"),n-=0;var l=new svgedit.history.BatchCommand;if(i)0===n&&(i=null);else{var u=_({element:"feGaussianBlur",attr:{"in":"SourceGraphic",stdDeviation:n}});i=_({element:"filter",attr:{id:s+"_blur"}}),i.appendChild(u),svgedit.utilities.findDefs().appendChild(i),l.addSubCommand(new svgedit.history.InsertElementCommand(i))}var c={filter:a.getAttribute("filter")};return 0===n?(a.removeAttribute("filter"),void l.addSubCommand(new svgedit.history.ChangeElementCommand(a,c))):(Qe("filter","url(#"+s+"_blur)"),l.addSubCommand(new svgedit.history.ChangeElementCommand(a,c)),o.setBlurOffsets(i,n),t=l,o.undoMgr.beginUndoableChange("stdDeviation",[i?i.firstChild:null]),void(r&&(o.setBlurNoUndo(n),e())))}}(),this.getBold=function(){var e=b[0];return null!=e&&"text"==e.tagName&&null==b[1]?"bold"==e.getAttribute("font-weight"):!1},this.setBold=function(e){var t=b[0];null!=t&&"text"==t.tagName&&null==b[1]&&Qe("font-weight",e?"bold":"normal"),b[0].textContent||xe.setCursor()},this.getItalic=function(){var e=b[0];return null!=e&&"text"==e.tagName&&null==b[1]?"italic"==e.getAttribute("font-style"):!1},this.setItalic=function(e){var t=b[0];null!=t&&"text"==t.tagName&&null==b[1]&&Qe("font-style",e?"italic":"normal"),b[0].textContent||xe.setCursor()},this.getFontFamily=function(){return le.font_family},this.setFontFamily=function(e){le.font_family=e,Qe("font-family",e),b[0]&&!b[0].textContent&&xe.setCursor()},this.setFontColor=function(e){le.fill=e,Qe("fill",e)},this.getFontColor=function(){return le.fill},this.getFontSize=function(){return le.font_size},this.setFontSize=function(e){le.font_size=e,Qe("font-size",e),b[0].textContent||xe.setCursor()},this.getText=function(){var e=b[0];return null==e?"":e.textContent},this.setTextContent=function(e){Qe("#text",e),xe.init(e),xe.setCursor()},this.setImageURL=function(e){var t=b[0];if(t){var i=$(t).attr(["width","height"]),n=!i.width||!i.height,r=T(t);if(r!==e)n=!0;else if(!n)return;var a=new svgedit.history.BatchCommand("Change Image URL");E(t,e),a.addSubCommand(new svgedit.history.ChangeElementCommand(t,{"#href":r})),n?$(new Image).load(function(){var e=$(t).attr(["width","height"]);$(t).attr({width:this.width,height:this.height}),q.requestSelector(t).resize(),a.addSubCommand(new svgedit.history.ChangeElementCommand(t,e)),z(a),V("changed",[t])}).attr("src",e):z(a)}},this.setLinkURL=function(e){var t=b[0];if(t){if("a"!==t.tagName){var i=$(t).parents("a");if(!i.length)return;t=i[0]}var n=T(t);if(n!==e){var r=new svgedit.history.BatchCommand("Change Link URL");E(t,e),r.addSubCommand(new svgedit.history.ChangeElementCommand(t,{"#href":n})),z(r)}}},this.setRectRadius=function(e){var t=b[0];if(null!=t&&"rect"==t.tagName){var i=t.getAttribute("rx");i!=e&&(t.setAttribute("rx",e),t.setAttribute("ry",e),z(new svgedit.history.ChangeElementCommand(t,{rx:i,ry:i},"Radius")),V("changed",[t]))}},this.makeHyperlink=function(e){o.groupSelectedElements("a",e)},this.removeHyperlink=function(){o.ungroupSelectedElement()},this.setSegType=function(e){Se.setSegType(e)},this.convertToPath=function(e,t){if(null==e){return void $.each(b,function(e,t){t&&o.convertToPath(t)})}if(!t)var i=new svgedit.history.BatchCommand("Convert element to Path");var n=t?{}:{fill:v.fill,"fill-opacity":v.fill_opacity,stroke:v.stroke,"stroke-width":v.stroke_width,"stroke-dasharray":v.stroke_dasharray,"stroke-linejoin":v.stroke_linejoin,"stroke-linecap":v.stroke_linecap,"stroke-opacity":v.stroke_opacity,opacity:v.opacity,visibility:"hidden"};$.each(["marker-start","marker-end","marker-mid","filter","clip-path"],function(){e.getAttribute(this)&&(n[this]=e.getAttribute(this))});var r=_({element:"path",attr:n}),a=e.getAttribute("transform");a&&r.setAttribute("transform",a);var s=e.id,l=e.parentNode;e.nextSibling?l.insertBefore(r,e):l.appendChild(r);var u,c,d="",h=function(e){$.each(e,function(e,t){var i,n=t[0],r=t[1];for(d+=n,i=0;i<r.length;i+=2)d+=r[i]+","+r[i+1]+" "})},p=1.81;switch(e.tagName){case"ellipse":case"circle":u=$(e).attr(["rx","ry","cx","cy"]);var f=u.cx,g=u.cy;c=u.rx,ry=u.ry,"circle"==e.tagName&&(c=ry=$(e).attr("r")),h([["M",[f-c,g]],["C",[f-c,g-ry/p,f-c/p,g-ry,f,g-ry]],["C",[f+c/p,g-ry,f+c,g-ry/p,f+c,g]],["C",[f+c,g+ry/p,f+c/p,g+ry,f,g+ry]],["C",[f-c/p,g+ry,f-c,g+ry/p,f-c,g]],["Z",[]]]);break;case"path":d=e.getAttribute("d");break;case"line":u=$(e).attr(["x1","y1","x2","y2"]),
d="M"+u.x1+","+u.y1+"L"+u.x2+","+u.y2;break;case"polyline":case"polygon":d="M"+e.getAttribute("points");break;case"rect":var m=$(e).attr(["rx","ry"]);c=m.rx,ry=m.ry;var y=e.getBBox(),x=y.x,S=y.y,w=y.width,C=y.height;p=4-p,h(c||ry?[["M",[x,S+ry]],["C",[x,S+ry/p,x+c/p,S,x+c,S]],["L",[x+w-c,S]],["C",[x+w-c/p,S,x+w,S+ry/p,x+w,S+ry]],["L",[x+w,S+C-ry]],["C",[x+w,S+C-ry/p,x+w-c/p,S+C,x+w-c,S+C]],["L",[x+c,S+C]],["C",[x+c/p,S+C,x,S+C-ry/p,x,S+C-ry]],["L",[x,S+ry]],["Z",[]]]:[["M",[x,S]],["L",[x+w,S]],["L",[x+w,S+C]],["L",[x,S+C]],["L",[x,S]],["Z",[]]]);break;default:r.parentNode.removeChild(r)}if(d&&r.setAttribute("d",d),t){Se.resetOrientation(r);var k=!1;try{k=r.getBBox()}catch(A){}return r.parentNode.removeChild(r),k}if(a){var P=svgedit.transformlist.getTransformList(r);svgedit.math.hasMatrixTransform(P)&&Se.resetOrientation(r)}var T=e.nextSibling;i.addSubCommand(new svgedit.history.RemoveElementCommand(e,T,l)),i.addSubCommand(new svgedit.history.InsertElementCommand(r)),Le(),e.parentNode.removeChild(e),r.setAttribute("id",s),r.removeAttribute("visibility"),Ie([r],!0),z(i)};var Ye=function(e,t,i){"pathedit"==ae&&Se.moveNode(e,t),i=i||b;for(var n=i.length,r=["g","polyline","path"],a=["transform","opacity","filter"];n--;){var s=i[n];if(null!=s)if(("x"===e||"y"===e)&&r.indexOf(s.tagName)>=0){var l=getStrokedBBox([s]),c="x"===e?t-l.x:0,d="y"===e?t-l.y:0;o.moveSelectedElements(c*f,d*f,!0)}else{"g"===s.tagName&&a.indexOf(e)>=0;var h="#text"===e?s.textContent:s.getAttribute(e);if(null==h&&(h=""),h!==String(t)){if("#text"==e){svgedit.utilities.getBBox(s).width;s.textContent=t,/rotate/.test(s.getAttribute("transform"))&&(s=Pe(s))}else"#href"==e?E(s,t):s.setAttribute(e,t);"textedit"===ae&&"#text"!==e&&s.textContent.length&&xe.toSelectMode(s),svgedit.browser.isGecko()&&"text"===s.nodeName&&/rotate/.test(s.getAttribute("transform"))&&(0===String(t).indexOf("url")||["font-size","font-family","x","y"].indexOf(e)>=0&&s.textContent)&&(s=Pe(s)),b.indexOf(s)>=0&&setTimeout(function(){s.parentNode&&q.requestSelector(s).resize()},0);var p=svgedit.utilities.getRotationAngle(s);if(0!=p&&"transform"!=e)for(var g=svgedit.transformlist.getTransformList(s),m=g.numberOfItems;m--;){var v=g.getItem(m);if(4==v.type){g.removeItem(m);var y=svgedit.utilities.getBBox(s),_=svgedit.math.transformPoint(y.x+y.width/2,y.y+y.height/2,svgedit.math.transformListToTransform(g).matrix),x=_.x,S=_.y,w=u.createSVGTransform();w.setRotate(p,x,S),g.insertItemBefore(w,m);break}}}}}},Qe=this.changeSelectedAttribute=function(e,t,i){i=i||b,o.undoMgr.beginUndoableChange(e,i);i.length;Ye(e,t,i);var n=o.undoMgr.finishUndoableChange();n.isEmpty()||z(n)};this.deleteSelectedElements=function(){var e,t=new svgedit.history.BatchCommand("Delete Elements"),i=b.length,n=[];for(e=0;i>e;++e){var r=b[e];if(null==r)break;var a=r.parentNode,s=r;q.releaseSelector(s),svgedit.path.removePath_(s.id),"a"===a.tagName&&1===a.childNodes.length&&(s=a,a=a.parentNode);var o=s.nextSibling,l=a.removeChild(s);n.push(r),b[e]=null,t.addSubCommand(new F(l,o,a))}t.isEmpty()||z(t),V("changed",n),Le()},this.cutSelectedElements=function(){var e,t=new svgedit.history.BatchCommand("Cut Elements"),i=b.length,n=[];for(e=0;i>e;++e){var r=b[e];if(null==r)break;var a=r.parentNode,s=r;q.releaseSelector(s),svgedit.path.removePath_(s.id);var l=s.nextSibling,u=a.removeChild(s);n.push(r),b[e]=null,t.addSubCommand(new F(u,l,a))}t.isEmpty()||z(t),V("changed",n),Le(),o.clipBoard=n},this.copySelectedElements=function(){o.clipBoard=$.merge([],b)},this.pasteElements=function(e,t,i){var n=o.clipBoard,r=n.length;if(r){for(var a=[],s=new svgedit.history.BatchCommand("Paste elements");r--;){var l=n[r];if(l){var u=Ae(l);svgedit.utilities.getElem(l.id)||(u.id=l.id),a.push(u),(g||p().getCurrentLayer()).appendChild(u),s.addSubCommand(new svgedit.history.InsertElementCommand(u))}}if(Me(a),"in_place"!==e){var c,d;e?"point"===e&&(c=t,d=i):(c=fe.x,d=fe.y);var h=getStrokedBBox(a),f=c-(h.x+h.width/2),m=d-(h.y+h.height/2),v=[],y=[];$.each(a,function(e,t){v.push(f),y.push(m)});var b=o.moveSelectedElements(v,y,!1);s.addSubCommand(b)}z(s),V("changed",a)}},this.groupSelectedElements=function(e,t){e||(e="g");var i="";switch(e){case"a":i="Make hyperlink";var n="";arguments.length>1&&(n=t);break;default:e="g",i="Group Elements"}var r=new svgedit.history.BatchCommand(i),a=_({element:e,attr:{id:_e()}});"a"===e&&E(a,n),r.addSubCommand(new svgedit.history.InsertElementCommand(a));for(var s=b.length;s--;){var o=b[s];if(null!=o){"a"===o.parentNode.tagName&&1===o.parentNode.childNodes.length&&(o=o.parentNode);var l=o.nextSibling,u=o.parentNode;a.appendChild(o),r.addSubCommand(new svgedit.history.MoveElementCommand(o,l,u))}}r.isEmpty()||z(r),Me([a],!0)};var Ke=this.pushGroupProperties=function(e,t){var i,n,r,a=e.childNodes,s=a.length,l=e.getAttribute("transform"),c=svgedit.transformlist.getTransformList(e),d=svgedit.math.transformListToTransform(c).matrix,h=new svgedit.history.BatchCommand("Push group properties"),p=0,f=svgedit.utilities.getRotationAngle(e),g=$(e).attr(["filter","opacity"]);for(p=0;s>p;p++){var m=a[p];if(1===m.nodeType){if(null!==g.opacity&&1!==g.opacity){var v=(m.getAttribute("opacity")||1,Math.round((m.getAttribute("opacity")||1)*g.opacity*100)/100);Qe("opacity",v,[m])}if(g.filter){var y=this.getBlur(m),b=y;n||(n=this.getBlur(e)),y?y=Number(n)+Number(y):0===y&&(y=n),b?i=svgedit.utilities.getRefElem(m.getAttribute("filter")):i?(i=Ae(i),svgedit.utilities.findDefs().appendChild(i)):i=svgedit.utilities.getRefElem(g.filter);var _="feGaussianBlur"===i.firstChild.tagName?"blur":"filter";i.id=m.id+"_"+_,Qe("filter","url(#"+i.id+")",[m]),y&&(Qe("stdDeviation",y,[i.firstChild]),o.setBlurOffsets(i,y))}var x=svgedit.transformlist.getTransformList(m);if(~m.tagName.indexOf("Gradient")&&(x=null),x&&"defs"!==m.tagName&&c.numberOfItems){if(f&&1==c.numberOfItems){var S=c.getItem(0).matrix,w=u.createSVGMatrix(),C=svgedit.utilities.getRotationAngle(m);C&&(w=x.getItem(0).matrix);var k=svgedit.utilities.getBBox(m),A=svgedit.math.transformListToTransform(x).matrix,P=svgedit.math.transformPoint(k.x+k.width/2,k.y+k.height/2,A),T=f+C,E=u.createSVGTransform();E.setRotate(T,P.x,P.y);var G=svgedit.math.matrixMultiply(S,w,E.matrix.inverse());if(C&&x.removeItem(0),T&&(x.numberOfItems?x.insertItemBefore(E,0):x.appendItem(E)),G.e||G.f){var N=u.createSVGTransform();N.setTranslate(G.e,G.f),x.numberOfItems?x.insertItemBefore(N,0):x.appendItem(N)}}else{var L=m.getAttribute("transform");r={},r.transform=L||"";var I=u.createSVGTransform(),M=svgedit.math.transformListToTransform(x).matrix,V=M.inverse(),O=svgedit.math.matrixMultiply(V,d,M);I.setMatrix(O),x.appendItem(I)}var j=svgedit.recalculate.recalculateDimensions(m);j&&h.addSubCommand(j)}}}return l&&(r={},r.transform=l,e.setAttribute("transform",""),e.removeAttribute("transform"),h.addSubCommand(new svgedit.history.ChangeElementCommand(e,r))),t&&!h.isEmpty()?h:void 0};this.ungroupSelectedElement=function(){var e=b[0];if(e){if($(e).data("gsvg")||$(e).data("symbol"))return void Fe(e);if("use"===e.tagName){var t=svgedit.utilities.getElem(T(e).substr(1));return $(e).data("symbol",t).data("ref",t),void Fe(e)}var i=$(e).parents("a");if(i.length&&(e=i[0]),"g"===e.tagName||"a"===e.tagName){var n=new svgedit.history.BatchCommand("Ungroup Elements"),r=Ke(e,!0);r&&n.addSubCommand(r);for(var a=e.parentNode,s=e.nextSibling,o=new Array(e.childNodes.length),l=0;e.firstChild;){var u=e.firstChild,c=u.nextSibling,d=u.parentNode;if("title"!==u.tagName)o[l++]=u=a.insertBefore(u,s),n.addSubCommand(new svgedit.history.MoveElementCommand(u,c,d));else{var h=u.nextSibling;n.addSubCommand(new svgedit.history.RemoveElementCommand(u,h,d)),d.removeChild(u)}}Le();var p=e.nextSibling;e=a.removeChild(e),n.addSubCommand(new svgedit.history.RemoveElementCommand(e,p,a)),n.isEmpty()||z(n),Ie(o)}}},this.moveToTopSelectedElement=function(){var e=b[0];if(null!=e){var t=e,i=t.parentNode,n=t.nextSibling;t=t.parentNode.appendChild(t),n!=t.nextSibling&&(z(new svgedit.history.MoveElementCommand(t,n,i,"top")),V("changed",[t]))}},this.moveToBottomSelectedElement=function(){var e=b[0];if(null!=e){var t=e,i=t.parentNode,n=t.nextSibling,r=t.parentNode.firstChild;"title"==r.tagName&&(r=r.nextSibling),"defs"==r.tagName&&(r=r.nextSibling),t=t.parentNode.insertBefore(t,r),n!=t.nextSibling&&(z(new svgedit.history.MoveElementCommand(t,n,i,"bottom")),V("changed",[t]))}},this.moveUpDownSelected=function(e){var t=b[0];if(t){he=[];var i,n,r=$(ye(getStrokedBBox([t]))).toArray();if("Down"==e&&r.reverse(),$.each(r,function(){return n?(i=this,!1):void(this==t&&(n=!0))}),i){var a=t,s=a.parentNode,o=a.nextSibling;$(i)["Down"==e?"before":"after"](a),o!=a.nextSibling&&(z(new svgedit.history.MoveElementCommand(a,o,s,"Move "+e)),V("changed",[a]))}}},this.moveSelectedElements=function(e,t,i){e.constructor!=Array&&(e/=f,t/=f),i=i||!0;for(var n=new svgedit.history.BatchCommand("position"),r=b.length;r--;){var a=b[r];if(null!=a){var s=u.createSVGTransform(),o=svgedit.transformlist.getTransformList(a);e.constructor==Array?s.setTranslate(e[r],t[r]):s.setTranslate(e,t),o.numberOfItems?o.insertItemBefore(s,0):o.appendItem(s);var l=svgedit.recalculate.recalculateDimensions(a);l&&n.addSubCommand(l),q.requestSelector(a).resize()}}return n.isEmpty()?void 0:(i&&z(n),V("changed",b),n)},this.cloneSelectedElements=function(e,t){function i(e,t){return $(t).index()-$(e).index()}var n,r,a=new svgedit.history.BatchCommand("Clone Elements"),s=b.length;for(b.sort(i),n=0;s>n&&(r=b[n],null!=r);++n);var o=b.slice(0,n);for(this.clearSelection(!0),n=o.length;n--;)r=o[n]=Ae(o[n]),(g||p().getCurrentLayer()).appendChild(r),a.addSubCommand(new svgedit.history.InsertElementCommand(r));a.isEmpty()||(Ie(o.reverse()),this.moveSelectedElements(e,t,!1),z(a))},this.alignSelectedElements=function(e,t){var i,n,r=[],a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=Number.MAX_VALUE,u=Number.MIN_VALUE,c=Number.MIN_VALUE,d=Number.MIN_VALUE,h=b.length;if(h){for(i=0;h>i&&null!=b[i];++i)switch(n=b[i],r[i]=getStrokedBBox([n]),t){case"smallest":(("l"==e||"c"==e||"r"==e)&&(c==Number.MIN_VALUE||c>r[i].width)||("t"==e||"m"==e||"b"==e)&&(d==Number.MIN_VALUE||d>r[i].height))&&(a=r[i].x,l=r[i].y,s=r[i].x+r[i].width,u=r[i].y+r[i].height,c=r[i].width,d=r[i].height);break;case"largest":(("l"==e||"c"==e||"r"==e)&&(c==Number.MIN_VALUE||c<r[i].width)||("t"==e||"m"==e||"b"==e)&&(d==Number.MIN_VALUE||d<r[i].height))&&(a=r[i].x,l=r[i].y,s=r[i].x+r[i].width,u=r[i].y+r[i].height,c=r[i].width,d=r[i].height);break;default:r[i].x<a&&(a=r[i].x),r[i].y<l&&(l=r[i].y),r[i].x+r[i].width>s&&(s=r[i].x+r[i].width),r[i].y+r[i].height>u&&(u=r[i].y+r[i].height)}"page"==t&&(a=0,l=0,s=o.contentW,u=o.contentH);var p=new Array(h),f=new Array(h);for(i=0;h>i&&null!=b[i];++i){n=b[i];var g=r[i];switch(p[i]=0,f[i]=0,e){case"l":p[i]=a-g.x;break;case"c":p[i]=(a+s)/2-(g.x+g.width/2);break;case"r":p[i]=s-(g.x+g.width);break;case"t":f[i]=l-g.y;break;case"m":f[i]=(l+u)/2-(g.y+g.height/2);break;case"b":f[i]=u-(g.y+g.height)}}this.moveSelectedElements(p,f)}},this.contentW=ze().w,this.contentH=ze().h,this.updateCanvas=function(e,t){u.setAttribute("width",e),u.setAttribute("height",t);var i=$("#canvasBackground")[0],n=c.getAttribute("x"),r=c.getAttribute("y"),a=e/2-this.contentW*f/2,s=t/2-this.contentH*f/2;svgedit.utilities.assignAttributes(c,{width:this.contentW*f,height:this.contentH*f,x:a,y:s,viewBox:"0 0 "+this.contentW+" "+this.contentH}),svgedit.utilities.assignAttributes(i,{width:c.getAttribute("width"),height:c.getAttribute("height"),x:a,y:s});var o=svgedit.utilities.getElem("background_image");return o&&svgedit.utilities.assignAttributes(o,{width:"100%",height:"100%"}),q.selectorParentGroup.setAttribute("transform","translate("+a+","+s+")"),me("canvasUpdated",{new_x:a,new_y:s,old_x:n,old_y:r,d_x:a-n,d_y:s-r}),{x:a,y:s,old_x:n,old_y:r,d_x:a-n,d_y:s-r}},this.setBackground=function(e,t){var i=svgedit.utilities.getElem("canvasBackground"),n=$(i).find("rect")[0],a=svgedit.utilities.getElem("background_image");n.setAttribute("fill",e),t?(a||(a=l.createElementNS(r.SVG,"image"),svgedit.utilities.assignAttributes(a,{id:"background_image",width:"100%",height:"100%",preserveAspectRatio:"xMinYMin",style:"pointer-events:none"})),E(a,t),i.appendChild(a)):a&&a.parentNode.removeChild(a)},this.cycleElement=function(e){var t,i=b[0],n=!1,r=we(g||p().getCurrentLayer());if(r.length){if(null==i)t=e?r.length-1:0,n=r[t];else for(var a=r.length;a--;)if(r[a]==i){t=e?a-1:a+1,t>=r.length?t=0:0>t&&(t=r.length-1),n=r[t];break}Me([n],!0),V("selected",b)}},this.clear(),this.getPrivateMethods=function(){var e={addCommandToHistory:z,setGradient:We,addSvgElementFromJson:_,assignAttributes:L,BatchCommand:U,call:V,ChangeElementCommand:H,copyElem:Ae,ffClone:Pe,findDefs:A,findDuplicateGradient:Xe,getElem:N,getId:be,getIntersectionList:ye,getMouseTarget:Ve,getNextId:_e,getPathBBox:G,getUrlFromAttr:P,hasMatrixTransform:C,identifyLayers:He,InsertElementCommand:D,isIdentity:svgedit.math.isIdentity,logMatrix:Ge,matrixMultiply:w,MoveElementCommand:B,preventClickDefault:Oe,recalculateAllSelectedDimensions:Te,recalculateDimensions:O,remapElement:M,RemoveElementCommand:F,removeUnusedDefElems:je,round:ve,runExtensions:me,sanitizeSvg:R,SVGEditTransformList:svgedit.transformlist.SVGTransformList,toString:toString,transformBox:svgedit.math.transformBox,transformListToTransform:k,transformPoint:S,walkTree:svgedit.utilities.walkTree};return e}},function(){window.svgEditor||(window.svgEditor=function(e){function t(t,i){var r=n.setSvgString(t)!==!1;i=i||e.noop,r?i(!0):e.alert(g.notification.errorLoadingSVG,function(){i(!1)})}var i={};i.tool_scale=1,i.exportWindowCt=0,i.langChanged=!1,i.showSaveWarning=!1,i.storagePromptClosed=!1,i.originalSource="";var n,r,a=svgedit.utilities,s=!1,o=!1,l=!1,u=[],c={lang:"",iconsize:"",bkgd_color:"#FFF",bkgd_url:"",img_save:"embed",save_notice_done:!1,export_notice_done:!1},d={},h={extensions:[],allowedOrigins:[]},p=["ext-overview_window.js","ext-markers.js","ext-connector.js","ext-eyedropper.js","ext-shapes.js","ext-imagelib.js","ext-grid.js","ext-polygon.js","ext-star.js","ext-panning.js","ext-storage.js"],f={canvasName:"default",canvas_expansion:3,initFill:{color:"FF0000",opacity:1},initStroke:{width:5,color:"000000",opacity:1},initOpacity:1,colorPickerCSS:null,initTool:"select",exportWindowType:"download",wireframe:!1,showlayers:!1,no_save_warning:!0,imgPath:"svg_editor/images/",langPath:"svg_editor/locale/",extPath:"svg_editor/extensions/",jGraduatePath:"svg_editor/jgraduate/images/",dimensions:[640,480],gridSnapping:!0,gridColor:"#000",baseUnit:"px",snappingStep:10,showRulers:!0,preventAllURLConfig:!1,preventURLContentLoading:!1,lockExtensions:!1,noDefaultExtensions:!1,showGrid:!0,noStorageOnLoad:!1,forceStorage:!1,emptyStorageOnDecline:!1},g=i.uiStrings={common:{ok:"OK",cancel:"Cancel",key_up:"Up",key_down:"Down",key_backspace:"Backspace",key_del:"Del"},layers:{layer:"Layer"},notification:{invalidAttrValGiven:"Invalid value given",noContentToFitTo:"No content to fit to",dupeLayerName:"There is already a layer named that!",enterUniqueLayerName:"Please enter a unique layer name",enterNewLayerName:"Please enter the new layer name",layerHasThatName:"Layer already has that name",QmoveElemsToLayer:"Move selected elements to layer '%s'?",QwantToClear:"Do you want to clear the drawing?\nThis will also erase your undo history!",QwantToOpen:"Do you want to open a new file?\nThis will also erase your undo history!",QerrorsRevertToSource:"There were parsing errors in your SVG source.\nRevert back to original SVG source?",QignoreSourceChanges:"Ignore changes made to SVG source?",featNotSupported:"Feature not supported",enterNewImgURL:"Enter the new image URL",defsFailOnSave:"NOTE: Due to a bug in your browser, this image may appear wrong (missing gradients or elements). It will however appear correct once actually saved.",loadingImage:"Loading image, please wait...",saveFromBrowser:"Select 'Save As...' in your browser to save this image as a %s file.",noteTheseIssues:"Also note the following issues: ",unsavedChanges:"There are unsaved changes.",enterNewLinkURL:"Enter the new hyperlink URL",errorLoadingSVG:"Error: Unable to load SVG data",URLloadFail:"Unable to load from URL",retrieving:"Retrieving '%s' ..."}};return e.pref=function(e,t){return t?(d[e]=t,void(i.curPrefs=d)):e in d?d[e]:c[e]},i.loadContentAndPrefs=function(){if(h.forceStorage||!h.noStorageOnLoad&&document.cookie.match(/(?:^|;\s*)store=(?:prefsAndContent|prefsOnly)/)){if(i.storage&&(h.forceStorage||!h.noStorageOnLoad&&document.cookie.match(/(?:^|;\s*)store=prefsAndContent/))){var e="svgedit-"+h.canvasName,t=i.storage.getItem(e);t&&i.loadFromString(t)}var n;for(n in c)if(c.hasOwnProperty(n)){var r="svg-edit-"+n;if(i.storage){var s=i.storage.getItem(r);s&&(c[n]=String(s))}else if(window.widget)c[n]=widget.preferenceForKey(r);else{var o=document.cookie.match(new RegExp("(?:^|;\\s*)"+a.preg_quote(encodeURIComponent(r))+"=([^;]+)"));c[n]=o?decodeURIComponent(o[1]):""}}}},i.setConfig=function(t,n){function r(t,i,n){t[i]&&"object"==typeof t[i]?e.extend(!0,t[i],n):t[i]=n}n=n||{},e.each(t,function(i,a){if(t.hasOwnProperty(i))if(c.hasOwnProperty(i)){if(n.overwrite===!1&&(h.preventAllURLConfig||d.hasOwnProperty(i)))return;n.allowInitialUserOverride===!0?c[i]=a:e.pref(i,a)}else if(["extensions","allowedOrigins"].indexOf(i)>-1){if(n.overwrite===!1&&(h.preventAllURLConfig||"allowedOrigins"===i||"extensions"===i&&h.lockExtensions))return;h[i]=h[i].concat(a)}else if(f.hasOwnProperty(i)){if(n.overwrite===!1&&(h.preventAllURLConfig||h.hasOwnProperty(i)))return;if(h.hasOwnProperty(i)){if(n.overwrite===!1)return;r(h,i,a)}else n.allowInitialUserOverride===!0?r(f,i,a):f[i]&&"object"==typeof f[i]?(h[i]={},e.extend(!0,h[i],a)):h[i]=a}}),i.curConfig=h},i.setCustomHandlers=function(t){i.ready(function(){t.open&&(e('#tool_open > input[type="file"]').remove(),e("#tool_open").show(),n.open=t.open),t.save&&(i.showSaveWarning=!1,n.bind("saved",t.save)),t.exportImage&&(o=t.exportImage,n.bind("exported",o)),t.exportPDF&&(l=t.exportPDF,n.bind("exportedPDF",l))})},i.randomizeIds=function(){n.randomizeIds(arguments)},i.init=function(){function s(){d=e.extend(!0,{},c,d),i.curPrefs=d}function u(){h=e.extend(!0,{},f,h),h.noDefaultExtensions||(h.extensions=h.extensions.concat(p)),e.each(["extensions","allowedOrigins"],function(t,i){h[i]=e.grep(h[i],function(e,t){return t===h[i].indexOf(e)})}),i.curConfig=h}function m(t,i){var r=t.id,a=r.split("_"),s=a[0],o=a[1];i&&n.setStrokeAttr("stroke-"+s,o),fe(),N("#cur_"+s,r,20),e(t).addClass("current").siblings().removeClass("current")}function v(t,i){e.pref("bkgd_color",t),e.pref("bkgd_url",i),n.setBackground(t,i)}function y(){var t=n.getHref(ee);t=0===t.indexOf("data:")?"":t,e.prompt(g.notification.enterNewImgURL,t,function(e){e&&ve(e)})}function b(t,i){i||(i=n.getZoom()),t||(t=e("#svgcanvas"));var r,a,s=3e4,o=n.getContentElem(),l=svgedit.units.getTypeMap(),u=l[h.baseUnit];for(r=0;2>r;r++){var c=0===r,d=c?"x":"y",p=c?"width":"height",f=Number(o.getAttribute(d)),g=e("#ruler_"+d+" canvas:first"),m=g.clone();g.replaceWith(m);var v=m[0],y=t[p](),b=y;v.parentNode.style[p]=b+"px";var _,x,S,w=0,C=v.getContext("2d");if(C.fillStyle="rgb(200,0,0)",C.fillRect(0,0,v.width,v.height),m.siblings().remove(),y>=s){S=parseInt(y/s,10)+1,_=[],_[0]=C;var k;for(a=1;S>a;a++)v[p]=s,k=v.cloneNode(!0),v.parentNode.appendChild(k),_[a]=k.getContext("2d");k[p]=y%s,y=s}v[p]=y;var A=u*i,P=50/A,T=1;for(a=0;a<oe.length&&(x=oe[a],T=x,!(x>=P));a++);var E=T*A;C.font="9px sans-serif";for(var G=f/A%T*A,N=G-E;b>G;){N+=E;var L=Math.round(G)+.5;c?(C.moveTo(L,15),C.lineTo(L,0)):(C.moveTo(15,L),C.lineTo(0,L)),x=(N-f)/A;var I;if(T>=1)I=Math.round(x);else{var M=String(T).split(".")[1].length;I=x.toFixed(M)}if(0!==I&&1e3!==I&&I%1e3===0&&(I=I/1e3+"K"),c)C.fillText(I,G+2,8);else{var V=String(I).split("");for(a=0;a<V.length;a++)C.fillText(V[a],1,G+9+9*a)}var O=E/10;for(a=1;10>a;a++){var j=Math.round(G+O*a)+.5;if(_&&j>y){if(w++,C.stroke(),w>=S){a=10,G=b;continue}C=_[w],G-=s,j=Math.round(G+O*a)+.5}var R=a%2?12:10;c?(C.moveTo(j,15),C.lineTo(j,R)):(C.moveTo(15,j),C.lineTo(R,j))}G+=E}C.strokeStyle="#000",C.stroke()}}function _(){n.deleteCurrentLayer()&&(Se(),ue(),e("#layerlist tr.layer").removeClass("layersel"),e("#layerlist tr.layer:first").addClass("layersel"))}function x(){var t=n.getCurrentDrawing().getCurrentLayerName()+" copy";e.prompt(g.notification.enterUniqueLayerName,t,function(t){if(t){if(n.getCurrentDrawing().hasLayer(t))return void e.alert(g.notification.dupeLayerName);n.cloneLayer(t),Se(),ue()}})}function S(){e("#layerlist tr.layersel").index()!=n.getCurrentDrawing().getNumLayers()-1&&(n.mergeLayer(),Se(),ue())}function w(t){var i=e("#layerlist tr.layersel").index(),r=n.getCurrentDrawing().getNumLayers();(i>0||r-1>i)&&(i+=t,n.setCurrentLayerPosition(r-i-1),ue())}function C(e,t){var i=Number(e.value),n=i+t,r=n>=i;return 0===t?i:i>=24?r?Math.round(1.1*i):Math.round(i/1.1):1>=i?r?2*i:i/2:n}function k(e,t){var i=Number(e.value);if(0===i)return 100;var n=i+t;return 0===t?i:i>=100?n:n>=i?2*i:i/2}function A(e){e.stopPropagation(),e.preventDefault()}function P(e){e.stopPropagation(),e.preventDefault()}function T(e){e.stopPropagation(),e.preventDefault()}try{"localStorage"in window&&(i.storage=localStorage)}catch(E){}var G=[];e("#lang_select option").each(function(){G.push(this.value)}),function(){var t,n;if(r=e.deparam.querystring(!0),e.isEmptyObject(r))u(),i.loadContentAndPrefs(),s();else{if(r.dimensions&&(r.dimensions=r.dimensions.split(",")),r.bkgd_color&&(r.bkgd_color="#"+r.bkgd_color),r.extensions&&(r.extensions=r.extensions.match(/[:\/\\]/)?"":r.extensions.split(",")),e.each(["extPath","imgPath","langPath","jGraduatePath"],function(e){r[e]&&delete r[e]}),i.setConfig(r,{overwrite:!1}),u(),!h.preventURLContentLoading){if(t=r.source,n=e.param.querystring(),t||n.indexOf("source=data:")>=0&&(t=n.match(/source=(data:[^&]*)/)[1]),t)return void(0===t.indexOf("data:")?i.loadFromDataURI(t):i.loadFromString(t));if(r.url)return void i.loadFromURL(r.url)}(!r.noStorageOnLoad||h.forceStorage)&&i.loadContentAndPrefs(),s()}}(),function(){var e,t=window.opener;if(t)try{e=t.document.createEvent("Event"),e.initEvent("svgEditorReady",!0,!0),t.document.documentElement.dispatchEvent(e)}catch(i){}}();var N=i.setIcon=function(t,i,n){var r="string"==typeof i?e.getSvgIcon(i,!0):i.clone();return r?void e(t).empty().append(r):void console.log("NOTE: Icon image missing: "+i)},L=function(){e.each(h.extensions,function(){var t=this;t.match(/^ext-.*\.js/)&&e.getScript(h.extPath+t,function(e){if(!e){var i=document.createElement("script");i.src=h.extPath+t,document.querySelector("head").appendChild(i)}})})};"file:"===document.location.protocol?setTimeout(L,100):L(),e.svgIcons(h.imgPath+"svg_edit_icons.svg",{w:24,h:24,id_match:!1,no_img:!svgedit.browser.isWebkit(),fallback_path:h.imgPath,fallback:{new_image:"clear.png",save:"save.png",open:"open.png",source:"source.png",docprops:"document-properties.png",wireframe:"wireframe.png",undo:"undo.png",redo:"redo.png",select:"select.png",select_node:"select_node.png",pencil:"fhpath.png",pen:"line.png",square:"square.png",rect:"rect.png",fh_rect:"freehand-square.png",circle:"circle.png",ellipse:"ellipse.png",fh_ellipse:"freehand-circle.png",path:"path.png",text:"text.png",image:"image.png",zoom:"zoom.png",clone:"clone.png",node_clone:"node_clone.png","delete":"delete.png",node_delete:"node_delete.png",group:"shape_group_elements.png",ungroup:"shape_ungroup.png",move_top:"move_top.png",move_bottom:"move_bottom.png",to_path:"to_path.png",link_controls:"link_controls.png",reorient:"reorient.png",align_left:"align-left.png",align_center:"align-center.png",align_right:"align-right.png",align_top:"align-top.png",align_middle:"align-middle.png",align_bottom:"align-bottom.png",go_up:"go-up.png",go_down:"go-down.png",ok:"save.png",cancel:"cancel.png",arrow_right:"flyouth.png",arrow_down:"dropdown.gif"},placement:{"#logo":"logo","#tool_clear div,#layer_new":"new_image","#tool_save div":"save","#tool_export div":"export","#tool_open div div":"open","#tool_import div div":"import","#tool_source":"source","#tool_docprops > div":"docprops","#tool_wireframe":"wireframe","#tool_undo":"undo","#tool_redo":"redo","#tool_select":"select","#tool_fhpath":"pencil","#tool_line":"pen","#tool_rect,#tools_rect_show":"rect","#tool_square":"square","#tool_fhrect":"fh_rect","#tool_ellipse,#tools_ellipse_show":"ellipse","#tool_circle":"circle","#tool_fhellipse":"fh_ellipse","#tool_path":"path","#tool_text,#layer_rename":"text","#tool_image":"image","#tool_zoom":"zoom","#tool_clone,#tool_clone_multi":"clone","#tool_node_clone":"node_clone","#layer_delete,#tool_delete,#tool_delete_multi":"delete","#tool_node_delete":"node_delete","#tool_add_subpath":"add_subpath","#tool_openclose_path":"open_path","#tool_move_top":"move_top","#tool_move_bottom":"move_bottom","#tool_topath":"to_path","#tool_node_link":"link_controls","#tool_reorient":"reorient","#tool_group_elements":"group_elements","#tool_ungroup":"ungroup","#tool_unlink_use":"unlink_use","#tool_alignleft, #tool_posleft":"align_left","#tool_aligncenter, #tool_poscenter":"align_center","#tool_alignright, #tool_posright":"align_right","#tool_aligntop, #tool_postop":"align_top","#tool_alignmiddle, #tool_posmiddle":"align_middle","#tool_alignbottom, #tool_posbottom":"align_bottom","#cur_position":"align","#linecap_butt,#cur_linecap":"linecap_butt","#linecap_round":"linecap_round","#linecap_square":"linecap_square","#linejoin_miter,#cur_linejoin":"linejoin_miter","#linejoin_round":"linejoin_round","#linejoin_bevel":"linejoin_bevel","#url_notice":"warning","#layer_up":"go_up","#layer_down":"go_down","#layer_moreopts":"context_menu","#layerlist td.layervis":"eye","#tool_source_save,#tool_docprops_save,#tool_prefs_save":"ok","#tool_source_cancel,#tool_docprops_cancel,#tool_prefs_cancel":"cancel","#rwidthLabel, #iwidthLabel":"width","#rheightLabel, #iheightLabel":"height","#cornerRadiusLabel span":"c_radius","#angleLabel":"angle","#linkLabel,#tool_make_link,#tool_make_link_multi":"globe_link","#zoomLabel":"zoom","#tool_fill label":"fill","#tool_stroke .icon_label":"stroke","#group_opacityLabel":"opacity","#blurLabel":"blur","#font_sizeLabel":"fontsize",".flyout_arrow_horiz":"arrow_right",".dropdown button, #main_button .dropdown":"arrow_down","#palette .palette_item:first, #fill_bg, #stroke_bg":"no_color"},resize:{"#logo .svg_icon":28,".flyout_arrow_horiz .svg_icon":5,".layer_button .svg_icon, #layerlist td.layervis .svg_icon":14,".dropdown button .svg_icon":7,"#main_button .dropdown .svg_icon":9,".palette_item:first .svg_icon":15,"#fill_bg .svg_icon, #stroke_bg .svg_icon":16,".toolbar_button button .svg_icon":16,".stroke_tool div div .svg_icon":20,"#tools_bottom label .svg_icon":18},callback:function(t){e(".toolbar_button button > svg, .toolbar_button button > img").each(function(){e(this).parent().prepend(this)});var n,r=e("#tools_left");0!==r.length&&(n=r.offset().top+r.outerHeight());var a=e.pref("iconsize");i.setIconSize(a||(e(window).height()<n?"s":"m")),e(".tools_flyout").each(function(){var t=e("#"+this.id+"_show"),i=t.attr("data-curopt");if(!t.children("svg, img").length){var n=e(i).children().clone();n.length&&(n[0].removeAttribute("style"),t.append(n))}}),i.runCallbacks(),setTimeout(function(){e(".flyout_arrow_horiz:empty").each(function(){e(this).append(e.getSvgIcon("arrow_right").width(5).height(5))})},1)}}),i.canvas=n=new e.SvgCanvas(document.getElementById("svgcanvas"),h);var I,M,V,O,j,R=["#000000","#3f3f3f","#7f7f7f","#bfbfbf","#ffffff","#ff0000","#ff7f00","#ffff00","#7fff00","#00ff00","#00ff7f","#00ffff","#007fff","#0000ff","#7f00ff","#ff00ff","#ff007f","#7f0000","#7f3f00","#7f7f00","#3f7f00","#007f00","#007f3f","#007f7f","#003f7f","#00007f","#3f007f","#7f007f","#7f003f","#ffaaaa","#ffd4aa","#ffffaa","#d4ffaa","#aaffaa","#aaffd4","#aaffff","#aad4ff","#aaaaff","#d4aaff","#ffaaff","#ffaad4"],B=svgedit.browser.isMac()?"meta+":"ctrl+",D=n.pathActions,F=n.undoMgr,H=h.imgPath+"logo.png",$=e("#workarea"),U=e("#cmenu_canvas"),z=null,q="crosshair",W="crosshair",X="toolbars",Y=i.originalSource,Q={fill:null,stroke:null};!function(){e("#dialog_container").draggable({cancel:"#dialog_content, #dialog_buttons *",containment:"window"});var t=e("#dialog_box"),i=e("#dialog_buttons"),n=e("#dialog_content"),r=function(r,a,s,o,l,u,c){var d,h,p;if(n.html("<p>"+a.replace(/\n/g,"</p><p>")+"</p>").toggleClass("prompt","prompt"==r),i.empty(),d=e('<input type="button" value="'+g.common.ok+'">').appendTo(i),"alert"!==r&&e('<input type="button" value="'+g.common.cancel+'">').appendTo(i).click(function(){t.hide(),s&&s(!1)}),"prompt"===r)h=e('<input type="text">').prependTo(i),h.val(o||""),h.bind("keydown","return",function(){d.click()});else if("select"===r){var f=e('<div style="text-align:center;">');if(h=e("<select>").appendTo(f),c){var m=e("<label>").text(c.label);p=e('<input type="checkbox">').appendTo(m),p.val(c.value),c.tooltip&&m.attr("title",c.tooltip),p.prop("checked",!!c.checked),f.append(e("<div>").append(m))}e.each(l||[],function(t,i){"object"==typeof i?h.append(e("<option>").val(i.value).html(i.text)):h.append(e("<option>").html(i))}),n.append(f),o&&h.val(o),u&&h.bind("change","return",u),h.bind("keydown","return",function(){d.click()})}else"process"===r&&d.hide();t.show(),d.click(function(){t.hide();var e="prompt"===r||"select"===r?h.val():!0;s&&(p?s(e,p.prop("checked")):s(e))}).focus(),("prompt"===r||"select"===r)&&h.focus()};e.alert=function(e,t){r("alert",e,t)},e.confirm=function(e,t){r("confirm",e,t)},e.process_cancel=function(e,t){r("process",e,t)},e.prompt=function(e,t,i){r("prompt",e,i,t)},e.select=function(e,t,i,n,a,s){r("select",e,i,a,t,n,s)}}();var K,Z=function(){var t=e(".tool_button_current");t.length&&"tool_select"!==t[0].id&&(t.removeClass("tool_button_current").addClass("tool_button"),e("#tool_select").addClass("tool_button_current").removeClass("tool_button"),e("#styleoverrides").text("#svgcanvas svg *{cursor:move;pointer-events:all} #svgcanvas svg{cursor:default}")),n.setMode("select"),$.css("cursor","auto")},J=!1,ee=null,te=!1,ie=!1,ne=!1,re=!1,ae="",se=e("title:first").text(),oe=[];for(K=.1;1e5>K;K*=10)oe.push(K),oe.push(2*K),oe.push(5*K);var le=function(e){var t,i=[],r=n.getCurrentDrawing().getNumLayers();for(t=0;r>t;t++)i[t]=n.getCurrentDrawing().getLayerName(t);if(e)for(t=0;r>t;++t)i[t]!=e&&n.getCurrentDrawing().setLayerOpacity(i[t],.5);else for(t=0;r>t;++t)n.getCurrentDrawing().setLayerOpacity(i[t],1)},ue=function(){n.clearSelection();for(var t=e("#layerlist tbody").empty(),i=e("#selLayerNames").empty(),r=n.getCurrentDrawing(),a=r.getCurrentLayerName(),s=n.getCurrentDrawing().getNumLayers(),o=e.getSvgIcon("eye");s--;){var l=r.getLayerName(s),u=e('<tr class="layer">').toggleClass("layersel",l===a),c=e('<td class="layervis">').toggleClass("layerinvis",!r.getLayerVisibility(l)),d=e('<td class="layername">'+l+"</td>");t.append(u.append(c,d)),i.append('<option value="'+l+'">'+l+"</option>")}if(void 0!==o){var h=o.clone();e("td.layervis",t).append(h),e.resizeSvgIcons({"td.layervis .svg_icon":14})}e("#layerlist td.layername").mouseup(function(t){e("#layerlist tr.layer").removeClass("layersel"),e(this.parentNode).addClass("layersel"),n.setCurrentLayer(this.textContent),t.preventDefault()}).mouseover(function(){le(this.textContent)}).mouseout(function(){le()}),e("#layerlist td.layervis").click(function(){var t=e(this.parentNode).prevAll().length,i=e("#layerlist tr.layer:eq("+t+") td.layername").text(),r=e(this).hasClass("layerinvis");n.setLayerVisibility(i,r),e(this).toggleClass("layerinvis")});for(var p=5-e("#layerlist tr.layer").size();p-->0;)t.append('<tr><td style="color:white">_</td><td/></tr>')},ce=function(t,i){ie||(ie=!0,Y=n.getSvgString(),e("#save_output_btns").toggle(!!i),e("#tool_source_back").toggle(!i),e("#svg_source_textarea").val(Y),e("#svg_source_editor").fadeIn(),e("#svg_source_textarea").focus())},de=function(t,i){e("#path_node_panel").toggle(t),e("#tools_bottom_2,#tools_bottom_3").toggle(!t),t?(e(".tool_button_current").removeClass("tool_button_current").addClass("tool_button"),
e("#tool_select").addClass("tool_button_current").removeClass("tool_button"),N("#tool_select","select_node"),te=!1,i.length&&(ee=i[0])):setTimeout(function(){N("#tool_select","select")},1e3)},he=function(t,n){if(i.showSaveWarning=!1,n='<?xml version="1.0"?>\n'+n,svgedit.browser.isIE())return void ce(0,!0);var r=t.open("data:image/svg+xml;base64,"+a.encode64(n)),s=e.pref("save_notice_done");if("all"!==s){var o=g.notification.saveFromBrowser.replace("%s","SVG");svgedit.browser.isGecko()?-1!==n.indexOf("<defs")?(o+="\n\n"+g.notification.defsFailOnSave,e.pref("save_notice_done","all"),s="all"):e.pref("save_notice_done","part"):e.pref("save_notice_done","all"),"part"!==s&&r.alert(o)}},pe=function(t,i){var n=i.issues,r=i.exportWindowName;r&&(z=window.open("",r)),z.location.href=i.datauri;var a=e.pref("export_notice_done");if("all"!==a){var s=g.notification.saveFromBrowser.replace("%s",i.type);if(n.length){var o="\n â¢ ";s+="\n\n"+g.notification.noteTheseIssues+o+n.join(o)}e.pref("export_notice_done","all"),z.alert(s)}},fe=function(){window.opera&&e("<p/>").hide().appendTo("body").remove()},ge=i.toolButtonClick=function(t,i){if(e(t).hasClass("disabled"))return!1;if(e(t).parent().hasClass("tools_flyout"))return!0;var n="normal";return i||e(".tools_flyout").fadeOut(n),e("#styleoverrides").text(""),$.css("cursor","auto"),e(".tool_button_current").removeClass("tool_button_current").addClass("tool_button"),e(t).addClass("tool_button_current").removeClass("tool_button"),!0},me=i.clickSelect=function(){ge("#tool_select")&&(n.setMode("select"),e("#styleoverrides").text("#svgcanvas svg *{cursor:move;pointer-events:all}, #svgcanvas svg{cursor:default}"))},ve=i.setImageURL=function(t){t||(t=H),n.setImageURL(t),e("#image_url").val(t),0===t.indexOf("data:")?(e("#image_url").hide(),e("#change_image_url").show()):(n.embedImage(t,function(i){e("#url_notice").toggle(!i),H=t}),e("#image_url").show(),e("#change_image_url").hide())},ye=function(t){var i=Math.min(Math.max(12+6*t.value.length,50),300);e(t).width(i)},be=i.updateCanvas=function(t,a){var s=$.width(),o=$.height(),l=s,u=o,c=n.getZoom(),d=$,p=e("#svgcanvas"),f={x:d[0].scrollLeft+l/2,y:d[0].scrollTop+u/2},g=h.canvas_expansion;s=Math.max(l,n.contentW*c*g),o=Math.max(u,n.contentH*c*g),s==l&&o==u?$.css("overflow","hidden"):$.css("overflow","scroll");var m=p.height()/2,v=p.width()/2;p.width(s).height(o);var y=o/2,_=s/2,x=n.updateCanvas(s,o),S=_/v,w=s/2-l/2,C=o/2-u/2;if(a)a.x+=x.x,a.y+=x.y;else{var k=f.x-v,A=_+k*S,P=f.y-m,T=y+P*S;a={x:A,y:T}}t?n.contentW>d.width()?($[0].scrollLeft=x.x-10,$[0].scrollTop=x.y-10):(d[0].scrollLeft=w,d[0].scrollTop=C):(d[0].scrollLeft=a.x-l/2,d[0].scrollTop=a.y-u/2),h.showRulers&&(b(p,c),$.scroll()),r.storagePrompt===!0||i.storagePromptClosed||e("#dialog_box").hide()},_e=function(){var t,i,r="none"==n.getColor("fill"),a="none"==n.getColor("stroke"),s=["#tool_fhpath","#tool_line"],o=["#tools_rect .tool_button","#tools_ellipse .tool_button","#tool_text","#tool_path"];if(a)for(t in s)i=s[t],e(i).hasClass("tool_button_current")&&me(),e(i).addClass("disabled");else for(t in s)i=s[t],e(i).removeClass("disabled");if(a&&r)for(t in o)i=o[t],e(i).hasClass("tool_button_current")&&me(),e(i).addClass("disabled");else for(t in o)i=o[t],e(i).removeClass("disabled");n.runExtensions("toolButtonStateUpdate",{nofill:r,nostroke:a}),e(".tools_flyout").each(function(){var t=e("#"+this.id+"_show"),i=!1;e(this).children().each(function(){e(this).hasClass("disabled")||(i=!0)}),t.toggleClass("disabled",!i)}),fe()},xe=function(){var t,i;if(null!=ee)switch(ee.tagName){case"use":case"image":case"foreignObject":break;case"g":case"a":var n=null,r=ee.getElementsByTagName("*");for(t=0,i=r.length;i>t;t++){var a=r[t].getAttribute("stroke-width");0===t?n=a:n!==a&&(n=null)}e("#stroke_width").val(null===n?"":n),Q.fill.update(!0),Q.stroke.update(!0);break;default:Q.fill.update(!0),Q.stroke.update(!0),e("#stroke_width").val(ee.getAttribute("stroke-width")||1),e("#stroke_style").val(ee.getAttribute("stroke-dasharray")||"none");var s=ee.getAttribute("stroke-linejoin")||"miter";0!=e("#linejoin_"+s).length&&m(e("#linejoin_"+s)[0]),s=ee.getAttribute("stroke-linecap")||"butt",0!=e("#linecap_"+s).length&&m(e("#linecap_"+s)[0])}if(null!=ee){var o=100*(ee.getAttribute("opacity")||1);e("#group_opacity").val(o),e("#opac_slider").slider("option","value",o),e("#elem_id").val(ee.id),e("#elem_class").val(ee.getAttribute("class"))}_e()},Se=function(){var t=ee;null==t||t.parentNode||(t=null);var i=n.getCurrentDrawing().getCurrentLayerName(),r=n.getMode(),a="px"!==h.baseUnit?h.baseUnit:null,s="pathedit"==r,o=e("#cmenu_canvas li");if(e("#selected_panel, #multiselected_panel, #g_panel, #rect_panel, #circle_panel,#ellipse_panel, #line_panel, #text_panel, #image_panel, #container_panel, #use_panel, #a_panel").hide(),null!=t){var l=t.nodeName,u=n.getRotationAngle(t);e("#angle").val(u);var c=n.getBlur(t);if(e("#blur").val(c),e("#blur_slider").slider("option","value",c),n.addedNew&&"image"===l&&0!==n.getHref(t).indexOf("data:")&&y(),s||"pathedit"==r){var d=D.getNodePoint();if(e("#tool_add_subpath").removeClass("push_button_pressed").addClass("tool_button"),e("#tool_node_delete").toggleClass("disabled",!D.canDeleteNodes),N("#tool_openclose_path",D.closed_subpath?"open_path":"close_path"),d){var p=e("#seg_type");a&&(d.x=svgedit.units.convertUnit(d.x),d.y=svgedit.units.convertUnit(d.y)),e("#path_node_x").val(d.x),e("#path_node_y").val(d.y),d.type?p.val(d.type).removeAttr("disabled"):p.val(4).attr("disabled","disabled")}return}if(e("#selected_panel").show(),["line","circle","ellipse"].indexOf(l)>=0)e("#xy_panel").hide();else{var f,g;if(["g","polyline","path"].indexOf(l)>=0){var m=n.getStrokedBBox([t]);m&&(f=m.x,g=m.y)}else f=t.getAttribute("x"),g=t.getAttribute("y");a&&(f=svgedit.units.convertUnit(f),g=svgedit.units.convertUnit(g)),e("#selected_x").val(f||0),e("#selected_y").val(g||0),e("#xy_panel").show()}var v=-1==["image","text","path","g","use"].indexOf(l);e("#tool_topath").toggle(v),e("#tool_reorient").toggle("path"===l),e("#tool_reorient").toggleClass("disabled",0===u);var b={g:[],a:[],rect:["rx","width","height"],image:["width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1","y1","x2","y2"],text:[],use:[]},_=t.tagName,x=null;if("a"===_&&(x=n.getHref(t),e("#g_panel").show()),"a"===t.parentNode.tagName&&(e(t).siblings().length||(e("#a_panel").show(),x=n.getHref(t.parentNode))),e("#tool_make_link, #tool_make_link").toggle(!x),x&&e("#link_url").val(x),b[_]){var S=b[_];if(e("#"+_+"_panel").show(),e.each(S,function(i,n){var r=t.getAttribute(n);if("px"!==h.baseUnit&&t[n]){var a=t[n].baseVal.value;r=svgedit.units.convertUnit(a)}e("#"+_+"_"+n).val(r||0)}),"text"==_)e("#text_panel").css("display","inline"),n.getItalic()?e("#tool_italic").addClass("push_button_pressed").removeClass("tool_button"):e("#tool_italic").removeClass("push_button_pressed").addClass("tool_button"),n.getBold()?e("#tool_bold").addClass("push_button_pressed").removeClass("tool_button"):e("#tool_bold").removeClass("push_button_pressed").addClass("tool_button"),e("#font_family").val(t.getAttribute("font-family")),e("#font_size").val(t.getAttribute("font-size")),e("#text").val(t.textContent),n.addedNew&&setTimeout(function(){e("#text").focus().select()},100);else if("image"==_)ve(n.getHref(t));else if("g"===_||"use"===_){e("#container_panel").show();var w=n.getTitle(),C=e("#g_title")[0];C.value=w,ye(C),e("#g_title").prop("disabled","use"==_)}}o[("g"===_?"en":"dis")+"ableContextMenuItems"]("#ungroup"),o[("g"!==_&&te?"en":"dis")+"ableContextMenuItems"]("#group")}else te?(e("#multiselected_panel").show(),o.enableContextMenuItems("#group").disableContextMenuItems("#ungroup")):o.disableContextMenuItems("#delete,#cut,#copy,#group,#ungroup,#move_front,#move_up,#move_down,#move_back");e("#tool_undo").toggleClass("disabled",0===F.getUndoStackSize()),e("#tool_redo").toggleClass("disabled",0===F.getRedoStackSize()),n.addedNew=!1,t&&!s||te?(e("#selLayerNames").removeAttr("disabled").val(i),U.enableContextMenuItems("#delete,#cut,#copy,#move_front,#move_up,#move_down,#move_back")):e("#selLayerNames").attr("disabled","disabled")},we=function(){if(!I){var t="#workarea.wireframe #svgcontent * { stroke-width: "+1/n.getZoom()+"px; }";e("#wireframe_rules").text($.hasClass("wireframe")?t:"")}},Ce=function(t){t=t||n.getDocumentTitle();var i=se+(t?": "+t:"");e("title:first").text(i)},ke=function(e,t){var i=n.getMode();"select"===i&&Z();var r="pathedit"==i;ee=1===t.length||null==t[1]?t[0]:null,te=t.length>=2&&null!=t[1],null!=ee&&(r||xe()),de(r,t),Se(),n.runExtensions("selectedChanged",{elems:t,selectedElement:ee,multiselected:te})},Ae=function(t,i){var r=n.getMode(),a=i[0];if(a){if(te=i.length>=2&&null!=i[1],!te)switch(r){case"rotate":var s=n.getRotationAngle(a);e("#angle").val(s),e("#tool_reorient").toggleClass("disabled",0===s)}n.runExtensions("elementTransition",{elems:i})}},Pe=function(e,t){var r,a=n.getMode();for("select"===a&&Z(),r=0;r<t.length;++r){var s=t[r];s&&"svg"===s.tagName?(ue(),be()):s&&ee&&null==ee.parentNode&&(ee=s)}i.showSaveWarning=!0,Se(),ee&&"select"===a&&(Q.fill.update(),Q.stroke.update()),n.runExtensions("elementChanged",{elems:t})},Te=function(){we()},Ee=n.zoomChanged=function(t,i,r){var a=15,s=$,o=n.setBBoxZoom(i,s.width()-a,s.height()-a);if(o){var l=o.zoom,u=o.bbox;if(.001>l)return void V({value:.1});e("#zoom").val((100*l).toFixed(1)),r?be():be(!1,{x:u.x*l+u.width*l/2,y:u.y*l+u.height*l/2}),"zoom"==n.getMode()&&u.width&&Z(),Te()}};V=function(e){var t=e.value/100;if(.001>t)return void(e.value=.1);var i=n.getZoom(),r=$;Ee(window,{width:0,height:0,x:(r[0].scrollLeft+r.width()/2)/i,y:(r[0].scrollTop+r.height()/2)/i,zoom:t},!0)},e("#cur_context_panel").delegate("a","click",function(){var t=e(this);return t.attr("data-root")?n.leaveContext():n.setContext(t.text()),n.clearSelection(),!1});var Ge=function(t,i){var r="";if(i){var a="";r='<a href="#" data-root="y">'+n.getCurrentDrawing().getCurrentLayerName()+"</a>",e(i).parentsUntil("#svgcontent > g").andSelf().each(function(){this.id&&(a+=" > "+this.id,r+=this!==i?' > <a href="#">'+this.id+"</a>":" > "+this.id)}),ae=a}else ae=null;e("#cur_context_panel").toggle(!!i).html(r),Ce()},Ne=function(){Q.fill.prep(),Q.stroke.prep()},Le={},Ie=function(){e(".tools_flyout").each(function(){var t=e("#"+this.id+"_show");if(!t.data("isLibrary")){var i=[];e(this).children().each(function(){i.push(this.title)}),t[0].title=i.join(" / ")}})},Me=function(){e(".tools_flyout").each(function(){var t=e("#"+this.id+"_show"),n=t.offset(),r=t.outerWidth();e(this).css({left:(n.left+r)*i.tool_scale,top:n.top-63})})},Ve=function(t){e.each(t,function(i,n){var r=e(i).children(),a=i+"_show",s=e(a),o=!1;r.addClass("tool_button").unbind("click mousedown mouseup").each(function(i){var r=n[i];Le[r.sel]=r.fn,r.isDefault&&(o=i);var l=function(i){var n=r;if("keydown"===i.type){var o=e(n.parent+"_show").hasClass("tool_button_current"),l=e(n.parent+"_show").attr("data-curopt");e.each(t[r.parent],function(e,a){a.sel==l&&(n=i.shiftKey&&o?t[r.parent][e+1]||t[r.parent][0]:a)})}if(e(this).hasClass("disabled"))return!1;ge(a)&&n.fn();var u;u=n.icon?e.getSvgIcon(n.icon,!0):e(n.sel).children().eq(0).clone(),u[0].setAttribute("width",s.width()),u[0].setAttribute("height",s.height()),s.children(":not(.flyout_arrow_horiz)").remove(),s.append(u).attr("data-curopt",n.sel)};e(this).mouseup(l),r.key&&e(document).bind("keydown",r.key[0]+" shift+"+r.key[0],l)}),o?s.attr("data-curopt",n[o].sel):s.attr("data-curopt")||s.attr("data-curopt",n[0].sel);var l,u=e(a).position();s.mousedown(function(t){if(s.hasClass("disabled"))return!1;var n=e(i),r=u.left+34,a=-1*n.width(),o=n.data("shown_popop")?200:0;l=setTimeout(function(){s.data("isLibrary")?n.css("left",r).show():n.css("left",a).show().animate({left:r},150),n.data("shown_popop",!0)},o),t.preventDefault()}).mouseup(function(t){clearTimeout(l);var i=e(this).attr("data-curopt");return s.data("isLibrary")&&e(a.replace("_show","")).is(":visible")?void ge(a,!0):void(ge(a)&&Le[i]&&Le[i]())})}),Ie(),Me()},Oe=function(t,i){var n=e("<div>",{"class":"tools_flyout",id:t}).appendTo("#svg_editor").append(i);return n},je=function(){var e,t=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,i=document.getElementsByTagName("script")[0];for(e in i.style)if(t.test(e))return e.match(t)[0];return"WebkitOpacity"in i.style?"Webkit":"KhtmlOpacity"in i.style?"Khtml":""}(),Re=function(t,i){var n=["top","left","bottom","right"];t.each(function(){var t,r=e(this),a=r.outerWidth()*(i-1),s=r.outerHeight()*(i-1);for(t=0;4>t;t++){var o=n[t],l=r.data("orig_margin-"+o);null==l&&(l=parseInt(r.css("margin-"+o),10),r.data("orig_margin-"+o,l));var u=l*i;"right"===o?u+=a:"bottom"===o&&(u+=s),r.css("margin-"+o,u)}})},Be=i.setIconSize=function(t){var n="#tools_top .toolset, #editor_panel > *, #history_panel > *,				#main_button, #tools_left > *, #path_node_panel > *, #multiselected_panel > *,				#g_panel > *, #tool_font_size > *, .tools_flyout",r=e(n),a=1;if("number"==typeof t)a=t;else{var s={s:.75,m:1,l:1.25,xl:1.5};a=s[t]}i.tool_scale=a,Me();var o=r.parents(":hidden");o.css("visibility","hidden").show(),Re(r,a),o.css("visibility","visible").hide(),e.pref("iconsize",t),e("#iconsize").val(t);var l={"#tools_top":{left:50+e("#main_button").width(),height:72},"#tools_left":{width:31,top:74},"div#workarea":{left:38,top:74}},u=e("#tool_size_rules");if(u.length?u.empty():u=e('<style id="tool_size_rules"></style>').appendTo("head"),"m"!==t){var c="";e.each(l,function(i,n){i="#svg_editor "+i.replace(/,/g,", #svg_editor"),c+=i+"{",e.each(n,function(e,i){var n;"number"==typeof i?n=i*a+"px":(i[t]||i.all)&&(n=i[t]||i.all),c+=e+":"+n+";"}),c+="}"});var d="-"+je.toLowerCase()+"-";c+=n+"{"+d+"transform: scale("+a+");} #svg_editor div.toolset .toolset {"+d+"transform: scale(1); margin: 1px !important;} #svg_editor .ui-slider {"+d+"transform: scale("+1/a+");}",u.text(c)}Me()},De=function(t,i,n,r){var a=e(t);i=e(i);var s=!1,o=r.dropUp;o&&e(t).addClass("dropup"),i.find("li").bind("mouseup",function(){r.seticon&&(N("#cur_"+a[0].id,e(this).children()),e(this).addClass("current").siblings().removeClass("current")),n.apply(this,arguments)}),e(window).mouseup(function(e){s||(a.removeClass("down"),i.hide(),i.css({top:0,left:0})),s=!1}),a.bind("mousedown",function(){var e=a.offset();o?(e.top-=i.height(),e.left+=8):e.top+=a.height(),i.offset(e),a.hasClass("down")?(i.hide(),i.css({top:0,left:0})):(i.show(),s=!0),a.toggleClass("down")}).hover(function(){s=!0}).mouseout(function(){s=!1}),r.multiclick&&i.mousedown(function(){s=!0})},Fe=[],He=function(t,n){function r(){M&&(clearTimeout(M),M=null),s||(M=setTimeout(function(){s=!0,Be(e.pref("iconsize"))},50))}if(n){var a=!1,s=!1,o=!0;if(n.langReady)if(i.langChanged){var l=e.pref("lang");n.langReady({lang:l,uiStrings:g})}else Fe.push(n);var u=function(){n.callback&&!a&&o&&(a=!0,n.callback())},c=[];if(n.context_tools&&e.each(n.context_tools,function(t,i){var n,r=i.container_id?' id="'+i.container_id+'"':"",a=e("#"+i.panel);switch(a.length||(a=e("<div>",{id:i.panel}).appendTo("#tools_top")),i.type){case"tool_button":n='<div class="tool_button">'+i.id+"</div>";var s=e(n).appendTo(a);i.events&&e.each(i.events,function(t,i){e(s).bind(t,i)});break;case"select":n="<label"+r+'><select id="'+i.id+'">',e.each(i.options,function(e,t){var r=e==i.defval?" selected":"";n+='<option value="'+e+'"'+r+">"+t+"</option>"}),n+="</select></label>";var o=e(n).appendTo(a).find("select");e.each(i.events,function(t,i){e(o).bind(t,i)});break;case"button-select":n='<div id="'+i.id+'" class="dropdown toolset" title="'+i.title+'"><div id="cur_'+i.id+'" class="icon_label"></div><button></button></div>';var l=e('<ul id="'+i.id+'_opts"></ul>').appendTo("#option_lists");i.colnum&&l.addClass("optcols"+i.colnum);e(n).appendTo(a).children();c.push({elem:"#"+i.id,list:"#"+i.id+"_opts",title:i.title,callback:i.events.change,cur:"#cur_"+i.id});break;case"input":n="<label"+r+'><span id="'+i.id+'_label">'+i.label+':</span><input id="'+i.id+'" title="'+i.title+'" size="'+(i.size||"4")+'" value="'+(i.defval||"")+'" type="text"/></label>';var u=e(n).appendTo(a).find("input");i.spindata&&u.SpinButton(i.spindata),i.events&&e.each(i.events,function(e,t){u.bind(e,t)})}}),n.buttons){var d={},h={},p=n.svgicons,f={};e.each(n.buttons,function(t,i){for(var n,r,a,s=i.id,o=t;e("#"+s).length;)s=i.id+"_"+ ++o;p?(d[s]=i.icon,r=i.svgicon||i.id,"app_menu"==i.type?h["#"+s+" > div"]=r:h["#"+s]=r):n=e('<img src="'+i.icon+'">');var l,u;switch(i.type){case"mode_flyout":case"mode":l="tool_button",u="#tools_left";break;case"context":l="tool_button",u="#"+i.panel,e(u).length||e("<div>",{id:i.panel}).appendTo("#tools_top");break;case"app_menu":l="",u="#main_menu ul"}var c,g,m,v,y,b=e(i.list||"app_menu"==i.type?"<li/>":"<div/>").attr("id",s).attr("title",i.title).addClass(l);if(i.includeWith||i.list){if(i.list)b.addClass("push_button"),e("#"+i.list+"_opts").append(b),i.isDefault&&(e("#cur_"+i.list).append(b.children().clone()),r=i.svgicon||i.id,h["#cur_"+i.list]=r);else if(i.includeWith){var _=i.includeWith;y=e(_.button),c=y.parent(),y.parent().hasClass("tools_flyout")||(a=y[0].id.replace("tool_","tools_"),m=y.clone().attr("id",a+"_show").append(e("<div>",{"class":"flyout_arrow_horiz"})),y.before(m),c=Oe(a,y)),v=O.getButtonData(_.button),_.isDefault&&(h["#"+a+"_show"]=i.id),g=f["#"+c[0].id]=[{sel:"#"+s,fn:i.events.click,icon:i.id,key:i.key,isDefault:i.includeWith?i.includeWith.isDefault:0},v];var x="position"in _?_.position:"last",S=c.children().length;!isNaN(x)&&x>=0&&S>x?c.children().eq(x).before(b):(c.append(b),g.reverse())}}else"position"in i?e(u).children().eq(i.position).length?e(u).children().eq(i.position).before(b):e(u).children().last().before(b):b.appendTo(u),"mode_flyout"==i.type?(y=e(b),c=y.parent(),y.parent().hasClass("tools_flyout")||(a=y[0].id.replace("tool_","tools_"),m=y.clone().attr("id",a+"_show").append(e("<div>",{"class":"flyout_arrow_horiz"})),y.before(m),c=Oe(a,y),c.data("isLibrary",!0),m.data("isLibrary",!0)),h["#"+a+"_show"]=i.id,g=f["#"+c[0].id]=[{sel:"#"+s,fn:i.events.click,icon:i.id,isDefault:!0},v]):"app_menu"==i.type&&b.append("<div>").append(i.title);p||b.append(n),i.list||e.each(i.events,function(t,n){"click"==t&&"mode"==i.type?(i.includeWith?b.bind(t,n):b.bind(t,function(){ge(b)&&n()}),i.key&&(e(document).bind("keydown",i.key,n),i.title&&b.attr("title",i.title+" ["+i.key+"]"))):b.bind(t,n)}),Ve(f)}),e.each(c,function(){De(this.elem,this.list,this.callback,{seticon:!0})}),p&&(o=!1),e.svgIcons(p,{w:24,h:24,id_match:!1,no_img:!svgedit.browser.isWebkit(),fallback:d,placement:h,callback:function(t){"m"!==e.pref("iconsize")&&r(),o=!0,u()}})}u()}},$e=function(t,i,r){var a={alpha:i};if(0===t.indexOf("url(#")){var s=n.getRefElem(t);s=s?s.cloneNode(!0):e("#"+r+"_color defs *")[0],a[s.tagName]=s}else 0===t.indexOf("#")?a.solidColor=t.substr(1):a.solidColor="none";return new e.jGraduate.Paint(a)};e("#text").focus(function(){J=!0}),e("#text").blur(function(){J=!1}),n.bind("selected",ke),n.bind("transition",Ae),n.bind("changed",Pe),n.bind("saved",he),n.bind("exported",pe),n.bind("exportedPDF",function(e,t){var i=t.exportWindowName;i&&(z=window.open("",i)),z.location.href=t.dataurlstring}),n.bind("zoomed",Ee),n.bind("contextset",Ge),n.bind("extension_added",He),n.textActions.setInputElem(e("#text")[0]);var Ue='<div class="palette_item" data-rgb="none"></div>';e.each(R,function(e,t){Ue+='<div class="palette_item" style="background-color: '+t+';" data-rgb="'+t+'"></div>'}),e("#palette").append(Ue);var ze=["#FFF","#888","#000"];Ue="",e.each(ze,function(){Ue+='<div class="color_block" style="background-color:'+this+';"></div>'}),e("#bg_blocks").append(Ue);var qe=e("#bg_blocks div"),We="cur_background";qe.each(function(){var t=e(this);t.click(function(){qe.removeClass(We),e(this).addClass(We)})}),v(e.pref("bkgd_color"),e.pref("bkgd_url")),e("#image_save_opts input").val([e.pref("img_save")]);var Xe=function(e){n.setRectRadius(e.value)},Ye=function(e){n.setFontSize(e.value)},Qe=function(e){var t=e.value;0==t&&ee&&["line","polyline"].indexOf(ee.nodeName)>=0&&(t=e.value=1),n.setStrokeWidth(t)},Ke=function(t){n.setRotationAngle(t.value),e("#tool_reorient").toggleClass("disabled",0===parseInt(t.value,10))},Ze=function(t,i){null==i&&(i=t.value),e("#group_opacity").val(i),t&&t.handle||e("#opac_slider").slider("option","value",i),n.setOpacity(i/100)},Je=function(t,i,r){null==i&&(i=t.value),e("#blur").val(i);var a=!1;t&&t.handle||(e("#blur_slider").slider("option","value",i),a=!0),r?n.setBlurNoUndo(i):n.setBlur(i,a)};e("#stroke_style").change(function(){n.setStrokeAttr("stroke-dasharray",e(this).val()),fe()}),e("#stroke_linejoin").change(function(){n.setStrokeAttr("stroke-linejoin",e(this).val()),fe()}),e("select").change(function(){e(this).blur()});var et=!1;e("#selLayerNames").change(function(){var t=this.options[this.selectedIndex].value,i=g.notification.QmoveElemsToLayer.replace("%s",t),r=function(e){e&&(et=!0,n.moveSelectedToLayer(t),n.clearSelection(),ue())};t&&(et?r(!0):e.confirm(i,r))}),e("#font_family").change(function(){n.setFontFamily(this.value)}),e("#seg_type").change(function(){n.setSegType(e(this).val())}),e("#text").keyup(function(){n.setTextContent(this.value)}),e("#image_url").change(function(){ve(this.value)}),e("#link_url").change(function(){this.value.length?n.setLinkURL(this.value):n.removeHyperlink()}),e("#g_title").change(function(){n.setGroupTitle(this.value)}),e(".attr_changer").change(function(){var t=this.getAttribute("data-attr"),i=this.value,r=svgedit.units.isValidUnit(t,i,ee);if(!r)return e.alert(g.notification.invalidAttrValGiven),this.value=ee.getAttribute(t),!1;if("id"!==t&&"class"!==t)if(isNaN(i))i=n.convertToNum(t,i);else if("px"!==h.baseUnit){var a=svgedit.units.getTypeMap();(ee[t]||"pathedit"===n.getMode()||"x"===t||"y"===t)&&(i*=a[h.baseUnit])}if("id"===t){var s=ee;n.clearSelection(),s.id=i,n.addToSelection([s],!0)}else n.changeSelectedAttribute(t,i);this.blur()}),e("#palette").mouseover(function(){var t=e('<input type="hidden">');e(this).append(t),t.focus().remove()}),e(".palette_item").mousedown(function(t){var i,r=t.shiftKey||2===t.button?"stroke":"fill",a=e(this).data("rgb");"none"===a||"transparent"===a||"initial"===a?(a="none",i=new e.jGraduate.Paint):i=new e.jGraduate.Paint({alpha:100,solidColor:a.substr(1)}),Q[r].setPaint(i),n.setColor(r,a),"none"!==a&&1!==n.getPaintOpacity(r)&&n.setPaintOpacity(r,1),_e()}).bind("contextmenu",function(e){e.preventDefault()}),e("#toggle_stroke_tools").on("click",function(){e("#tools_bottom").toggleClass("expanded")}),function(){var t=null,r=null,a=$[0],s=!1,o=!1;e("#svgcanvas").bind("mousemove mouseup",function(e){return s!==!1?(a.scrollLeft-=e.clientX-t,a.scrollTop-=e.clientY-r,t=e.clientX,r=e.clientY,"mouseup"===e.type&&(s=!1),!1):void 0}).mousedown(function(e){return 1===e.button||o===!0?(s=!0,t=e.clientX,r=e.clientY,!1):void 0}),e(window).mouseup(function(){s=!1}),e(document).bind("keydown","space",function(e){n.spaceKey=o=!0,e.preventDefault()}).bind("keyup","space",function(e){e.preventDefault(),n.spaceKey=o=!1}).bind("keydown","shift",function(e){"zoom"===n.getMode()&&$.css("cursor",W)}).bind("keyup","shift",function(e){"zoom"===n.getMode()&&$.css("cursor",q)}),i.setPanning=function(e){n.spaceKey=o=e}}(),function(){var t=e("#main_icon"),i=e("#main_icon span"),n=e("#main_menu"),r=!1,a=0,s=!0,o=!1;e(window).mouseup(function(i){r||(t.removeClass("buttondown"),"INPUT"!=i.target.tagName?n.fadeOut(200):o||(o=!0,e(i.target).click(function(){n.css("margin-left","-9999px").show()}))),r=!1}).mousedown(function(t){var i=e(t.target).closest("div.tools_flyout, .contextMenu").length;i||e(".tools_flyout:visible,.contextMenu").fadeOut(250)}),i.bind("mousedown",function(){t.hasClass("buttondown")?n.fadeOut(200):(n.css("margin-left",0).show(),a||(a=n.height()),n.css("height",0).animate({height:a},200),r=!0),t.toggleClass("buttondown buttonup")}).hover(function(){r=!0}).mouseout(function(){r=!1});var l=e("#main_menu li");l.mouseover(function(){s="rgba(0, 0, 0, 0)"==e(this).css("background-color"),l.unbind("mouseover"),s&&l.mouseover(function(){this.style.backgroundColor="#FFC"}).mouseout(function(){return this.style.backgroundColor="transparent",!0})})}(),i.addDropDown=function(t,i,n){if(0!=e(t).length){var r=e(t).find("button"),a=e(t).find("ul").attr("id",e(t)[0].id+"-list"),s=!1;n?e(t).addClass("dropup"):e("#option_lists").append(a),a.find("li").bind("mouseup",i),e(window).mouseup(function(e){s||(r.removeClass("down"),a.hide()),s=!1}),r.bind("mousedown",function(){if(r.hasClass("down"))a.hide();else{if(!n){var i=e(t).position();a.css({top:i.top+24,left:i.left-10})}a.show(),s=!0}r.toggleClass("down")}).hover(function(){s=!0}).mouseout(function(){s=!1})}},i.addDropDown("#font_family_dropdown",function(){e("#font_family").val(e(this).text()).change()}),i.addDropDown("#opacity_dropdown",function(){if(!e(this).find("div").length){var t=parseInt(e(this).text().split("%")[0],10);Ze(!1,t)}},!0),e("#opac_slider").slider({start:function(){e("#opacity_dropdown li:not(.special)").hide()},stop:function(){e("#opacity_dropdown li").show(),e(window).mouseup()},slide:function(e,t){Ze(t)}}),i.addDropDown("#blur_dropdown",e.noop);var tt=!1;e("#blur_slider").slider({max:10,step:.1,stop:function(t,i){tt=!1,Je(i),e("#blur_dropdown li").show(),e(window).mouseup()},start:function(){tt=!0},slide:function(e,t){Je(t,null,tt)}}),i.addDropDown("#zoom_dropdown",function(){var t=e(this),i=t.data("val");i?Ee(window,i):V({value:parseFloat(t.text())})},!0),De("#stroke_linecap","#linecap_opts",function(){m(this,!0)},{dropUp:!0}),De("#stroke_linejoin","#linejoin_opts",function(){m(this,!0)},{dropUp:!0}),De("#tool_position","#position_opts",function(){var e=this.id.replace("tool_pos","").charAt(0);n.alignSelectedElements(e,"page")},{multiclick:!0}),function(){var t,i=function(){e(t).blur()};e("#svg_editor").find("button, select, input:not(#text)").focus(function(){t=this,X="toolbars",$.mousedown(i)}).blur(function(){X="canvas",$.unbind("mousedown",i),"textedit"==n.getMode()&&e("#text").focus()})}();var it=function(){ge("#tool_fhpath")&&n.setMode("fhpath")},nt=function(){ge("#tool_line")&&n.setMode("line")},rt=function(){ge("#tool_square")&&n.setMode("square")},at=function(){ge("#tool_rect")&&n.setMode("rect")},st=function(){ge("#tool_fhrect")&&n.setMode("fhrect")},ot=function(){ge("#tool_circle")&&n.setMode("circle")},lt=function(){ge("#tool_ellipse")&&n.setMode("ellipse")},ut=function(){ge("#tool_fhellipse")&&n.setMode("fhellipse")},ct=function(){ge("#tool_image")&&n.setMode("image")},dt=function(){ge("#tool_zoom")&&(n.setMode("zoom"),$.css("cursor",q))},ht=function(t){var i=n.getResolution();t=t?i.zoom*t:1,e("#zoom").val(100*t),n.setZoom(t),Te(),be(!0)},pt=function(){ge("#tool_zoom")&&(ht(),Z())},ft=function(){ge("#tool_text")&&n.setMode("text")},gt=function(){ge("#tool_path")&&n.setMode("path")},mt=function(){(null!=ee||te)&&n.deleteSelectedElements()},vt=function(){(null!=ee||te)&&n.cutSelectedElements()},yt=function(){(null!=ee||te)&&n.copySelectedElements()},bt=function(){var e=n.getZoom(),t=($[0].scrollLeft+$.width()/2)/e-n.contentW,i=($[0].scrollTop+$.height()/2)/e-n.contentH;n.pasteElements("point",t,i)},_t=function(){null!=ee&&n.moveToTopSelectedElement()},xt=function(){null!=ee&&n.moveToBottomSelectedElement()},St=function(e){null!=ee&&n.moveUpDownSelected(e)},wt=function(){null!=ee&&n.convertToPath()},Ct=function(){null!=ee&&D.reorient()},kt=function(){(null!=ee||te)&&e.prompt(g.notification.enterNewLinkURL,"http://",function(e){e&&n.makeHyperlink(e)})},At=function(e,t){if(null!=ee||te){if(h.gridSnapping){var i=n.getZoom()*h.snappingStep;e*=i,t*=i}n.moveSelectedElements(e,t)}},Pt=function(){e("#tool_node_link").toggleClass("push_button_pressed tool_button");var t=e("#tool_node_link").hasClass("push_button_pressed");D.linkControlPoints(t)},Tt=function(){D.getNodePoint()&&D.clonePathNode()},Et=function(){D.getNodePoint()&&D.deletePathNode()},Gt=function(){var t=e("#tool_add_subpath"),i=!t.hasClass("push_button_pressed");t.toggleClass("push_button_pressed tool_button"),D.addSubPath(i)},Nt=function(){D.opencloseSubPath()},Lt=function(){n.cycleElement(1)},It=function(){n.cycleElement(0)},Mt=function(t,i){if(null!=ee&&!te){t||(i*=-1);var r=parseFloat(e("#angle").val())+i;n.setRotationAngle(r),Se()}},Vt=function(){var t=h.dimensions;e.confirm(g.notification.QwantToClear,function(e){e&&(Z(),n.clear(),n.setResolution(t[0],t[1]),be(!0),ht(),ue(),Se(),Ne(),n.runExtensions("onNewDocument"))})},Ot=function(){return n.setBold(!n.getBold()),Se(),!1},jt=function(){return n.setItalic(!n.getItalic()),Se(),!1},Rt=function(){var t={images:e.pref("img_save"),round_digits:6};n.save(t)},Bt=function(){e.select("Select an image type for export: ",["PNG","JPEG","BMP","WEBP","PDF"],function(t){function r(){var e=g.notification.loadingImage;"new"===h.exportWindowType&&i.exportWindowCt++,a=h.canvasName+i.exportWindowCt,z=window.open("data:text/html;charset=utf-8,"+encodeURIComponent("<title>"+e+"</title><h1>"+e+"</h1>"),a)}if(t){var a;if("PDF"===t)l||r(),n.exportPDF(a);else{o||r();var s=parseInt(e("#image-slider").val(),10)/100;n.rasterExport(t,s,a)}}},function(){var t=e(this);"JPEG"===t.val()||"WEBP"===t.val()?e("#image-slider").length||e('<div><label>Quality: <input id="image-slider" type="range" min="1" max="100" value="92" /></label></div>').appendTo(t.parent()):e("#image-slider").parent().remove()})},Dt=function(){n.open()},Ft=function(){},Ht=function(){F.getUndoStackSize()>0&&(F.undo(),ue())},$t=function(){F.getRedoStackSize()>0&&(F.redo(),ue())},Ut=function(){te?n.groupSelectedElements():ee&&n.ungroupSelectedElement()},zt=function(){n.cloneSelectedElements(20,20)},qt=function(){var t=this.id.replace("tool_align","").charAt(0);n.alignSelectedElements(t,e("#align_relative_to").val())},Wt=function(){if(e("#tool_wireframe").toggleClass("push_button_pressed tool_button"),$.toggleClass("wireframe"),!I){var t=e("#wireframe_rules");t.length?t.empty():t=e('<style id="wireframe_rules"></style>').appendTo("head"),we()}};e("#svg_docprops_container, #svg_prefs_container").draggable({cancel:"button,fieldset",containment:"window"});var Xt=function(){if(!ne){ne=!0,e("#image_save_opts input").val([e.pref("img_save")]);var t=n.getResolution();"px"!==h.baseUnit&&(t.w=svgedit.units.convertUnit(t.w)+h.baseUnit,t.h=svgedit.units.convertUnit(t.h)+h.baseUnit),e("#canvas_width").val(t.w),e("#canvas_height").val(t.h),e("#canvas_title").val(n.getDocumentTitle()),e("#svg_docprops").show()}},Yt=function(){if(!re){re=!0,e("#main_menu").hide();var t=e("#bg_blocks div"),i="cur_background",n=d.bkgd_color,r=e.pref("bkgd_url");t.each(function(){var t=e(this),r=t.css("background-color")==n;t.toggleClass(i,r),r&&e("#canvas_bg_url").removeClass(i)}),n||t.eq(0).addClass(i),r&&e("#canvas_bg_url").val(r),e("#grid_snapping_on").prop("checked",h.gridSnapping),e("#grid_snapping_step").attr("value",h.snappingStep),e("#grid_color").attr("value",h.gridColor),e("#svg_prefs").show()}},Qt=function(){e("#svg_source_editor").hide(),ie=!1,e("#svg_source_textarea").blur()},Kt=function(){if(ie){var t=function(){n.clearSelection(),Qt(),ht(),ue(),Ce(),Ne()};n.setSvgString(e("#svg_source_textarea").val())?t():e.confirm(g.notification.QerrorsRevertToSource,function(e){return e?void t():!1}),Z()}},Zt=function(){e("#svg_docprops").hide(),e("#canvas_width,#canvas_height").removeAttr("disabled"),e("#resolution")[0].selectedIndex=0,e("#image_save_opts input").val([e.pref("img_save")]),ne=!1},Jt=function(){e("#svg_prefs").hide(),re=!1},ei=function(){var t=e("#canvas_title").val();Ce(t),n.setDocumentTitle(t);var i=e("#canvas_width"),r=i.val(),a=e("#canvas_height"),s=a.val();return"fit"==r||svgedit.units.isValidUnit("width",r)?(i.parent().removeClass("error"),"fit"==s||svgedit.units.isValidUnit("height",s)?(a.parent().removeClass("error"),n.setResolution(r,s)?(e.pref("img_save",e("#image_save_opts :checked").val()),be(),void Zt()):(e.alert(g.notification.noContentToFitTo),!1)):(e.alert(g.notification.invalidAttrValGiven),
a.parent().addClass("error"),!1)):(e.alert(g.notification.invalidAttrValGiven),i.parent().addClass("error"),!1)},ti=i.savePreferences=function(){var t=e("#bg_blocks div.cur_background").css("background-color")||"#FFF";v(t,e("#canvas_bg_url").val());var i=e("#lang_select").val();i!==e.pref("lang"),Be(e("#iconsize").val()),h.gridSnapping=e("#grid_snapping_on")[0].checked,h.snappingStep=e("#grid_snapping_step").val(),h.gridColor=e("#grid_color").val(),h.showRulers=e("#show_rulers")[0].checked,e("#rulers").toggle(h.showRulers),h.showRulers&&b(),h.baseUnit=e("#base_unit").val(),n.setConfig(h),be(),Jt()},ii=e.noop,ni=function(){return e("#dialog_box").hide(),ie||ne||re?(ie?Y!==e("#svg_source_textarea").val()?e.confirm(g.notification.QignoreSourceChanges,function(e){e&&Qt()}):Qt():ne?Zt():re&&Jt(),void ii()):void(ae&&n.leaveContext())},ri={width:e(window).width(),height:e(window).height()};if(svgedit.browser.isIE()&&!function(){ii=function(){0===$[0].scrollLeft&&0===$[0].scrollTop&&($[0].scrollLeft=j.left,$[0].scrollTop=j.top)},j={left:$[0].scrollLeft,top:$[0].scrollTop},e(window).resize(ii),i.ready(function(){setTimeout(function(){ii()},500)}),$.scroll(function(){j={left:$[0].scrollLeft,top:$[0].scrollTop}})}(),e(window).resize(function(t){e.each(ri,function(t,i){var n=e(window)[t]();$[0]["scroll"+("width"===t?"Left":"Top")]-=(n-i)/2,ri[t]=n}),Me()}),function(){$.scroll(function(){0!=e("#ruler_x").length&&(e("#ruler_x")[0].scrollLeft=$[0].scrollLeft),0!=e("#ruler_y").length&&(e("#ruler_y")[0].scrollTop=$[0].scrollTop)})}(),e("#url_notice").click(function(){e.alert(this.title)}),e("#change_image_url").click(y),function(){var t=["clear","open","save","source","delete","delete_multi","paste","clone","clone_multi","move_top","move_bottom"],i="",n="tool_button_current";e.each(t,function(e,t){i+=(e?",":"")+"#tool_"+t}),e(i).mousedown(function(){e(this).addClass(n)}).bind("mousedown mouseout",function(){e(this).removeClass(n)}),e("#tool_undo, #tool_redo").mousedown(function(){e(this).hasClass("disabled")||e(this).addClass(n)}).bind("mousedown mouseout",function(){e(this).removeClass(n)})}(),svgedit.browser.isMac()&&!window.opera){var ai=["tool_clear","tool_save","tool_source","tool_undo","tool_redo","tool_clone"];for(K=ai.length;K--;){var si=document.getElementById(ai[K]);if(si){var oi=si.title,li=oi.indexOf("Ctrl+");si.title=[oi.substr(0,li),"Cmd+",oi.substr(li+5)].join("")}}}var ui=function(t){var i="stroke_color"==t.attr("id")?"stroke":"fill",r=Q[i].paint,a="stroke"==i?"Pick a Stroke Paint and Opacity":"Pick a Fill Paint and Opacity",s=t.offset();e("#color_picker").draggable({cancel:".jGraduate_tabs, .jGraduate_colPick, .jGraduate_gradPick, .jPicker",containment:"window"}).css(h.colorPickerCSS||{left:s.left-140,bottom:40}).jGraduate({paint:r,window:{pickerTitle:a},images:{clientPath:h.jGraduatePath},newstop:"inverse"},function(t){r=new e.jGraduate.Paint(t),Q[i].setPaint(r),n.setPaint(i,r),e("#color_picker").hide()},function(){e("#color_picker").hide()})},ci=function(t,i){var r,a,s=h["fill"===i?"initFill":"initStroke"],o=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><rect width="16.5" height="16.5"					fill="#'+s.color+'" opacity="'+s.opacity+'"/>					<defs><linearGradient id="gradbox_"/></defs></svg>',"text/xml"),l=o.documentElement;l=e(t)[0].appendChild(document.importNode(l,!0)),l.setAttribute("width",16.5),this.rect=l.firstChild,this.defs=l.getElementsByTagName("defs")[0],this.grad=this.defs.firstChild,this.paint=new e.jGraduate.Paint({solidColor:s.color}),this.type=i,this.setPaint=function(e,t){this.paint=e;var i="none",s=e.type,o=e.alpha/100;switch(s){case"solidColor":i="none"!=e[s]?"#"+e[s]:e[s];break;case"linearGradient":case"radialGradient":this.defs.removeChild(this.grad),this.grad=this.defs.appendChild(e[s]);var l=this.grad.id="gradbox_"+this.type;i="url(#"+l+")"}this.rect.setAttribute("fill",i),this.rect.setAttribute("opacity",o),t&&(n.setColor(this.type,r,!0),n.setPaintOpacity(this.type,a,!0))},this.update=function(e){if(ee){var t,i,s=this.type;switch(ee.tagName){case"use":case"image":case"foreignObject":return;case"g":case"a":var o=null,l=ee.getElementsByTagName("*");for(t=0,i=l.length;i>t;t++){var u=l[t],c=u.getAttribute(s);if(0===t)o=c;else if(o!==c){o=null;break}}if(null===o)return void(r=null);r=o,a=1;break;default:a=parseFloat(ee.getAttribute(s+"-opacity")),isNaN(a)&&(a=1);var d="fill"===s?"black":"none";r=ee.getAttribute(s)||d}e&&(n.setColor(s,r,!0),n.setPaintOpacity(s,a,!0)),a*=100;var h=$e(r,a,s);this.setPaint(h)}},this.prep=function(){var t=this.paint.type;switch(t){case"linearGradient":case"radialGradient":var r=new e.jGraduate.Paint({copy:this.paint});n.setPaint(i,r)}}};Q.fill=new ci("#fill_color","fill"),Q.stroke=new ci("#stroke_color","stroke"),e("#stroke_width").val(h.initStroke.width),e("#group_opacity").val(100*h.initOpacity);var di=Q.fill.rect.cloneNode(!1);di.setAttribute("style","vector-effect:non-scaling-stroke"),I="non-scaling-stroke"===di.style.vectorEffect,di.removeAttribute("style");var hi=Q.fill.rect.ownerDocument,pi=hi.createElementNS(svgedit.NS.SVG,"feGaussianBlur");void 0===pi.stdDeviationX&&e("#tool_blur").hide(),e(pi).remove(),function(){var e="-"+je.toLowerCase()+"-zoom-",t=e+"in";$.css("cursor",t),$.css("cursor")===t&&(q=t,W=e+"out"),$.css("cursor","auto")}(),setTimeout(function(){n.embedImage("images/logo.png",function(t){t||(e("#image_save_opts [value=embed]").attr("disabled","disabled"),e("#image_save_opts input").val(["ref"]),e.pref("img_save","ref"),e("#image_opt_embed").css("color","#666").attr("title",g.notification.featNotSupported))})},1e3),e("#fill_color, #tool_fill .icon_label").click(function(){ui(e("#fill_color")),_e()}),e("#stroke_color, #tool_stroke .icon_label").click(function(){ui(e("#stroke_color")),_e()}),e("#group_opacityLabel").click(function(){e("#opacity_dropdown button").mousedown(),e(window).mouseup()}),e("#zoomLabel").click(function(){e("#zoom_dropdown button").mousedown(),e(window).mouseup()}),e("#tool_move_top").mousedown(function(t){e("#tools_stacking").show(),t.preventDefault()}),e(".layer_button").mousedown(function(){e(this).addClass("layer_buttonpressed")}).mouseout(function(){e(this).removeClass("layer_buttonpressed")}).mouseup(function(){e(this).removeClass("layer_buttonpressed")}),e(".push_button").mousedown(function(){e(this).hasClass("disabled")||e(this).addClass("push_button_pressed").removeClass("push_button")}).mouseout(function(){e(this).removeClass("push_button_pressed").addClass("push_button")}).mouseup(function(){e(this).removeClass("push_button_pressed").addClass("push_button")}),e("#layer_new").click(function(){var t,i=n.getCurrentDrawing().getNumLayers();do t=g.layers.layer+" "+ ++i;while(n.getCurrentDrawing().hasLayer(t));e.prompt(g.notification.enterUniqueLayerName,t,function(t){if(t){if(n.getCurrentDrawing().hasLayer(t))return void e.alert(g.notification.dupeLayerName);n.createLayer(t),Se(),ue()}})}),e("#layer_delete").click(_),e("#layer_up").click(function(){w(-1)}),e("#layer_down").click(function(){w(1)}),e("#layer_rename").click(function(){var t=e("#layerlist tr.layersel td.layername").text();e.prompt(g.notification.enterNewLayerName,"",function(i){if(i){if(t==i||n.getCurrentDrawing().hasLayer(i))return void e.alert(g.notification.layerHasThatName);n.renameCurrentLayer(i),ue()}})});var fi=300,gi=150,mi=-1,vi=!1,yi=!1,bi=function(t){var i=e("#ruler_x");e("#sidepanels").width("+="+t),e("#layerpanel").width("+="+t),i.css("right",parseInt(i.css("right"),10)+t),$.css("right",parseInt($.css("right"),10)+t),n.runExtensions("workareaResized")},_i=function(t){if(yi&&-1!=mi){vi=!0;var i=mi-t.pageX,n=e("#sidepanels").width();n+i>fi?(i=fi-n,n=fi):2>n+i&&(i=2-n,n=2),0!=i&&(mi-=i,bi(i))}},xi=function(t){var i=e("#sidepanels").width(),n=(i>2||t?2:gi)-i;bi(n)};e("#sidepanel_handle").mousedown(function(t){mi=t.pageX,e(window).mousemove(_i),yi=!1,setTimeout(function(){yi=!0},20)}).mouseup(function(e){vi||xi(),mi=-1,vi=!1}),e(window).mouseup(function(){mi=-1,vi=!1,e("#svg_editor").unbind("mousemove",_i)}),ue();var Si=function(){$.css("line-height",$.height()+"px")};e(window).bind("load resize",Si),e("#resolution").change(function(){var t=e("#canvas_width,#canvas_height");if(this.selectedIndex)if("content"==this.value)t.val("fit").attr("disabled","disabled");else{var i=this.value.split("x");e("#canvas_width").val(i[0]),e("#canvas_height").val(i[1]),t.removeAttr("disabled")}else"fit"==e("#canvas_width").val()&&t.removeAttr("disabled").val(100)}),e("input,select").attr("autocomplete","off"),O=function(){var t=[{sel:"#tool_select",fn:me,evt:"click",key:["V",!0]},{sel:"#tool_fhpath",fn:it,evt:"click",key:["Q",!0]},{sel:"#tool_line",fn:nt,evt:"click",key:["L",!0]},{sel:"#tool_rect",fn:at,evt:"mouseup",key:["R",!0],parent:"#tools_rect",icon:"rect"},{sel:"#tool_square",fn:rt,evt:"mouseup",parent:"#tools_rect",icon:"square"},{sel:"#tool_fhrect",fn:st,evt:"mouseup",parent:"#tools_rect",icon:"fh_rect"},{sel:"#tool_ellipse",fn:lt,evt:"mouseup",key:["E",!0],parent:"#tools_ellipse",icon:"ellipse"},{sel:"#tool_circle",fn:ot,evt:"mouseup",parent:"#tools_ellipse",icon:"circle"},{sel:"#tool_fhellipse",fn:ut,evt:"mouseup",parent:"#tools_ellipse",icon:"fh_ellipse"},{sel:"#tool_path",fn:gt,evt:"click",key:["P",!0]},{sel:"#tool_text",fn:ft,evt:"click",key:["T",!0]},{sel:"#tool_image",fn:ct,evt:"mouseup"},{sel:"#tool_zoom",fn:dt,evt:"mouseup",key:["Z",!0]},{sel:"#tool_clear",fn:Vt,evt:"mouseup",key:["N",!0]},{sel:"#tool_save",fn:function(){ie?Kt():Rt()},evt:"mouseup",key:["S",!0]},{sel:"#tool_export",fn:Bt,evt:"mouseup"},{sel:"#tool_open",fn:Dt,evt:"mouseup",key:["O",!0]},{sel:"#tool_import",fn:Ft,evt:"mouseup"},{sel:"#tool_source",fn:ce,evt:"click",key:["U",!0]},{sel:"#tool_wireframe",fn:Wt,evt:"click",key:["F",!0]},{sel:"#tool_source_cancel,.overlay,#tool_docprops_cancel,#tool_prefs_cancel",fn:ni,evt:"click",key:["esc",!1,!1],hidekey:!0},{sel:"#tool_source_save",fn:Kt,evt:"click"},{sel:"#tool_docprops_save",fn:ei,evt:"click"},{sel:"#tool_docprops",fn:Xt,evt:"mouseup"},{sel:"#tool_prefs_save",fn:ti,evt:"click"},{sel:"#tool_prefs_option",fn:function(){return Yt(),!1},evt:"mouseup"},{sel:"#tool_delete,#tool_delete_multi",fn:mt,evt:"click",key:["del/backspace",!0]},{sel:"#tool_reorient",fn:Ct,evt:"click"},{sel:"#tool_node_link",fn:Pt,evt:"click"},{sel:"#tool_node_clone",fn:Tt,evt:"click"},{sel:"#tool_node_delete",fn:Et,evt:"click"},{sel:"#tool_openclose_path",fn:Nt,evt:"click"},{sel:"#tool_add_subpath",fn:Gt,evt:"click"},{sel:"#tool_move_top",fn:_t,evt:"click",key:"ctrl+shift+]"},{sel:"#tool_move_bottom",fn:xt,evt:"click",key:"ctrl+shift+["},{sel:"#tool_topath",fn:wt,evt:"click"},{sel:"#tool_make_link,#tool_make_link_multi",fn:kt,evt:"click"},{sel:"#tool_undo",fn:Ht,evt:"click",key:["Z",!0]},{sel:"#tool_redo",fn:$t,evt:"click",key:["Y",!0]},{sel:"#tool_clone,#tool_clone_multi",fn:zt,evt:"click",key:["D",!0]},{sel:"#tool_group_elements",fn:Ut,evt:"click",key:["G",!0]},{sel:"#tool_ungroup",fn:Ut,evt:"click"},{sel:"#tool_unlink_use",fn:Ut,evt:"click"},{sel:"[id^=tool_align]",fn:qt,evt:"click"},{sel:"#tool_bold",fn:Ot,evt:"mousedown"},{sel:"#tool_italic",fn:jt,evt:"mousedown"},{sel:"#sidepanel_handle",fn:xi,key:["X"]},{sel:"#copy_save_done",fn:ni,evt:"click"},{key:"ctrl+left",fn:function(){Mt(0,1)}},{key:"ctrl+right",fn:function(){Mt(1,1)}},{key:"ctrl+shift+left",fn:function(){Mt(0,5)}},{key:"ctrl+shift+right",fn:function(){Mt(1,5)}},{key:"shift+O",fn:It},{key:"shift+P",fn:Lt},{key:[B+"up",!0],fn:function(){ht(2)}},{key:[B+"down",!0],fn:function(){ht(.5)}},{key:[B+"]",!0],fn:function(){St("Up")}},{key:[B+"[",!0],fn:function(){St("Down")}},{key:["up",!0],fn:function(){At(0,-1)}},{key:["down",!0],fn:function(){At(0,1)}},{key:["left",!0],fn:function(){At(-1,0)}},{key:["right",!0],fn:function(){At(1,0)}},{key:"shift+up",fn:function(){At(0,-10)}},{key:"shift+down",fn:function(){At(0,10)}},{key:"shift+left",fn:function(){At(-10,0)}},{key:"shift+right",fn:function(){At(10,0)}},{key:["alt+up",!0],fn:function(){n.cloneSelectedElements(0,-1)}},{key:["alt+down",!0],fn:function(){n.cloneSelectedElements(0,1)}},{key:["alt+left",!0],fn:function(){n.cloneSelectedElements(-1,0)}},{key:["alt+right",!0],fn:function(){n.cloneSelectedElements(1,0)}},{key:["alt+shift+up",!0],fn:function(){n.cloneSelectedElements(0,-10)}},{key:["alt+shift+down",!0],fn:function(){n.cloneSelectedElements(0,10)}},{key:["alt+shift+left",!0],fn:function(){n.cloneSelectedElements(-10,0)}},{key:["alt+shift+right",!0],fn:function(){n.cloneSelectedElements(10,0)}},{key:"A",fn:function(){n.selectAllInCurrentLayer()}},{key:B+"z",fn:Ht},{key:B+"shift+z",fn:$t},{key:B+"y",fn:$t},{key:B+"x",fn:vt},{key:B+"c",fn:yt},{key:B+"v",fn:bt}],i={"4/Shift+4":"#tools_rect_show","5/Shift+5":"#tools_ellipse_show"};return{setAll:function(){var n={};e.each(t,function(t,r){var a;if(r.sel){if(a=e(r.sel),0==a.length)return!0;if(r.evt&&(svgedit.browser.isTouch()&&"click"===r.evt&&(r.evt="mousedown"),a[r.evt](r.fn)),r.parent&&0!=e(r.parent+"_show").length){var s=e(r.parent);s.length||(s=Oe(r.parent.substr(1))),s.append(a),e.isArray(n[r.parent])||(n[r.parent]=[]),n[r.parent].push(r)}}if(r.key){var o,l=!0,u=r.fn,c=!1;if(e.isArray(r.key)?(o=r.key[0],r.key.length>1&&(c=r.key[1]),r.key.length>2&&(l=r.key[2])):o=r.key,o+="",e.each(o.split("/"),function(t,i){e(document).bind("keydown",i,function(e){return u(),c&&e.preventDefault(),!1})}),r.sel&&!r.hidekey&&a.attr("title")){var d=a.attr("title").split("[")[0]+" ("+o+")";i[o]=r.sel,a.parents("#main_menu").length||a.attr("title",d)}}}),Ve(n),e(".attr_changer, #image_url").bind("keydown","return",function(t){e(this).change(),t.preventDefault()}),e(window).bind("keydown","tab",function(e){"canvas"===X&&(e.preventDefault(),Lt())}).bind("keydown","shift+tab",function(e){"canvas"===X&&(e.preventDefault(),It())}),e("#tool_zoom").dblclick(pt)},setTitles:function(){e.each(i,function(t,i){var n=e(i).parents("#main_menu").length;e(i).each(function(){var i;i=n?e(this).text().split(" [")[0]:this.title.split(" [")[0];var r="";e.each(t.split("/"),function(e,t){var i=t.split("+"),n="";i.length>1&&(n=i[0]+"+",t=i[1]),r+=(e?"/":"")+n+(g["key_"+t]||t)}),n?this.lastChild.textContent=i+" ["+r+"]":this.title=i+" ["+r+"]"})})},getButtonData:function(i){var n;return e.each(t,function(e,t){t.sel===i&&(n=t)}),n}}}(),O.setAll(),i.ready(function(){var t,i=h.initTool,n=e("#tools_left, #svg_editor .tools_flyout"),r=n.find("#tool_"+i),a=n.find("#"+i);t=r.length?r:a.length?a:e("#tool_select"),t.click().mouseup(),h.wireframe&&e("#tool_wireframe").click(),h.showlayers&&xi(),e("#rulers").toggle(!!h.showRulers),h.showRulers&&(e("#show_rulers")[0].checked=!0),h.baseUnit&&e("#base_unit").val(h.baseUnit),h.gridSnapping&&(e("#grid_snapping_on")[0].checked=!0),h.snappingStep&&e("#grid_snapping_step").val(h.snappingStep),h.gridColor&&e("#grid_color").val(h.gridColor)}),e("#rect_rx").SpinButton({min:0,max:1e3,callback:Xe}),e("#stroke_width").SpinButton({min:0,max:99,smallStep:.1,callback:Qe}),e("#angle").SpinButton({min:-180,max:180,step:5,callback:Ke}),e("#font_size").SpinButton({min:.001,stepfunc:C,callback:Ye}),e("#group_opacity").SpinButton({min:0,max:100,step:5,callback:Ze}),e("#blur").SpinButton({min:0,max:10,step:.1,callback:Je}),e("#zoom").SpinButton({min:.001,max:1e4,step:50,stepfunc:k,callback:V}).val(100*n.getZoom()),e("#workarea").contextMenu({menu:"cmenu_canvas",inSpeed:0},function(e,t,i){switch(e){case"delete":mt();break;case"cut":vt();break;case"copy":yt();break;case"paste":n.pasteElements();break;case"paste_in_place":n.pasteElements("in_place");break;case"group":case"group_elements":n.groupSelectedElements();break;case"ungroup":n.ungroupSelectedElement();break;case"move_front":_t();break;case"move_up":St("Up");break;case"move_down":St("Down");break;case"move_back":xt();break;default:svgedit.contextmenu&&svgedit.contextmenu.hasCustomHandler(e)&&svgedit.contextmenu.getCustomHandler(e).call()}n.clipBoard.length&&U.enableContextMenuItems("#paste,#paste_in_place")});var wi=function(e,t,i){switch(e){case"dupe":x();break;case"delete":_();break;case"merge_down":S();break;case"merge_all":n.mergeAllLayers(),Se(),ue()}};if(e("#layerlist").contextMenu({menu:"cmenu_layers",inSpeed:0},wi),e("#layer_moreopts").contextMenu({menu:"cmenu_layers",inSpeed:0,allowLeft:!0},wi),e(".contextMenu li").mousedown(function(e){e.preventDefault()}),e("#cmenu_canvas li").disableContextMenu(),U.enableContextMenuItems("#delete,#cut,#copy"),window.addEventListener("beforeunload",function(e){return 0===F.getUndoStackSize()&&(i.showSaveWarning=!1),!h.no_save_warning&&i.showSaveWarning?(e.returnValue=g.notification.unsavedChanges,g.notification.unsavedChanges):void 0},!1),i.openPrep=function(t){e("#main_menu").hide(),0===F.getUndoStackSize()?t(!0):e.confirm(g.notification.QwantToOpen,t)},window.FileReader){var Ci=function(t){e.process_cancel(g.notification.loadingImage),t.stopPropagation(),t.preventDefault(),e("#workarea").removeAttr("style"),e("#main_menu").hide();var i="drop"==t.type?t.dataTransfer.files[0]:this.files[0];if(!i)return void e("#dialog_box").hide();if(-1!=i.type.indexOf("image")){var r;-1!=i.type.indexOf("svg")?(r=new FileReader,r.onloadend=function(t){n.importSvgString(t.target.result,!0),n.ungroupSelectedElement(),n.ungroupSelectedElement(),n.groupSelectedElements(),n.alignSelectedElements("m","page"),n.alignSelectedElements("c","page"),e("#dialog_box").hide()},r.readAsText(i)):(r=new FileReader,r.onloadend=function(t){var i=function(i,r){var a=n.addSvgElementFromJson({element:"image",attr:{x:0,y:0,width:i,height:r,id:n.getNextId(),style:"pointer-events:inherit"}});n.setHref(a,t.target.result),n.selectOnly([a]),n.alignSelectedElements("m","page"),n.alignSelectedElements("c","page"),Se(),e("#dialog_box").hide()},r=100,a=100,s=new Image;s.src=t.target.result,s.style.opacity=0,s.onload=function(){r=s.offsetWidth,a=s.offsetHeight,i(r,a)}},r.readAsDataURL(i))}};$[0].addEventListener("dragenter",A,!1),$[0].addEventListener("dragover",P,!1),$[0].addEventListener("dragleave",T,!1),$[0].addEventListener("drop",Ci,!1);var ki=e('<input type="file">').change(function(){var r=this;i.openPrep(function(i){if(i&&(n.clear(),1===r.files.length)){e.process_cancel(g.notification.loadingImage);var a=new FileReader;a.onloadend=function(e){t(e.target.result),be()},a.readAsText(r.files[0])}})});e("#tool_open").show().prepend(ki);var Ai=e('<input type="file">').change(Ci);e("#tool_import").show().prepend(Ai)}be(!0),e(function(){window.svgCanvas=n,n.ready=i.ready}),i.setLang=function(t,r){if(i.langChanged=!0,e.pref("lang",t),e("#lang_select").val(t),r){var a=e("#layerlist tr.layersel td.layername").text(),s=a==g.common.layer+" 1";if(e.extend(g,r),n.setUiStrings(r),O.setTitles(),s&&(n.renameCurrentLayer(g.common.layer+" 1"),ue()),Fe.length)for(;Fe.length;){var o=Fe.shift();o.langReady({lang:t,uiStrings:g})}else n.runExtensions("langReady",{lang:t,uiStrings:g});n.runExtensions("langChanged",t),Ie();var l={"#stroke_color":"#tool_stroke .icon_label, #tool_stroke .color_block","#fill_color":"#tool_fill label, #tool_fill .color_block","#linejoin_miter":"#cur_linejoin","#linecap_butt":"#cur_linecap"};e.each(l,function(t,i){e(i).attr("title",e(t)[0].title)}),e("#multiselected_panel div[id^=tool_align]").each(function(){e("#tool_pos"+this.id.substr(10))[0].title=this.title})}}},i.ready=function(e){s?e():u.push(e)},i.runCallbacks=function(){e.each(u,function(){this()}),s=!0},i.loadFromString=function(e){i.ready(function(){t(e)})},i.disableUI=function(e){},i.loadFromURL=function(n,r){r||(r={});var a=r.cache,s=r.callback;i.ready(function(){e.ajax({url:n,dataType:"text",cache:!!a,beforeSend:function(){e.process_cancel(g.notification.loadingImage)},success:function(e){t(e,s)},error:function(i,n,r){404!=i.status&&i.responseText?t(i.responseText,s):e.alert(g.notification.URLloadFail+": \n"+r,s)},complete:function(){e("#dialog_box").hide()}})})},i.loadFromDataURI=function(e){i.ready(function(){var i=!1,n=e.match(/^data:image\/svg\+xml;base64,/);n?i=!0:n=e.match(/^data:image\/svg\+xml(?:;(?:utf8)?)?,/),n&&(n=n[0]);var r=e.slice(n.length);t(i?a.decode64(r):decodeURIComponent(r))})},i.addExtension=function(){var t=arguments;e(function(){n&&n.addExtension.apply(this,t)})},i}(jQuery))}();var svgEditor=function(e,t){"use strict";function i(t,i,n){var r,a,s,o,l,u,c=e("#svg_editor").parent();for(a in i)if(s=i[a],s||console.log(a),n&&(a="#"+a),o=c.find(a),o.length)switch(l=c.find(a)[0],t){case"content":for(r=0;r<l.childNodes.length;r++)if(u=l.childNodes[r],3===u.nodeType&&u.textContent.replace(/\s/g,"")){u.textContent=s;break}break;case"title":l.title=s}else console.log("Missing: "+a)}var n;return t.readLang=function(r){var a=t.canvas.runExtensions("addlangData",n,!0);if(e.each(a,function(t,i){i.data&&(r=e.merge(r,i.data))}),r.tools){var s=r.tools,o=(r.misc,r.properties),l=r.config,u=r.layers,c=r.common,d=r.ui;i("content",{curve_segments:o.curve_segments,fitToContent:s.fitToContent,fit_to_all:s.fit_to_all,fit_to_canvas:s.fit_to_canvas,fit_to_layer_content:s.fit_to_layer_content,fit_to_sel:s.fit_to_sel,icon_large:l.icon_large,icon_medium:l.icon_medium,icon_small:l.icon_small,icon_xlarge:l.icon_xlarge,image_opt_embed:l.image_opt_embed,image_opt_ref:l.image_opt_ref,includedImages:l.included_images,largest_object:s.largest_object,layersLabel:u.layers,page:s.page,relativeToLabel:s.relativeTo,selLayerLabel:u.move_elems_to,selectedPredefined:l.select_predefined,selected_objects:s.selected_objects,smallest_object:s.smallest_object,straight_segments:o.straight_segments,svginfo_bg_url:l.editor_img_url+":",svginfo_bg_note:l.editor_bg_note,svginfo_change_background:l.background,svginfo_dim:l.doc_dims,svginfo_editor_prefs:l.editor_prefs,svginfo_height:c.height,svginfo_icons:l.icon_size,svginfo_image_props:l.image_props,svginfo_lang:l.language,svginfo_title:l.doc_title,svginfo_width:c.width,tool_docprops_cancel:c.cancel,tool_docprops_save:c.ok,tool_source_cancel:c.cancel,tool_source_save:c.ok,tool_prefs_cancel:c.cancel,tool_prefs_save:c.ok,sidepanel_handle:u.layers.split("").join(" "),tool_clear:s.new_doc,tool_docprops:s.docprops,tool_export:s.export_img,tool_import:s.import_doc,tool_imagelib:s.imagelib,tool_open:s.open_doc,tool_save:s.save_doc,svginfo_units_rulers:l.units_and_rulers,svginfo_rulers_onoff:l.show_rulers,svginfo_unit:l.base_unit,svginfo_grid_settings:l.grid,svginfo_snap_onoff:l.snapping_onoff,svginfo_snap_step:l.snapping_stepsize,svginfo_grid_color:l.grid_color},!0);var h,p={};for(h in r.shape_cats)p['#shape_cats [data-cat="'+h+'"]']=r.shape_cats[h];setTimeout(function(){i("content",p)},2e3);var f={};e.each(["cut","copy","paste","paste_in_place","delete","group","ungroup","move_front","move_up","move_down","move_back"],function(){f['#cmenu_canvas a[href="#'+this+'"]']=s[this]}),e.each(["dupe","merge_down","merge_all"],function(){f['#cmenu_layers a[href="#'+this+'"]']=u[this]}),f['#cmenu_layers a[href="#delete"]']=u.del,i("content",f),i("title",{align_relative_to:s.align_relative_to,circle_cx:o.circle_cx,circle_cy:o.circle_cy,circle_r:o.circle_r,cornerRadiusLabel:o.corner_radius,ellipse_cx:o.ellipse_cx,ellipse_cy:o.ellipse_cy,ellipse_rx:o.ellipse_rx,ellipse_ry:o.ellipse_ry,fill_color:o.fill_color,font_family:o.font_family,idLabel:o.id,image_height:o.image_height,image_url:o.image_url,image_width:o.image_width,layer_delete:u.del,layer_down:u.move_down,layer_new:u["new"],layer_rename:u.rename,layer_moreopts:c.more_opts,layer_up:u.move_up,line_x1:o.line_x1,line_x2:o.line_x2,line_y1:o.line_y1,line_y2:o.line_y2,linecap_butt:o.linecap_butt,linecap_round:o.linecap_round,linecap_square:o.linecap_square,linejoin_bevel:o.linejoin_bevel,linejoin_miter:o.linejoin_miter,linejoin_round:o.linejoin_round,main_icon:s.main_menu,mode_connect:s.mode_connect,tools_shapelib_show:s.mode_shapelib,palette:d.palette_info,zoom_panel:d.zoom_level,path_node_x:o.node_x,path_node_y:o.node_y,rect_height_tool:o.rect_height,rect_width_tool:o.rect_width,seg_type:o.seg_type,selLayerNames:u.move_selected,selected_x:o.pos_x,selected_y:o.pos_y,stroke_color:o.stroke_color,stroke_style:o.stroke_style,stroke_width:o.stroke_width,svginfo_title:l.doc_title,text:o.text_contents,toggle_stroke_tools:d.toggle_stroke_tools,tool_add_subpath:s.add_subpath,tool_alignbottom:s.align_bottom,tool_aligncenter:s.align_center,tool_alignleft:s.align_left,tool_alignmiddle:s.align_middle,tool_alignright:s.align_right,tool_aligntop:s.align_top,tool_angle:o.angle,tool_blur:o.blur,tool_bold:o.bold,tool_circle:s.mode_circle,tool_clone:s.clone,tool_clone_multi:s.clone,tool_delete:s.del,tool_delete_multi:s.del,tool_ellipse:s.mode_ellipse,tool_eyedropper:s.mode_eyedropper,tool_fhellipse:s.mode_fhellipse,tool_fhpath:s.mode_fhpath,tool_fhrect:s.mode_fhrect,tool_font_size:o.font_size,tool_group_elements:s.group_elements,tool_make_link:s.make_link,tool_link_url:s.set_link_url,tool_image:s.mode_image,tool_italic:o.italic,tool_line:s.mode_line,tool_move_bottom:s.move_bottom,tool_move_top:s.move_top,tool_node_clone:s.node_clone,tool_node_delete:s.node_delete,tool_node_link:s.node_link,tool_opacity:o.opacity,tool_openclose_path:s.openclose_path,tool_path:s.mode_path,tool_position:s.align_to_page,tool_rect:s.mode_rect,tool_redo:s.redo,tool_reorient:s.reorient_path,tool_select:s.mode_select,tool_source:s.source_save,tool_square:s.mode_square,tool_text:s.mode_text,tool_topath:s.to_path,tool_undo:s.undo,tool_ungroup:s.ungroup,tool_wireframe:s.wireframe_mode,view_grid:s.toggle_grid,tool_zoom:s.mode_zoom,url_notice:s.no_embed},!0),t.setLang(n,r)}},t.putLocale=function(i,r){if(i)n=i;else{if(n=e.pref("lang"),!n&&(navigator.userLanguage?n=navigator.userLanguage:navigator.language&&(n=navigator.language),null==n))return;console.log("Lang: "+n),-1===e.inArray(n,r)&&"test"!==n&&(n="en")}var a=t.curConfig,s=a.langPath+"lang."+n+".js";e.getScript(s,function(e){if(!e){var t=document.createElement("script");t.src=s,document.querySelector("head").appendChild(t)}})},t}(jQuery,svgEditor),svgedit=svgedit||{};!function(){var e=this;svgedit.contextmenu||(svgedit.contextmenu={}),e.contextMenuExtensions={};var t=function(e){return e&&e.id&&e.label&&e.action&&"function"==typeof e.action},i=function(i){return t(i)?i.id in e.contextMenuExtensions?void console.error('Cannot add extension "'+i.id+'", an extension by that name already exists"'):(console.log("Registed contextmenu item: {id:"+i.id+", label:"+i.label+"}"),void(e.contextMenuExtensions[i.id]=i)):void console.error("Menu items must be defined and have at least properties: id, label, action, where action must be a function")},n=function(t){return e.contextMenuExtensions[t]&&!0},r=function(t){return e.contextMenuExtensions[t].action},a=function(t){0===Object.keys(e.contextMenuExtensions).length&&$("#cmenu_canvas").append("<li class='separator'>");var i=t.shortcut||"";$("#cmenu_canvas").append("<li class='disabled'><a href='#"+t.id+"'>"+t.label+"<span class='shortcut'>"+i+"</span></a></li>")};svgEditor.ready(function(){var e;for(e in contextMenuExtensions)a(contextMenuExtensions[e])}),svgedit.contextmenu.resetCustomMenus=function(){e.contextMenuExtensions={}},svgedit.contextmenu.add=i,svgedit.contextmenu.hasCustomHandler=n,svgedit.contextmenu.getCustomHandler=r}(),function(e,t){function i(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}function n(t,n){var r=t.nodeName.toLowerCase();if("area"===r){var a,s=t.parentNode,o=s.name;return t.href&&o&&"map"===s.nodeName.toLowerCase()?(a=e("img[usemap=#"+o+"]")[0],!!a&&i(a)):!1}return(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"==r?t.href||n:n)&&i(t)}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,r,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(a.css("zIndex"),10),!isNaN(r)&&0!==r))return r;a=a.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(i,n){function r(t,i,n,r){return e.each(a,function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,n&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),r&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?o["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r=e.ui[t].prototype;for(var a in n)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([i,n[a]])},call:function(e,t,i){var n=e.plugins[t];if(n&&e.element[0].parentNode)for(var r=0;r<n.length;r++)e.options[n[r][0]]&&n[r][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0?!0:(t[n]=1,r=t[n]>0,t[n]=0,r)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,r,a,s){return e.ui.isOverAxis(t,n,a)&&e.ui.isOverAxis(i,r,s)}}))}(jQuery),function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var n,r=0;null!=(n=t[r]);r++)try{e(n).triggerHandler("remove")}catch(a){}i(t)}}else{var n=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),n.call(e(this),t,i)})}}e.widget=function(t,i,n){var r,a=t.split(".")[0];t=t.split(".")[1],r=a+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r]=function(i){return!!e.data(i,t)},e[a]=e[a]||{},e[a][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var s=new i;s.options=e.extend(!0,{},s.options),e[a][t].prototype=e.extend(!0,s,{namespace:a,widgetName:t,widgetEventPrefix:e[a][t].prototype.widgetEventPrefix||t,
widgetBaseClass:r},n),e.widget.bridge(t,e[a][t])},e.widget.bridge=function(i,n){e.fn[i]=function(r){var a="string"==typeof r,s=Array.prototype.slice.call(arguments,1),o=this;return r=!a&&s.length?e.extend.apply(null,[!0,r].concat(s)):r,a&&"_"===r.charAt(0)?o:(a?this.each(function(){var n=e.data(this,i),a=n&&e.isFunction(n[r])?n[r].apply(n,s):n;return a!==n&&a!==t?(o=a,!1):void 0}):this.each(function(){var t=e.data(this,i);t?t.option(r||{})._init():e.data(this,i,new n(r,this))}),o)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,n){var r=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(n===t)return this.options[i];r={},r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,n){var r,a,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent,a)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(e,t){var i=!1;e(document).mouseup(function(e){i=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1==t.which,a="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return r&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(i.iframeFix&&e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;if(e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var n=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]!=this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))&&n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;var r=(i.offset(),"hidden"!=e(n).css("overflow"));this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName),a=t.pageX,s=t.pageY;if(this.originalPosition){var o;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();o=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else o=this.containment;t.pageX-this.offset.click.left<o[0]&&(a=o[0]+this.offset.click.left),t.pageY-this.offset.click.top<o[1]&&(s=o[1]+this.offset.click.top),t.pageX-this.offset.click.left>o[2]&&(a=o[2]+this.offset.click.left),t.pageY-this.offset.click.top>o[3]&&(s=o[3]+this.offset.click.top)}if(i.grid){var u=i.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;s=o&&(u-this.offset.click.top<o[1]||u-this.offset.click.top>o[3])?u-this.offset.click.top<o[1]?u+i.grid[1]:u-i.grid[1]:u;var c=i.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;a=o&&(c-this.offset.click.left<o[0]||c-this.offset.click.left>o[2])?c-this.offset.click.left<o[0]?c+i.grid[0]:c-i.grid[0]:c}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.17"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),r=n.options,a=e.extend({},i,{item:n.element});n.sortables=[],e(r.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var n=e(this).data("draggable"),r=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,i){var n=e(this).data("draggable"),r=this;e.each(n.sortables,function(a){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i){var n=e("body"),r=e(this).data("draggable").options;n.css("cursor")&&(r._cursor=n.css("cursor")),n.css("cursor",r.cursor)},stop:function(t,i){var n=e(this).data("draggable").options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),r=e(this).data("draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,i){var n=e(this).data("draggable");n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(t,i){var n=e(this).data("draggable"),r=n.options,a=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(r.axis&&"x"==r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"==r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"==r.axis||(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"==r.axis||(t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i){var n=e(this).data("draggable"),r=n.options;n.snapElements=[],e(r.snap.constructor!=String?r.snap.items||":data(draggable)":r.snap).each(function(){var t=e(this),i=t.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),r=n.options,a=r.snapTolerance,s=i.offset.left,o=s+n.helperProportions.width,l=i.offset.top,u=l+n.helperProportions.height,c=n.snapElements.length-1;c>=0;c--){var d=n.snapElements[c].left,h=d+n.snapElements[c].width,p=n.snapElements[c].top,f=p+n.snapElements[c].height;if(s>d-a&&h+a>s&&l>p-a&&f+a>l||s>d-a&&h+a>s&&u>p-a&&f+a>u||o>d-a&&h+a>o&&l>p-a&&f+a>l||o>d-a&&h+a>o&&u>p-a&&f+a>u){if("inner"!=r.snapMode){var g=Math.abs(p-u)<=a,m=Math.abs(f-l)<=a,v=Math.abs(d-o)<=a,y=Math.abs(h-s)<=a;g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left)}var b=g||m||v||y;if("outer"!=r.snapMode){var g=Math.abs(p-l)<=a,m=Math.abs(f-u)<=a,v=Math.abs(d-s)<=a,y=Math.abs(h-o)<=a;g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[c].snapping&&(g||m||v||y||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=g||m||v||y||b}else n.snapElements[c].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(t,i){var n=e(this).data("draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(r.length){var a=parseInt(r[0].style.zIndex)||0;e(r).each(function(e){this.style.zIndex=a+e}),this[0].style.zIndex=a+r.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),r=e(this).data("draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,n=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=n.values&&n.values.length||1,o=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(n.range===!0&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:"")));for(var l=r.length;s>l;l+=1)o.push(a);this.handles=r.add(e(o.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var r,a,s,o,l=!0,u=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(l=!1,!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),r=t._start(n,u),r===!1))return}switch(o=t.options.step,a=s=t.options.values&&t.options.values.length?t.values(u):t.value(),n.keyCode){case e.ui.keyCode.HOME:s=t._valueMin();break;case e.ui.keyCode.END:s=t._valueMax();break;case e.ui.keyCode.PAGE_UP:s=t._trimAlignValue(a+(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:s=t._trimAlignValue(a-(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(a===t._valueMax())return;s=t._trimAlignValue(a+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(a===t._valueMin())return;s=t._trimAlignValue(a-o)}return t._slide(n,u,s),l}}).keyup(function(i){var n=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(i,n),t._change(i,n),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,n,r,a,s,o,l,u,c,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,s=this,this.handles.each(function(t){var i=Math.abs(n-s.values(t));r>i&&(r=i,a=e(this),o=t)}),d.range===!0&&this.values(1)===d.min&&(o+=1,a=e(this.handles[o])),l=this._start(t,o),l===!1?!1:(this._mouseSliding=!0,s._handleIndex=o,a.addClass("ui-state-active").focus(),u=a.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-u.left-a.width()/2,top:t.pageY-u.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),a=this._valueMin()+n*r,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,r,a;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(r=this.values(),r[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r}),n=this.values(t?0:1),a!==!1&&this.values(t,i,!0))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,r,a;if(arguments.length>1)this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t);else{if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,r=arguments[0],a=0;a<n.length;a+=1)n[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()}},_setOption:function(t,i){var n,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;r>n;n+=1)this._change(null,n);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,r,a,s=this.options.range,o=this.options,l=this,u=this._animateOff?!1:o.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n,r){t=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[u?"animate":"css"](c,o.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},o.animate),1===n&&l.range[u?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:o.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},o.animate),1===n&&l.range[u?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:o.animate}))),i=t}):(n=this.value(),
r=this._valueMin(),a=this._valueMax(),t=a!==r?(n-r)/(a-r)*100:0,c["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](c,o.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},o.animate),"max"===s&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:o.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},o.animate),"max"===s&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:o.animate}))}}),e.extend(e.ui.slider,{version:"1.8.17"})}(jQuery),function(e,t){Math.precision=function(e,t){return void 0===t&&(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)};var n=function(t,i){var n,r,a=this,s=t.find("img:first"),o=0,l=100,u=100,c=0,d=100,h=100,p=0,f=0,g=new Array,m=function(e){for(var t=0;t<g.length;t++)g[t].call(a,a,e)},v=function(i){var s=t.offset();n={l:0|s.left,t:0|s.top},clearTimeout(r),r=setTimeout(function(){_.call(a,i)},0),e(document).bind("mousemove",y).bind("mouseup",b),i.preventDefault()},y=function(e){return clearTimeout(r),r=setTimeout(function(){_.call(a,e)},0),e.stopPropagation(),e.preventDefault(),!1},b=function(t){return e(document).unbind("mouseup",b).unbind("mousemove",y),t.stopPropagation(),t.preventDefault(),!1},_=function(e){var i=e.pageX-n.l,r=e.pageY-n.t,s=t.w,l=t.h;0>i?i=0:i>s&&(i=s),0>r?r=0:r>l&&(r=l),S.call(a,"xy",{x:i/s*u+o,y:r/l*h+c})},x=function(){var e=0,i=0,n=t.w,r=t.h,a=s.w,o=s.h;setTimeout(function(){u>0&&(e=p==l?n:p/u*n|0),h>0&&(i=f==d?r:f/h*r|0),a>=n?e=(n>>1)-(a>>1):e-=a>>1,o>=r?i=(r>>1)-(o>>1):i-=o>>1,s.css({left:e+"px",top:i+"px"})},0)},S=function(e,t,i){var n=void 0!==t;if(!n)switch((void 0===e||null==e)&&(e="xy"),e.toLowerCase()){case"x":return p;case"y":return f;case"xy":default:return{x:p,y:f}}if(null==i||i!=a){var r,s,u=!1;switch(null==e&&(e="xy"),e.toLowerCase()){case"x":r=t&&(t.x&&0|t.x||0|t)||0;break;case"y":s=t&&(t.y&&0|t.y||0|t)||0;break;case"xy":default:r=t&&t.x&&0|t.x||0,s=t&&t.y&&0|t.y||0}null!=r&&(o>r?r=o:r>l&&(r=l),p!=r&&(p=r,u=!0)),null!=s&&(c>s?s=c:s>d&&(s=d),f!=s&&(f=s,u=!0)),u&&m.call(a,i||a)}},w=function(e,t){var i=void 0!==t;if(!i)switch((void 0===e||null==e)&&(e="all"),e.toLowerCase()){case"minx":return o;case"maxx":return l;case"rangex":return{minX:o,maxX:l,rangeX:u};case"miny":return c;case"maxy":return d;case"rangey":return{minY:c,maxY:d,rangeY:h};case"all":default:return{minX:o,maxX:l,rangeX:u,minY:c,maxY:d,rangeY:h}}var n,r,a,s;switch(null==e&&(e="all"),e.toLowerCase()){case"minx":n=t&&(t.minX&&0|t.minX||0|t)||0;break;case"maxx":r=t&&(t.maxX&&0|t.maxX||0|t)||0;break;case"rangex":n=t&&t.minX&&0|t.minX||0,r=t&&t.maxX&&0|t.maxX||0;break;case"miny":a=t&&(t.minY&&0|t.minY||0|t)||0;break;case"maxy":s=t&&(t.maxY&&0|t.maxY||0|t)||0;break;case"rangey":a=t&&t.minY&&0|t.minY||0,s=t&&t.maxY&&0|t.maxY||0;break;case"all":default:n=t&&t.minX&&0|t.minX||0,r=t&&t.maxX&&0|t.maxX||0,a=t&&t.minY&&0|t.minY||0,s=t&&t.maxY&&0|t.maxY||0}null!=n&&o!=n&&(o=n,u=l-o),null!=r&&l!=r&&(l=r,u=l-o),null!=a&&c!=a&&(c=a,h=d-c),null!=s&&d!=s&&(d=s,h=d-c)},C=function(t){e.isFunction(t)&&g.push(t)},k=function(t){if(e.isFunction(t))for(var i;-1!=(i=e.inArray(t,g));)g.splice(i,1)},A=function(){e(document).unbind("mouseup",b).unbind("mousemove",y),t.unbind("mousedown",v),t=null,s=null,g=null};e.extend(!0,a,{val:S,range:w,bind:C,unbind:k,destroy:A}),s.src=i.arrow&&i.arrow.image,s.w=i.arrow&&i.arrow.width||s.width(),s.h=i.arrow&&i.arrow.height||s.height(),t.w=i.map&&i.map.width||t.width(),t.h=i.map&&i.map.height||t.height(),t.bind("mousedown",v),C.call(a,x)},r=function(t,i,n,r){var a=this,s=t.find("td.Text input"),o=s.eq(3),l=s.eq(4),u=s.eq(5),c=s.length>7?s.eq(6):null,d=s.eq(0),h=s.eq(1),p=s.eq(2),f=s.eq(s.length>7?7:6),g=s.length>7?s.eq(8):null,m=function(e){if(""!=e.target.value||e.target==f.get(0)||(null==n||e.target==n.get(0))&&null!=n){if(!b(e))return e;switch(e.target){case o.get(0):switch(e.keyCode){case 38:return o.val(_.call(a,(o.val()<<0)+1,0,255)),i.val("r",o.val(),e.target),!1;case 40:return o.val(_.call(a,(o.val()<<0)-1,0,255)),i.val("r",o.val(),e.target),!1}break;case l.get(0):switch(e.keyCode){case 38:return l.val(_.call(a,(l.val()<<0)+1,0,255)),i.val("g",l.val(),e.target),!1;case 40:return l.val(_.call(a,(l.val()<<0)-1,0,255)),i.val("g",l.val(),e.target),!1}break;case u.get(0):switch(e.keyCode){case 38:return u.val(_.call(a,(u.val()<<0)+1,0,255)),i.val("b",u.val(),e.target),!1;case 40:return u.val(_.call(a,(u.val()<<0)-1,0,255)),i.val("b",u.val(),e.target),!1}break;case c&&c.get(0):switch(e.keyCode){case 38:return c.val(_.call(a,parseFloat(c.val())+1,0,100)),i.val("a",Math.precision(255*c.val()/100,r),e.target),!1;case 40:return c.val(_.call(a,parseFloat(c.val())-1,0,100)),i.val("a",Math.precision(255*c.val()/100,r),e.target),!1}break;case d.get(0):switch(e.keyCode){case 38:return d.val(_.call(a,(d.val()<<0)+1,0,360)),i.val("h",d.val(),e.target),!1;case 40:return d.val(_.call(a,(d.val()<<0)-1,0,360)),i.val("h",d.val(),e.target),!1}break;case h.get(0):switch(e.keyCode){case 38:return h.val(_.call(a,(h.val()<<0)+1,0,100)),i.val("s",h.val(),e.target),!1;case 40:return h.val(_.call(a,(h.val()<<0)-1,0,100)),i.val("s",h.val(),e.target),!1}break;case p.get(0):switch(e.keyCode){case 38:return p.val(_.call(a,(p.val()<<0)+1,0,100)),i.val("v",p.val(),e.target),!1;case 40:return p.val(_.call(a,(p.val()<<0)-1,0,100)),i.val("v",p.val(),e.target),!1}}}},v=function(e){if(""!=e.target.value||e.target==f.get(0)||(null==n||e.target==n.get(0))&&null!=n){if(!b(e))return e;switch(e.target){case o.get(0):o.val(_.call(a,o.val(),0,255)),i.val("r",o.val(),e.target);break;case l.get(0):l.val(_.call(a,l.val(),0,255)),i.val("g",l.val(),e.target);break;case u.get(0):u.val(_.call(a,u.val(),0,255)),i.val("b",u.val(),e.target);break;case c&&c.get(0):c.val(_.call(a,c.val(),0,100)),i.val("a",Math.precision(255*c.val()/100,r),e.target);break;case d.get(0):d.val(_.call(a,d.val(),0,360)),i.val("h",d.val(),e.target);break;case h.get(0):h.val(_.call(a,h.val(),0,100)),i.val("s",h.val(),e.target);break;case p.get(0):p.val(_.call(a,p.val(),0,100)),i.val("v",p.val(),e.target);break;case f.get(0):f.val(f.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),n&&n.val(f.val()),i.val("hex",""!=f.val()?f.val():null,e.target);break;case n&&n.get(0):n.val(n.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),f.val(n.val()),i.val("hex",""!=n.val()?n.val():null,e.target);break;case g&&g.get(0):g.val(g.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,2)),i.val("a",null!=g.val()?parseInt(g.val(),16):null,e.target)}}},y=function(e){if(null!=i.val())switch(e.target){case o.get(0):o.val(i.val("r"));break;case l.get(0):l.val(i.val("g"));break;case u.get(0):u.val(i.val("b"));break;case c&&c.get(0):c.val(Math.precision(100*i.val("a")/255,r));break;case d.get(0):d.val(i.val("h"));break;case h.get(0):h.val(i.val("s"));break;case p.get(0):p.val(i.val("v"));break;case f.get(0):case n&&n.get(0):f.val(i.val("hex")),n&&n.val(i.val("hex"));break;case g&&g.get(0):g.val(i.val("ahex").substring(6))}},b=function(e){switch(e.keyCode){case 9:case 16:case 29:case 37:case 39:return!1;case"c".charCodeAt():case"v".charCodeAt():if(e.ctrlKey)return!1}return!0},_=function(e,t,i){return""==e||isNaN(e)?t:e>i?i:t>e?t:e},x=function(e,t){var i=e.val("all");t!=o.get(0)&&o.val(null!=i?i.r:""),t!=l.get(0)&&l.val(null!=i?i.g:""),t!=u.get(0)&&u.val(null!=i?i.b:""),c&&t!=c.get(0)&&c.val(null!=i?Math.precision(100*i.a/255,r):""),t!=d.get(0)&&d.val(null!=i?i.h:""),t!=h.get(0)&&h.val(null!=i?i.s:""),t!=p.get(0)&&p.val(null!=i?i.v:""),t!=f.get(0)&&(n&&t!=n.get(0)||!n)&&f.val(null!=i?i.hex:""),n&&t!=n.get(0)&&t!=f.get(0)&&n.val(null!=i?i.hex:""),g&&t!=g.get(0)&&g.val(null!=i?i.ahex.substring(6):"")},S=function(){o.add(l).add(u).add(c).add(d).add(h).add(p).add(f).add(n).add(g).unbind("keyup",v).unbind("blur",y),o.add(l).add(u).add(c).add(d).add(h).add(p).unbind("keydown",m),i.unbind(x),o=null,l=null,u=null,c=null,d=null,h=null,p=null,f=null,g=null};e.extend(!0,a,{destroy:S}),o.add(l).add(u).add(c).add(d).add(h).add(p).add(f).add(n).add(g).bind("keyup",v).bind("blur",y),o.add(l).add(u).add(c).add(d).add(h).add(p).bind("keydown",m),i.bind(x)};e.jPicker={List:[],Color:function(t){var i,n,r,a,s,l,u,c=this,d=new Array,h=function(e){for(var t=0;t<d.length;t++)d[t].call(c,c,e)},p=function(e,t,d){var f=Boolean(t);if(f&&""===t.ahex&&(t.ahex="00000000"),!f){if((void 0===e||null==e||""==e)&&(e="all"),null==i)return null;switch(e.toLowerCase()){case"ahex":return o.rgbaToHex({r:i,g:n,b:r,a:a});case"hex":return p("ahex").substring(0,6);case"all":return{r:i,g:n,b:r,a:a,h:s,s:l,v:u,hex:p.call(c,"hex"),ahex:p.call(c,"ahex")};default:for(var g={},m=0;m<e.length;m++)switch(e.charAt(m)){case"r":1==e.length?g=i:g.r=i;break;case"g":1==e.length?g=n:g.g=n;break;case"b":1==e.length?g=r:g.b=r;break;case"a":1==e.length?g=a:g.a=a;break;case"h":1==e.length?g=s:g.h=s;break;case"s":1==e.length?g=l:g.s=l;break;case"v":1==e.length?g=u:g.v=u}return g=={}?p.call(c,"all"):g}}if(null==d||d!=c){var v=!1;if(null==e&&(e=""),null==t)return null!=i&&(i=null,v=!0),null!=n&&(n=null,v=!0),null!=r&&(r=null,v=!0),null!=a&&(a=null,v=!0),null!=s&&(s=null,v=!0),null!=l&&(l=null,v=!0),null!=u&&(u=null,v=!0),void(v&&h.call(c,d||c));switch(e.toLowerCase()){case"ahex":case"hex":var g=o.hexToRgba(t&&(t.ahex||t.hex)||t||"none");p.call(c,"rgba",{r:g.r,g:g.g,b:g.b,a:"ahex"==e?g.a:null!=a?a:255},d);break;default:if(t&&(null!=t.ahex||null!=t.hex))return void p.call(c,"ahex",t.ahex||t.hex||"00000000",d);var y={},b=!1,_=!1;void 0!==t.r&&-1==!e.indexOf("r")&&(e+="r"),void 0!==t.g&&-1==!e.indexOf("g")&&(e+="g"),void 0!==t.b&&-1==!e.indexOf("b")&&(e+="b"),void 0!==t.a&&-1==!e.indexOf("a")&&(e+="a"),void 0!==t.h&&-1==!e.indexOf("h")&&(e+="h"),void 0!==t.s&&-1==!e.indexOf("s")&&(e+="s"),void 0!==t.v&&-1==!e.indexOf("v")&&(e+="v");for(var m=0;m<e.length;m++)switch(e.charAt(m)){case"r":if(_)continue;b=!0,y.r=t&&t.r&&0|t.r||t&&0|t||0,y.r<0?y.r=0:y.r>255&&(y.r=255),i!=y.r&&(i=y.r,v=!0);break;case"g":if(_)continue;b=!0,y.g=t&&t.g&&0|t.g||t&&0|t||0,y.g<0?y.g=0:y.g>255&&(y.g=255),n!=y.g&&(n=y.g,v=!0);break;case"b":if(_)continue;b=!0,y.b=t&&t.b&&0|t.b||t&&0|t||0,y.b<0?y.b=0:y.b>255&&(y.b=255),r!=y.b&&(r=y.b,v=!0);break;case"a":y.a=t&&null!=t.a?0|t.a:null!=t?0|t:255,y.a<0?y.a=0:y.a>255&&(y.a=255),a!=y.a&&(a=y.a,v=!0);break;case"h":if(b)continue;_=!0,y.h=t&&t.h&&0|t.h||t&&0|t||0,y.h<0?y.h=0:y.h>360&&(y.h=360),s!=y.h&&(s=y.h,v=!0);break;case"s":if(b)continue;_=!0,y.s=t&&null!=t.s?0|t.s:null!=t?0|t:100,y.s<0?y.s=0:y.s>100&&(y.s=100),l!=y.s&&(l=y.s,v=!0);break;case"v":if(b)continue;_=!0,y.v=t&&null!=t.v?0|t.v:null!=t?0|t:100,y.v<0?y.v=0:y.v>100&&(y.v=100),u!=y.v&&(u=y.v,v=!0)}if(v){if(b){i=i||0,n=n||0,r=r||0;var g=o.rgbToHsv({r:i,g:n,b:r});s=g.h,l=g.s,u=g.v}else if(_){s=s||0,l=null!=l?l:100,u=null!=u?u:100;var g=o.hsvToRgb({h:s,s:l,v:u});i=g.r,n=g.g,r=g.b}a=null!=a?a:255,h.call(c,d||c)}}}},f=function(t){e.isFunction(t)&&d.push(t)},g=function(t){if(e.isFunction(t))for(var i;-1!=(i=e.inArray(t,d));)d.splice(i,1)},m=function(){d=null};e.extend(!0,c,{val:p,bind:f,unbind:g,destroy:m}),t&&(null!=t.ahex?p("ahex",t):null!=t.hex?p((null!=t.a?"a":"")+"hex",null!=t.a?{ahex:t.hex+o.intToHex(t.a)}:t):null!=t.r&&null!=t.g&&null!=t.b?p("rgb"+(null!=t.a?"a":""),t):null!=t.h&&null!=t.s&&null!=t.v&&p("hsv"+(null!=t.a?"a":""),t))},ColorMethods:{hexToRgba:function(e){if(""===e||"none"===e)return{r:null,g:null,b:null,a:null};e=this.validateHex(e);var t="00",i="00",n="00",r="255";return 6==e.length&&(e+="ff"),e.length>6?(t=e.substring(0,2),i=e.substring(2,4),n=e.substring(4,6),r=e.substring(6,e.length)):(e.length>4&&(t=e.substring(4,e.length),e=e.substring(0,4)),e.length>2&&(i=e.substring(2,e.length),e=e.substring(0,2)),e.length>0&&(n=e.substring(0,e.length))),{r:this.hexToInt(t),g:this.hexToInt(i),b:this.hexToInt(n),a:this.hexToInt(r)}},validateHex:function(e){return e=e.toLowerCase().replace(/[^a-f0-9]/g,""),e.length>8&&(e=e.substring(0,8)),e},rgbaToHex:function(e){return this.intToHex(e.r)+this.intToHex(e.g)+this.intToHex(e.b)+this.intToHex(e.a)},intToHex:function(e){var t=(0|e).toString(16);return 1==t.length&&(t="0"+t),t.toLowerCase()},hexToInt:function(e){return parseInt(e,16)},rgbToHsv:function(e){var t,i=e.r/255,n=e.g/255,r=e.b/255,a={h:0,s:0,v:0},s=0,o=0;return i>=n&&i>=r?(o=i,s=n>r?r:n):n>=r&&n>=i?(o=n,s=i>r?r:i):(o=r,s=n>i?i:n),a.v=o,a.s=o?(o-s)/o:0,a.s?(t=o-s,i==o?a.h=(n-r)/t:n==o?a.h=2+(r-i)/t:a.h=4+(i-n)/t,a.h=parseInt(60*a.h),a.h<0&&(a.h+=360)):a.h=0,a.s=100*a.s|0,a.v=100*a.v|0,a},hsvToRgb:function(e){var t={r:0,g:0,b:0,a:100},i=e.h,n=e.s,r=e.v;if(0==n)0==r?t.r=t.g=t.b=0:t.r=t.g=t.b=255*r/100|0;else{360==i&&(i=0),i/=60,n/=100,r/=100;var a=0|i,s=i-a,o=r*(1-n),l=r*(1-n*s),u=r*(1-n*(1-s));switch(a){case 0:t.r=r,t.g=u,t.b=o;break;case 1:t.r=l,t.g=r,t.b=o;break;case 2:t.r=o,t.g=r,t.b=u;break;case 3:t.r=o,t.g=l,t.b=r;break;case 4:t.r=u,t.g=o,t.b=r;break;case 5:t.r=r,t.g=o,t.b=l}t.r=255*t.r|0,t.g=255*t.g|0,t.b=255*t.b|0}return t}}};var a=e.jPicker.Color,s=e.jPicker.List,o=e.jPicker.ColorMethods;e.fn.jPicker=function(t){var l=arguments;return this.each(function(){var u=this,c=e.extend(!0,{},e.fn.jPicker.defaults,t);"input"==e(u).get(0).nodeName.toLowerCase()&&(e.extend(!0,c,{window:{bindToInput:!0,expandable:!0,input:e(u)}}),""==e(u).val()?(c.color.active=new a({hex:null}),c.color.current=new a({hex:null})):o.validateHex(e(u).val())&&(c.color.active=new a({hex:e(u).val(),a:c.color.active.val("a")}),c.color.current=new a({hex:e(u).val(),a:c.color.active.val("a")}))),c.window.expandable?e(u).after('<span class="jPicker"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>'):c.window.liveUpdate=!1;var d=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,h=null,p=null,f=null,g=null,m=null,v=null,y=null,b=null,_=null,x=null,S=null,w=null,C=null,k=null,A=null,P=null,T=null,E=null,G=null,N=null,L=null,I=null,M=null,V=null,O=null,j=null,R=null,B=null,D=function(e){var t,i,n=_e.active,r=(ye.clientPath,n.val("hex"));switch(c.color.mode=e,e){case"h":if(setTimeout(function(){X.call(u,p,"transparent"),Q.call(u,g,0),K.call(u,g,100),Q.call(u,m,260),K.call(u,m,100),X.call(u,f,"transparent"),Q.call(u,y,0),K.call(u,y,100),Q.call(u,b,260),K.call(u,b,100),Q.call(u,_,260),K.call(u,_,100),Q.call(u,x,260),K.call(u,x,100),Q.call(u,w,260),K.call(u,w,100)},0),C.range("all",{minX:0,maxX:100,minY:0,maxY:100}),k.range("rangeY",{minY:0,maxY:360}),null==n.val("ahex"))break;C.val("xy",{x:n.val("s"),y:100-n.val("v")},C),k.val("y",360-n.val("h"),k);break;case"s":if(setTimeout(function(){X.call(u,p,"transparent"),Q.call(u,g,-260),Q.call(u,m,-520),Q.call(u,y,-260),Q.call(u,b,-520),Q.call(u,w,260),K.call(u,w,100)},0),C.range("all",{minX:0,maxX:360,minY:0,maxY:100}),k.range("rangeY",{minY:0,maxY:100}),null==n.val("ahex"))break;C.val("xy",{x:n.val("h"),y:100-n.val("v")},C),k.val("y",100-n.val("s"),k);break;case"v":if(setTimeout(function(){X.call(u,p,"000000"),Q.call(u,g,-780),Q.call(u,m,260),X.call(u,f,r),Q.call(u,y,-520),Q.call(u,b,260),K.call(u,b,100),Q.call(u,w,260),K.call(u,w,100)},0),C.range("all",{minX:0,maxX:360,minY:0,maxY:100}),k.range("rangeY",{minY:0,maxY:100}),null==n.val("ahex"))break;C.val("xy",{x:n.val("h"),y:100-n.val("s")},C),k.val("y",100-n.val("v"),k);break;case"r":if(t=-1040,i=-780,C.range("all",{minX:0,maxX:255,minY:0,maxY:255}),k.range("rangeY",{minY:0,maxY:255}),null==n.val("ahex"))break;C.val("xy",{x:n.val("b"),y:255-n.val("g")},C),k.val("y",255-n.val("r"),k);break;case"g":if(t=-1560,i=-1820,C.range("all",{minX:0,maxX:255,minY:0,maxY:255}),k.range("rangeY",{minY:0,maxY:255}),null==n.val("ahex"))break;C.val("xy",{x:n.val("b"),y:255-n.val("r")},C),k.val("y",255-n.val("g"),k);break;case"b":if(t=-2080,i=-2860,C.range("all",{minX:0,maxX:255,minY:0,maxY:255}),k.range("rangeY",{minY:0,maxY:255}),null==n.val("ahex"))break;C.val("xy",{x:n.val("r"),y:255-n.val("g")},C),k.val("y",255-n.val("b"),k);break;case"a":if(setTimeout(function(){X.call(u,p,"transparent"),Q.call(u,g,-260),Q.call(u,m,-520),Q.call(u,y,260),Q.call(u,b,260),K.call(u,b,100),Q.call(u,w,0),K.call(u,w,100)},0),C.range("all",{minX:0,maxX:360,minY:0,maxY:100}),k.range("rangeY",{minY:0,maxY:255}),null==n.val("ahex"))break;C.val("xy",{x:n.val("h"),y:100-n.val("v")},C),k.val("y",255-n.val("a"),k);break;default:throw"Invalid Mode"}switch(e){case"h":break;case"s":case"v":case"a":setTimeout(function(){K.call(u,g,100),K.call(u,y,100),Q.call(u,_,260),K.call(u,_,100),Q.call(u,x,260),K.call(u,x,100)},0);break;case"r":case"g":case"b":setTimeout(function(){X.call(u,p,"transparent"),X.call(u,f,"transparent"),K.call(u,y,100),K.call(u,g,100),Q.call(u,g,t),Q.call(u,m,t-260),Q.call(u,y,i-780),Q.call(u,b,i-520),Q.call(u,_,i),Q.call(u,x,i-260),Q.call(u,w,260),K.call(u,w,100)},0)}null!=n.val("ahex")&&F.call(u,n)},F=function(e,t){(null==t||t!=k&&t!=C)&&U.call(u,e,t),setTimeout(function(){z.call(u,e),q.call(u,e),W.call(u,e)},0)},H=function(e,t){var i=_e.active;if(t==C||null!=i.val()){var n=e.val("all");switch(c.color.mode){case"h":i.val("sv",{s:n.x,v:100-n.y},t);break;case"s":case"a":i.val("hv",{h:n.x,v:100-n.y},t);break;case"v":i.val("hs",{h:n.x,s:100-n.y},t);break;case"r":i.val("gb",{g:255-n.y,b:n.x},t);break;case"g":i.val("rb",{r:255-n.y,b:n.x},t);break;case"b":i.val("rg",{r:n.x,g:255-n.y},t)}}},$=function(e,t){var i=_e.active;if(t==k||null!=i.val())switch(c.color.mode){case"h":i.val("h",{h:360-e.val("y")},t);break;case"s":i.val("s",{s:100-e.val("y")},t);break;case"v":i.val("v",{v:100-e.val("y")},t);break;case"r":i.val("r",{r:255-e.val("y")},t);break;case"g":i.val("g",{g:255-e.val("y")},t);break;case"b":i.val("b",{b:255-e.val("y")},t);break;case"a":i.val("a",255-e.val("y"),t)}},U=function(e,t){if(t!=C)switch(c.color.mode){case"h":var i=e.val("sv");C.val("xy",{x:null!=i?i.s:100,y:100-(null!=i?i.v:100)},t);break;case"s":case"a":var n=e.val("hv");C.val("xy",{x:n&&n.h||0,y:100-(null!=n?n.v:100)},t);break;case"v":var r=e.val("hs");C.val("xy",{x:r&&r.h||0,y:100-(null!=r?r.s:100)},t);break;case"r":var a=e.val("bg");C.val("xy",{x:a&&a.b||0,y:255-(a&&a.g||0)},t);break;case"g":var s=e.val("br");C.val("xy",{x:s&&s.b||0,y:255-(s&&s.r||0)},t);break;case"b":var o=e.val("rg");C.val("xy",{x:o&&o.r||0,y:255-(o&&o.g||0)},t)}if(t!=k)switch(c.color.mode){case"h":k.val("y",360-(e.val("h")||0),t);break;case"s":var l=e.val("s");k.val("y",100-(null!=l?l:100),t);break;case"v":var u=e.val("v");k.val("y",100-(null!=u?u:100),t);break;case"r":k.val("y",255-(e.val("r")||0),t);break;case"g":k.val("y",255-(e.val("g")||0),t);break;case"b":k.val("y",255-(e.val("b")||0),t);break;case"a":var d=e.val("a");k.val("y",255-(null!=d?d:255),t)}},z=function(e){try{var t=e.val("all");N.css({backgroundColor:t&&"#"+t.hex||"transparent"}),K.call(u,N,t&&Math.precision(100*t.a/255,4)||0)}catch(i){}},q=function(e){switch(c.color.mode){case"h":X.call(u,p,new a({h:e.val("h")||0,s:100,v:100}).val("hex"));break;case"s":case"a":var t=e.val("s");K.call(u,m,100-(null!=t?t:100));break;case"v":var i=e.val("v");K.call(u,g,null!=i?i:100);break;case"r":K.call(u,m,Math.precision((e.val("r")||0)/255*100,4));break;case"g":K.call(u,m,Math.precision((e.val("g")||0)/255*100,4));break;case"b":K.call(u,m,Math.precision((e.val("b")||0)/255*100))}var n=e.val("a");K.call(u,v,Math.precision(100*(255-(n||0))/255,4))},W=function(e){switch(c.color.mode){case"h":var t=e.val("a");K.call(u,S,Math.precision(100*(255-(t||0))/255,4));break;case"s":var i=e.val("hva"),n=new a({h:i&&i.h||0,s:100,v:null!=i?i.v:100});X.call(u,f,n.val("hex")),K.call(u,b,100-(null!=i?i.v:100)),K.call(u,S,Math.precision(100*(255-(i&&i.a||0))/255,4));break;case"v":var r=e.val("hsa"),s=new a({h:r&&r.h||0,s:null!=r?r.s:100,v:100});X.call(u,f,s.val("hex")),K.call(u,S,Math.precision(100*(255-(r&&r.a||0))/255,4));break;case"r":case"g":case"b":var o=0,l=0,d=e.val("rgba");"r"==c.color.mode?(o=d&&d.b||0,l=d&&d.g||0):"g"==c.color.mode?(o=d&&d.b||0,l=d&&d.r||0):"b"==c.color.mode&&(o=d&&d.r||0,l=d&&d.g||0);var h=l>o?o:l;K.call(u,b,o>l?Math.precision((o-l)/(255-l)*100,4):0),K.call(u,_,l>o?Math.precision((l-o)/(255-o)*100,4):0),K.call(u,x,Math.precision(h/255*100,4)),K.call(u,S,Math.precision(100*(255-(d&&d.a||0))/255,4));break;case"a":var t=e.val("a");X.call(u,f,e.val("hex")||"000000"),K.call(u,S,null!=t?0:100),K.call(u,w,null!=t?100:0)}},X=function(e,t){e.css({backgroundColor:t&&6==t.length&&"#"+t||"transparent"})},Y=function(e,t){!d||-1==t.indexOf("AlphaBar.png")&&-1==t.indexOf("Bars.png")&&-1==t.indexOf("Maps.png")?e.css({backgroundImage:"url('"+t+"')"}):(e.attr("pngSrc",t),e.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"}))},Q=function(e,t){e.css({top:t+"px"})},K=function(e,t){if(e.css({visibility:t>0?"visible":"hidden"}),t>0&&100>t)if(d){var i=e.attr("pngSrc");null==i||-1==i.indexOf("AlphaBar.png")&&-1==i.indexOf("Bars.png")&&-1==i.indexOf("Maps.png")?e.css({opacity:Math.precision(t/100,4)}):e.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+t+")"})}else e.css({opacity:Math.precision(t/100,4)});else if(0==t||100==t)if(d){var i=e.attr("pngSrc");null==i||-1==i.indexOf("AlphaBar.png")&&-1==i.indexOf("Bars.png")&&-1==i.indexOf("Maps.png")?e.css({opacity:""}):e.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"', sizingMethod='scale')"})}else e.css({opacity:""})},Z=function(){_e.active.val("ahex",_e.current.val("ahex"))},J=function(){_e.current.val("ahex",_e.active.val("ahex"))},ee=function(t){e(this).parents("tbody:first").find('input:radio[value!="'+t.target.value+'"]').removeAttr("checked"),D.call(u,t.target.value)},te=function(){Z.call(u)},ie=function(){Z.call(u),c.window.expandable&&ge.call(u),e.isFunction(pe)&&pe.call(u,_e.active,M)},ne=function(){J.call(u),c.window.expandable&&ge.call(u),e.isFunction(de)&&de.call(u,_e.active,I)},re=function(){fe.call(u)},ae=function(e,t){var i=e.val("hex");L.css({backgroundColor:i&&"#"+i||"transparent"}),K.call(u,L,Math.precision(100*(e.val("a")||0)/255,4))},se=function(e,t){var i=e.val("hex"),n=e.val("va");O.css({backgroundColor:i&&"#"+i||"transparent"}),K.call(u,j,Math.precision(100*(255-(n&&n.a||0))/255,4)),c.window.bindToInput&&c.window.updateInputColor&&c.window.input.css({backgroundColor:i&&"#"+i||"transparent",color:null==n||n.v>75?"#000000":"#ffffff"})},oe=function(t){c.window.element,c.window.page;P=parseInt(h.css("left")),T=parseInt(h.css("top")),E=t.pageX,G=t.pageY,e(document).bind("mousemove",le).bind("mouseup",ue),t.preventDefault()},le=function(t){return h.css({left:P-(E-t.pageX)+"px",top:T-(G-t.pageY)+"px"}),c.window.expandable&&!e.support.boxModel&&h.prev().css({left:h.css("left"),top:h.css("top")}),t.stopPropagation(),t.preventDefault(),!1},ue=function(t){return e(document).unbind("mousemove",le).unbind("mouseup",ue),t.stopPropagation(),t.preventDefault(),!1},ce=function(t){return t.preventDefault(),t.stopPropagation(),_e.active.val("ahex",e(this).attr("title")||null,t.target),!1},de=e.isFunction(l[1])&&l[1]||null,he=e.isFunction(l[2])&&l[2]||null,pe=e.isFunction(l[3])&&l[3]||null,fe=function(){_e.current.val("ahex",_e.active.val("ahex"));var t=function(){if(c.window.expandable&&!e.support.boxModel){var t=h.find("table:first");h.before("<iframe/>"),h.prev().css({width:t.width(),height:h.height(),opacity:0,position:"absolute",left:h.css("left"),top:h.css("top")})}};switch(c.window.expandable&&(e(document.body).children("div.jPicker.Container").css({zIndex:10}),h.css({zIndex:20})),c.window.effects.type){case"fade":h.fadeIn(c.window.effects.speed.show,t);break;case"slide":h.slideDown(c.window.effects.speed.show,t);break;case"show":default:h.show(c.window.effects.speed.show,t)}},ge=function(){var t=function(){c.window.expandable&&h.css({zIndex:10}),c.window.expandable&&!e.support.boxModel&&h.prev().remove()};switch(c.window.effects.type){case"fade":h.fadeOut(c.window.effects.speed.hide,t);break;case"slide":h.slideUp(c.window.effects.speed.hide,t);break;case"show":default:h.hide(c.window.effects.speed.hide,t)}},me=function(){var t=c.window,s=t.expandable?e(u).next().find(".Container:first"):null;h=e(t.expandable?"<div/>":u),h.addClass("jPicker Container"),t.expandable&&h.hide(),h.get(0).onselectstart=function(e){return"input"!==e.target.nodeName.toLowerCase()?!1:void 0};var o=_e.active.val("all");t.alphaPrecision<0?t.alphaPrecision=0:t.alphaPrecision>2&&(t.alphaPrecision=2);var l='<table class="jPicker" cellpadding="0" cellspacing="0"><tbody>'+(t.expandable?'<tr><td class="Move" colspan="5">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="Title">'+(t.title||be.text.title)+'</h2><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+ye.clientPath+ye.colorMap.arrow.file+'" class="Arrow"/></div></td><td rowspan="9"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+ye.clientPath+ye.colorBar.arrow.file+'" class="Arrow"/></div></td><td colspan="2" class="Preview">'+be.text.newColor+'<div><span class="Active" title="'+be.tooltips.colors.newColor+'">&nbsp;</span><span class="Current" title="'+be.tooltips.colors.currentColor+'">&nbsp;</span></div>'+be.text.currentColor+'</td><td rowspan="9" class="Button"><input type="button" class="Ok" value="'+be.text.ok+'" title="'+be.tooltips.buttons.ok+'"/><input type="button" class="Cancel" value="'+be.text.cancel+'" title="'+be.tooltips.buttons.cancel+'"/><hr/><div class="Grid">&nbsp;</div></td></tr><tr class="Hue"><td class="Radio"><label title="'+be.tooltips.hue.radio+'"><input type="radio" value="h"'+("h"==c.color.mode?' checked="checked"':"")+'/>H:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=o?o.h:"")+'" title="'+be.tooltips.hue.textbox+'"/>&nbsp;&deg;</td></tr><tr class="Saturation"><td class="Radio"><label title="'+be.tooltips.saturation.radio+'"><input type="radio" value="s"'+("s"==c.color.mode?' checked="checked"':"")+'/>S:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=o?o.s:"")+'" title="'+be.tooltips.saturation.textbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><label title="'+be.tooltips.value.radio+'"><input type="radio" value="v"'+("v"==c.color.mode?' checked="checked"':"")+'/>V:</label><br/><br/></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=o?o.v:"")+'" title="'+be.tooltips.value.textbox+'"/>&nbsp;%<br/><br/></td></tr><tr class="Red"><td class="Radio"><label title="'+be.tooltips.red.radio+'"><input type="radio" value="r"'+("r"==c.color.mode?' checked="checked"':"")+'/>R:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=o?o.r:"")+'" title="'+be.tooltips.red.textbox+'"/></td></tr><tr class="Green"><td class="Radio"><label title="'+be.tooltips.green.radio+'"><input type="radio" value="g"'+("g"==c.color.mode?' checked="checked"':"")+'/>G:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=o?o.g:"")+'" title="'+be.tooltips.green.textbox+'"/></td></tr><tr class="Blue"><td class="Radio"><label title="'+be.tooltips.blue.radio+'"><input type="radio" value="b"'+("b"==c.color.mode?' checked="checked"':"")+'/>B:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=o?o.b:"")+'" title="'+be.tooltips.blue.textbox+'"/></td></tr><tr class="Alpha"><td class="Radio">'+(t.alphaSupport?'<label title="'+be.tooltips.alpha.radio+'"><input type="radio" value="a"'+("a"==c.color.mode?' checked="checked"':"")+"/>A:</label>":"&nbsp;")+'</td><td class="Text">'+(t.alphaSupport?'<input type="text" maxlength="'+(3+t.alphaPrecision)+'" value="'+(null!=o?Math.precision(100*o.a/255,t.alphaPrecision):"")+'" title="'+be.tooltips.alpha.textbox+'"/>&nbsp;%':"&nbsp;")+'</td></tr><tr class="Hex"><td colspan="2" class="Text"><label title="'+be.tooltips.hex.textbox+'">#:<input type="text" maxlength="6" class="Hex" value="'+(null!=o?o.hex:"")+'"/></label>'+(t.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+(null!=o?o.ahex.substring(6):"")+'" title="'+be.tooltips.hex.alpha+'"/></td>':"&nbsp;")+"</tr></tbody></table>";t.expandable?(h.html(l),0==e(document.body).children("div.jPicker.Container").length?e(document.body).prepend(h):e(document.body).children("div.jPicker.Container:last").after(h),h.mousedown(function(){e(document.body).children("div.jPicker.Container").css({zIndex:10}),h.css({zIndex:20})}),h.css({left:"left"==t.position.x?s.offset().left-530-("center"==t.position.y?25:0)+"px":"center"==t.position.x?s.offset().left-260+"px":"right"==t.position.x?s.offset().left-10+("center"==t.position.y?25:0)+"px":"screenCenter"==t.position.x?(e(document).width()>>1)-260+"px":s.offset().left+parseInt(t.position.x)+"px",position:"absolute",top:"top"==t.position.y?s.offset().top-312+"px":"center"==t.position.y?s.offset().top-156+"px":"bottom"==t.position.y?s.offset().top+25+"px":s.offset().top+parseInt(t.position.y)+"px"})):(h=e(u),h.html(l));var d=h.find("tbody:first");p=d.find("div.Map:first"),f=d.find("div.Bar:first");var P=p.find("span"),T=f.find("span");g=P.filter(".Map1:first"),m=P.filter(".Map2:first"),v=P.filter(".Map3:first"),y=T.filter(".Map1:first"),b=T.filter(".Map2:first"),_=T.filter(".Map3:first"),x=T.filter(".Map4:first"),S=T.filter(".Map5:first"),w=T.filter(".Map6:first"),C=new n(p,{map:{width:ye.colorMap.width,height:ye.colorMap.height},arrow:{image:ye.clientPath+ye.colorMap.arrow.file,width:ye.colorMap.arrow.width,height:ye.colorMap.arrow.height}}),C.bind(H),k=new n(f,{map:{width:ye.colorBar.width,height:ye.colorBar.height},arrow:{image:ye.clientPath+ye.colorBar.arrow.file,width:ye.colorBar.arrow.width,height:ye.colorBar.arrow.height}}),k.bind($),A=new r(d,_e.active,t.expandable&&t.bindToInput?t.input:null,t.alphaPrecision);var E=null!=o?o.hex:null,G=d.find(".Preview"),U=d.find(".Button");if(N=G.find(".Active:first").css({backgroundColor:E&&"#"+E||"transparent"}),L=G.find(".Current:first").css({backgroundColor:E&&"#"+E||"transparent"}).bind("click",te),K.call(u,L,Math.precision(100*_e.current.val("a"))/255,4),I=U.find(".Ok:first").bind("click",ne),M=U.find(".Cancel:first").bind("click",ie),V=U.find(".Grid:first"),setTimeout(function(){Y.call(u,g,ye.clientPath+"Maps.png"),Y.call(u,m,ye.clientPath+"Maps.png"),Y.call(u,v,ye.clientPath+"map-opacity.png"),Y.call(u,y,ye.clientPath+"Bars.png"),Y.call(u,b,ye.clientPath+"Bars.png"),Y.call(u,_,ye.clientPath+"Bars.png"),Y.call(u,x,ye.clientPath+"Bars.png"),Y.call(u,S,ye.clientPath+"bar-opacity.png"),Y.call(u,w,ye.clientPath+"AlphaBar.png"),Y.call(u,G.find("div:first"),ye.clientPath+"preview-opacity.png")},0),d.find("td.Radio input").bind("click",ee),_e.quickList&&_e.quickList.length>0){var z="";for(i=0;i<_e.quickList.length;i++){"string"==(typeof _e.quickList[i]).toString().toLowerCase()&&(_e.quickList[i]=new a({hex:_e.quickList[i]}));var q=_e.quickList[i].val("a"),W=_e.quickList[i].val("ahex");!t.alphaSupport&&W&&(W=W.substring(0,6)+"ff");var X=_e.quickList[i].val("hex");W||(W="00000000"),z+='<span class="QuickColor"'+(W&&' title="#'+W+'"'||"none")+' style="background-color:'+(X&&"#"+X||"")+";"+(X?"":"background-image:url("+ye.clientPath+"NoColor.png)")+(t.alphaSupport&&q&&255>q?";opacity:"+Math.precision(q/255,4)+";filter:Alpha(opacity="+Math.precision(q/2.55,4)+")":"")+'">&nbsp;</span>'}Y.call(u,V,ye.clientPath+"bar-opacity.png"),V.html(z),V.find(".QuickColor").click(ce)}D.call(u,c.color.mode),_e.active.bind(F),e.isFunction(he)&&_e.active.bind(he),_e.current.bind(ae),t.expandable?(u.icon=s.parents(".Icon:first"),O=u.icon.find(".Color:first").css({backgroundColor:E&&"#"+E||"transparent"
}),j=u.icon.find(".Alpha:first"),Y.call(u,j,ye.clientPath+"bar-opacity.png"),K.call(u,j,Math.precision(100*(255-(null!=o?o.a:0))/255,4)),R=u.icon.find(".Image:first").css({backgroundImage:"url('"+ye.clientPath+ye.picker.file+"')"}).bind("click",re),t.bindToInput&&t.updateInputColor&&t.input.css({backgroundColor:E&&"#"+E||"transparent",color:null==o||o.v>75?"#000000":"#ffffff"}),B=d.find(".Move:first").bind("mousedown",oe),_e.active.bind(se)):fe.call(u)},ve=function(){for(h.find("td.Radio input").unbind("click",ee),L.unbind("click",te),M.unbind("click",ie),I.unbind("click",ne),c.window.expandable&&(R.unbind("click",re),B.unbind("mousedown",oe),u.icon=null),h.find(".QuickColor").unbind("click",ce),p=null,f=null,g=null,m=null,v=null,y=null,b=null,_=null,x=null,S=null,w=null,C.destroy(),C=null,k.destroy(),k=null,A.destroy(),A=null,N=null,L=null,I=null,M=null,V=null,de=null,pe=null,he=null,h.html(""),i=0;i<s.length;i++)s[i]==u&&s.splice(i,1)},ye=c.images,be=c.localization,_e={active:new a("string"==(typeof c.color.active).toString().toLowerCase()?{ahex:!c.window.alphaSupport&&c.color.active?c.color.active.substring(0,6)+"ff":c.color.active}:{ahex:!c.window.alphaSupport&&c.color.active.val("ahex")?c.color.active.val("ahex").substring(0,6)+"ff":c.color.active.val("ahex")}),current:new a("string"==(typeof c.color.active).toString().toLowerCase()?{ahex:!c.window.alphaSupport&&c.color.active?c.color.active.substring(0,6)+"ff":c.color.active}:{ahex:!c.window.alphaSupport&&c.color.active.val("ahex")?c.color.active.val("ahex").substring(0,6)+"ff":c.color.active.val("ahex")}),quickList:c.color.quickList};e.extend(!0,u,{commitCallback:de,liveCallback:he,cancelCallback:pe,color:_e,show:fe,hide:ge,destroy:ve}),s.push(u),setTimeout(function(){me.call(u)},0)})},e.fn.jPicker.defaults={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:!1,liveUpdate:!0,alphaSupport:!1,alphaPrecision:0,updateInputColor:!0},color:{mode:"h",active:new a({ahex:"#ffcc00ff"}),quickList:[new a({h:360,s:33,v:100}),new a({h:360,s:66,v:100}),new a({h:360,s:100,v:100}),new a({h:360,s:100,v:75}),new a({h:360,s:100,v:50}),new a({h:180,s:0,v:100}),new a({h:30,s:33,v:100}),new a({h:30,s:66,v:100}),new a({h:30,s:100,v:100}),new a({h:30,s:100,v:75}),new a({h:30,s:100,v:50}),new a({h:180,s:0,v:90}),new a({h:60,s:33,v:100}),new a({h:60,s:66,v:100}),new a({h:60,s:100,v:100}),new a({h:60,s:100,v:75}),new a({h:60,s:100,v:50}),new a({h:180,s:0,v:80}),new a({h:90,s:33,v:100}),new a({h:90,s:66,v:100}),new a({h:90,s:100,v:100}),new a({h:90,s:100,v:75}),new a({h:90,s:100,v:50}),new a({h:180,s:0,v:70}),new a({h:120,s:33,v:100}),new a({h:120,s:66,v:100}),new a({h:120,s:100,v:100}),new a({h:120,s:100,v:75}),new a({h:120,s:100,v:50}),new a({h:180,s:0,v:60}),new a({h:150,s:33,v:100}),new a({h:150,s:66,v:100}),new a({h:150,s:100,v:100}),new a({h:150,s:100,v:75}),new a({h:150,s:100,v:50}),new a({h:180,s:0,v:50}),new a({h:180,s:33,v:100}),new a({h:180,s:66,v:100}),new a({h:180,s:100,v:100}),new a({h:180,s:100,v:75}),new a({h:180,s:100,v:50}),new a({h:180,s:0,v:40}),new a({h:210,s:33,v:100}),new a({h:210,s:66,v:100}),new a({h:210,s:100,v:100}),new a({h:210,s:100,v:75}),new a({h:210,s:100,v:50}),new a({h:180,s:0,v:30}),new a({h:240,s:33,v:100}),new a({h:240,s:66,v:100}),new a({h:240,s:100,v:100}),new a({h:240,s:100,v:75}),new a({h:240,s:100,v:50}),new a({h:180,s:0,v:20}),new a({h:270,s:33,v:100}),new a({h:270,s:66,v:100}),new a({h:270,s:100,v:100}),new a({h:270,s:100,v:75}),new a({h:270,s:100,v:50}),new a({h:180,s:0,v:10}),new a({h:300,s:33,v:100}),new a({h:300,s:66,v:100}),new a({h:300,s:100,v:100}),new a({h:300,s:100,v:75}),new a({h:300,s:100,v:50}),new a({h:180,s:0,v:0}),new a({h:330,s:33,v:100}),new a({h:330,s:66,v:100}),new a({h:330,s:100,v:100}),new a({h:330,s:100,v:75}),new a({h:330,s:100,v:50}),new a]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},value:{radio:"Set To &ldquo;Value&rdquo; Color Mode",textbox:"Enter A &ldquo;Value&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)",alpha:"Enter A &ldquo;Alpha&rdquo; Value (#00-#ff)"}}}}}(jQuery,"1.1.6");
